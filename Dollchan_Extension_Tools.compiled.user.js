// ==UserScript==
// @name			Dollchan Extension Tools
// @version			12.12.10.0
// @namespace		http://www.freedollchan.org/scripts/*
// @author			Sthephan Shinkufag @ FreeDollChan
// @copyright		(C)2084, Bender Bending Rodriguez
// @description		Doing some profit for imageboards
// @icon			https://raw.github.com/SthephanShinkufag/Dollchan-Extension-Tools/stable/Icon.png
// @updateURL		https://raw.github.com/SthephanShinkufag/Dollchan-Extension-Tools/stable/Dollchan_Extension_Tools.meta.js
// @include			*
// ==/UserScript==
var ka=void 0,j=!0,l=null,o=!1;
(function(Fa){var Ua,Va,Wa,hb,la,Ga,ib,sa,jb,Sb,ta,Tb,ga,Jc,Kc,Lc,kb,Mc,Nc,Oc,Pc,Ub,Qc,Rc,Sc,Tc,Uc,Vb,Vc,Wc,Xc,lb,Yc,Zc,$c,ad,bd,cd,dd,ed,fd,gd,Wb,Xb,hd,id,jd,Yb,Zb,kd,ld,md,$b,nd,ua,od,pd,qd,rd,sd,td,ud,vd,wd,xd,yd,zd,Ad,Bd,ac,mb,Cd,Dd,Ed,va,Fd,Gd,Hd,Id,Jd,bc,Kd,Ld,Md,Nd,Od,Pd,Qd,Rd,Sd,Td,Ud,Vd,ma,Wd,cc,Xd,Yd,Zd,$d,ae,be,wa,Ka;function X(a,b){return n.evaluate(a,b,l,8,l).singleNodeValue}function nb(a,b){return b.querySelector(a)}function V(a,b){return k.c?b.getElementsByClassName(a):b.querySelectorAll("."+
a)}function x(a,b){return b.getElementsByClassName(a)[0]}function r(a){return n.getElementById(a)}function N(a,b){return b.getElementsByTagName(a)[0]}function ce(a,b){var c=a.cloneNode(o);c.innerHTML=b;a.parentNode.replaceChild(c,a);return c}function U(a,b){for(var c in b)"text"===c?a.textContent=b[c]:"value"===c?a.value=b[c]:a.setAttribute(c,b[c]);return a}function S(a,b){for(var c in b)a.addEventListener(c,b[c],o);return a}function dc(a,b){for(var c in b)a.removeEventListener(c,b[c],o)}function xa(a,
b){for(var c=0,d=b.length;c<d;c++)b[c]&&a.appendChild(b[c])}function ea(a,b){a.parentNode.insertBefore(b,a)}function L(a,b){a.parentNode.insertBefore(b,a.nextSibling)}function P(a){ec.innerHTML=a;return ec.firstChild}function w(a,b,c){a=n.createElement(a);b&&U(a,b);c&&S(a,c);return a}function q(a,b,c){a=w(a,b,l);xa(a,c);return a}function T(a){return n.createTextNode(a)}function Y(a,b,c){return w("input",{type:"button",value:a,title:b},{click:c})}function ob(a){return n.head.appendChild(w("script",
{type:"text/javascript",text:a},l))}function fc(a){return n.head.appendChild(w("style",{type:"text/css",text:a},l))}function G(a,b){return a?b:l}function K(a){a.style.display="none"===a.style.display?"":"none"}function v(a){a&&a.parentNode.removeChild(a)}function na(a){a=a.getBoundingClientRect();return{top:Math.round(a.top+window.pageYOffset),left:Math.round(a.left+window.pageXOffset)}}function pb(a){window.scrollTo(0,na(a).top)}function A(a){a.preventDefault()}function Xa(a,b){var c=a.scrollTop,
d=a.selectionStart;a.value=a.value.substr(0,d)+b+a.value.substr(a.selectionEnd);a.setSelectionRange(d+b.length,d+b.length);a.focus();a.scrollTop=c}function gc(){return(k.i?n.getSelection():window.getSelection()).toString()}function oa(a){for(var b in a)if(a.hasOwnProperty(b))return o;return j}function M(a){var b=Date.now();qb.push(a+": "+(b-hc)+"ms");hc=b}function de(a){var b,c=new window.XMLHttpRequest;a.onreadystatechange&&(c.onreadystatechange=function(){a.onreadystatechange(c)});c.onload=function(){if(a.onload)a.onload(c);
c=a=l};c.open(a.method,a.url,j);a.responseType&&(c.responseType=a.responseType);for(b in a.headers)c.setRequestHeader(b,a.headers[b]);c.send(l)}function rb(a,b,c){this.sb=[];this.length=0;this.Wa=b;this.Ab=c;this.Ic=a;this.ma=0;this.xb=o}function ic(a){return(a+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function ca(a){return X("ancestor::*[@de-post]",a)}function La(a){return a.querySelectorAll('.thumb, img[src*="thumb"], img[src*="/spoiler"], img[src^="blob:"]')}function ee(a){return(a=a.querySelector(e.Qb))&&
(a=a.textContent)?+(a.match(/\d+/)||[0])[0]:0}function ya(a){return a.dc||(a.dc=a.m.innerHTML.replace(/<\/?(?:br|p|li)[^>]*?>/gi,"\n").replace(/<[^>]+?>/g,"").replace(/&gt;/g,">").replace(/&lt;/g,"<").trim())}function fe(a){var a=x(e.aa,a).textContent.match(/(\d+(?:\.\d+)?)\s*([mkê])?[bá]/i),b=parseFloat(a[1]);return"M"===a[2]?1E3*b|0:!a[2]?Math.round(b/1E3):b}function jc(a){a=x(e.aa,a);return e.B?(a=a.onclick.toString().split("', '"),[a[3],a[4]]):(a=a?a.textContent.match(/(\d+)[x\u00d7](\d+)/):
o)?a.slice(1):[l,l]}function sb(a){return"/"+a+(a?"/":"")}function kc(a,b){var c,d,g=a instanceof Array;if(g){if(0===a.length)return"[]";c="["}else{if(oa(a))return"{}";c="{"}d=0;k.forEach(a,function(a){var e=this[a],t=typeof e;"function"!==t&&("object"===t&&(t=e===l?"null":e instanceof Array?"array":e instanceof Date?"date":e instanceof RegExp?"regex":"object"),0<d&&(c+=","),c+="\n"+b+"    "+(g?"":'"'+a+'": ')+("array"===t||"object"===t?kc(e,b+"    "):"boolean"===t||"number"===t?e.toString():"string"===
t?'"'+e.replace(/(["\n\\])/g,"\\$1")+'"':t),d++)});return c+="\n"+b+(g?"]":"}")}function Ya(a){for(var b,c=0,d=0,g=a.length;d<g;++d){c=(c<<4)+a.charCodeAt(d);if(b=c&4026531840)c^=b>>>24;c&=~b}return c}function ge(a){for(var b,c=n.cookie.split("; "),d=c.length;d--;)if(b=c[d].split("="),b[0]===escape(a))return unescape(b[1]);return o}function Ha(a){return k.xa?GM_getValue(a):Fa?Fa.getItem(a):localStorage.getItem(a)}function fa(a,b){k.xa?GM_setValue(a,b):Fa?Fa.setItem(a,b):localStorage.setItem(a,b)}
function tb(a){k.xa?GM_deleteValue(a):Fa?Fa.removeItem(a):localStorage.removeItem(a)}function ub(a){var b={};try{return JSON.parse(Ha(a))||b}catch(c){return b}}function he(){try{var a=JSON.parse(Ha("DESU_Config_"+e.b));tb("DESU_Config_"+e.b);if(a.version)return delete a.version,delete a.lastScrUpd,a}catch(b){}return o}function za(a,b){b?Z[a]=b:delete Z[a];fa("DESU_Config",JSON.stringify(Z))}function Q(a,b){f[a]!==b&&(f[a]=b,za(e.b,f))}function vb(a){Q(a,!f[a]?1:0)}function ie(){W=[];if(s){var a=(sessionStorage["de-hidden-"+
B+s]||"").split(",");if(2===a.length&&+a[0]===(f.hideBySpell?D.hash:0))if(W=a[1].split(""),a=sessionStorage["de-deleted"])a.split(",").forEach(function(a){W.splice(a,1)}),delete sessionStorage["de-deleted"]}W.length=C.length;O=ub("DESU_Posts_"+e.b+"_"+B);je()}function Ma(){s&&(sessionStorage["de-hidden-"+B+s]=(f.hideBySpell?D.hash+",":"0,")+W.join(""));pa("hid",j)}function Na(){var a,b=JSON.stringify(O);9E3<b.length&&(a=Date.now()-432E6,k.forEach(O,function(b){O[b][1]<a&&delete O[b]}),b=JSON.stringify(O));
fa("DESU_Posts_"+e.b+"_"+B,b);pa("hid",j)}function je(){$=ub("DESU_Threads");Oa=($[e.b]||{})[B]||{}}function ke(a){oa($[e.b][a])&&delete $[e.b][a];oa($[e.b])&&delete $[e.b]}function le(){($[e.b]||($[e.b]={}))[B]=Oa;ke(B);fa("DESU_Threads",JSON.stringify($))}function me(a,b){0===b?Oa[a.a]=a.Da:delete Oa[a.a];le()}function lc(){E=ub("DESU_Favorites")}function wb(a){fa("DESU_Favorites",a);pa("fav",j)}function mc(a,b,c){delete E[a][b][c];oa(E[a][b])&&delete E[a][b];oa(E[a])&&delete E[a];H[c]&&((x("de-btn-fav-sel",
H[c].I)||{}).className="de-btn-fav")}function ne(a,b){var c=e.host,d=B,g=a.a;b&&(lc(),E[c]&&E[c][d]&&E[c][d][g]?mc(c,d,g):(E[c]||(E[c]={}),E[c][d]||(E[c][d]={}),E[c][d][g]={cnt:a.L.R,txt:a.Da,url:e.O(B,g)},b.className="de-btn-fav-sel"),wb(JSON.stringify(E)))}function oe(){var a=sessionStorage["de-viewed"];a&&a.split(",").forEach(function(a){if(a=H[a])a.classList.add("de-viewed"),a.ib=j})}function aa(a,b,c,d,g){return q("li",l,[w("a",{id:"de-btn-"+a,"class":"de-abtn",title:Tb[a][i],href:c||"#",onmouseout:g},
{click:b,mouseover:d})])}function pe(){var a=La(y).length;ea(y,q("div",{id:"de-main",lang:qe()},[q("div",{id:"de-panel"},[w("span",{id:"de-btn-logo"},{click:function(){vb("expandPanel");ha()}}),q("ul",{id:"de-panel-btns"},[aa("settings",function(a){A(a);pa("cfg",o)},l,l,l),aa("hidden",function(a){A(a);pa("hid",o)},l,l,l),aa("favor",function(a){A(a);pa("fav",o)},l,l,l),aa("refresh",function(a){A(a);window.location.reload()},l,function(){s||Bf()},"de_delSelection(event)"),aa("goback",l,e.oa(B,Aa-1),
l,l),G(!s,aa("gonext",l,e.oa(B,Aa+1),l,l)),aa("goup",function(a){A(a);window.scrollTo(0,0)},l,l,l),aa("godown",function(a){A(a);window.scrollTo(0,n.body.scrollHeight||n.body.offsetHeight)},l,l,l),G(!s&&(h.form||ba),aa("newthr",re,l,l,l)),G(0<a,aa("expimg",function(a){A(a);f.expandImgs=1;Za=!Za;C.forEach(function(a){nc(a,Za)})},l,l,l)),G(h.file||ba,aa("maskimg",function(a){A(a);vb("maskImgs");ha()},l,l,l)),G(s&&1===f.updThread,aa("upd-on",function(a){A(a);xb?se():(this.id="de-btn-upd-on",te())},l,
l,l)),G(!k.ha&&s&&1===f.updThread,aa("audio-off",function(a){A(a);ue();Ua=o;this.id=Va?"de-btn-audio-on":"de-btn-audio-off";v(r("de-menu"))},l,Cf,"de_delSelection(event)")),G(e.W||e.d,aa("catalog",l,"//"+e.host+"/"+B+"/catalog.html",l,l))]),G(s,P('<div id="de-panel-info"><span title="'+Tb.counter[i]+'">'+C.length+"/"+a+"</span></div>"))]),w("div",{"class":"de-content"},l),w("div",{id:"de-alert"},l),w("hr",{style:"clear: both;"},l)]))}function pa(a,b){if(!$a){var c=x("de-content",n),d="de-content-"+
a;b&&c.id!==d||(c.hasChildNodes()&&f.animation?(k.$(c,function(c){ve(c,d,a,b);d=a=b=l}),c.className="de-content de-cfg-close"):ve(c,d,a,b))}}function ve(a,b,c,d){a.innerHTML=a.style.backgroundColor="";if(!d&&a.id===b)a.removeAttribute("id");else{a.id=b;if("cfg"===c)Df(a);else if(f.attachPanel&&(a.style.backgroundColor=getComputedStyle(n.body).getPropertyValue("background-color")),"hid"===c&&(je(),Ef(a)),"fav"===c)lc(),Ff(a);f.animation&&(a.className="de-content de-cfg-open")}}function qa(a,b){for(var c=
b.length;c--;)(n.querySelector(b[c])||{}).disabled=!a}function oc(){qa(1===f.updThread,['input[info="updThrDelay"]','input[info="favIcoBlink"]','input[info="desktNotif"]']);qa(f.preLoadImgs,['input[info="findImgFile"]']);qa(f.openImgs,['input[info="openGIFs"]']);qa(f.linksNavig,['input[info="linksOver"]','input[info="linksOut"]','input[info="markViewed"]','input[info="strikeHidd"]','input[info="noNavigHidd"]']);qa(f.addYouTube&&4!==f.addYouTube,['select[info="YTubeType"]','input[info="YTubeHD"]']);
qa(f.addYouTube,['input[info="YTubeWidth"]','input[info="YTubeHeigh"]','input[info="YTubeTitles"]']);qa(2===f.ajaxReply,['input[info="postSameImg"]','input[info="removeEXIF"]','input[info="removeFName"]']);qa(f.addTextBtns,['input[info="txtBtnsLoc"]']);qa(f.updScript,['select[info="scrUpdIntrv"]'])}function z(a,b,c){var d=w("input",{info:a,type:"checkbox"},{click:function(){vb(this.getAttribute("info"));oc();c&&c(this)}});d.checked=f[a];return q("label",b?{"class":"de-block"}:l,[d,T(" "+ga[a][i])])}
function ia(a,b,c){return w("input",{info:a,type:"text",size:b,value:f[a]},{keyup:c?c:function(){Q(this.getAttribute("info"),this.value)}})}function da(a,b,c){for(var d=0,g=ga[a],e=g.q[i].length,p="";d<e;d++)p+='<option value="'+d+'">'+g.q[i][d]+"</option>";(c=S(P('<select info="'+a+'">'+p+"</select>"),{change:c?c:function(){Q(this.getAttribute("info"),this.selectedIndex);oc()}})).selectedIndex=f[a];return q("label",b?{"class":"de-block"}:l,[c,T(" "+g.s[i])])}function Pa(a){return q("div",{"class":e.t+
" de-cfg-tab-back",selected:o},[w("div",{"class":"de-cfg-tab",text:Jc[a][i],info:a},{click:function(){var a,c;c=this.parentNode;if("true"!==c.getAttribute("selected")){if(a=x("de-cfg-body",n))a.className="de-cfg-unvis",n.querySelector('.de-cfg-tab-back[selected="true"]').setAttribute("selected",o);c.setAttribute("selected",j);if(!(a=r("de-cfg-"+(c=this.getAttribute("info")))))L(r("de-cfg-bar"),a="posts"===c?Gf():"links"===c?Hf():"form"===c?If():"common"===c?Jf():Kf());a.className="de-cfg-body";"filters"===
c&&(D.update(),r("de-spell-edit").value=D.list);oc()}}})])}function pc(){var a=this.scrollTop,b=r("de-spell-rowmeter"),c=b.Mc||1,d="",g=19;if(c-g<a/12|1){for(;g--;)d+=c++ +"<br>";b.insertAdjacentHTML("beforeend",d);b.Mc=c}b.scrollTop=a}function Lf(){return q("div",{"class":"de-cfg-unvis",id:"de-cfg-filters"},[z("hideBySpell",o,qc),q("div",{id:"de-spell-panel"},[w("a",{text:Kc[i],href:"#","class":"de-abtn",onmouseout:"de_delSelection(event)"},{click:A,mouseover:Mf}),w("a",{text:Lc[i],href:"#","class":"de-abtn"},
{click:function(a){A(a);Q("hideBySpell",1);n.querySelector('input[info="hideBySpell"]').checked=j;qc()}}),w("a",{text:kb[i],href:"#","class":"de-abtn"},{click:function(a){A(a);r("de-spell-edit").value="";qc()}}),P('<a href="https://github.com/SthephanShinkufag/Dollchan-Extension-Tools/wiki/Spells-'+(i?"en":"ru")+'" class="de-abtn" target="_blank">'+Mc[i]+"</a>")]),q("div",{id:"de-spell-div"},[P('<div><div id="de-spell-rowmeter"></div></div>'),q("div",l,[w("textarea",{id:"de-spell-edit",wrap:"off"},
{keydown:pc,scroll:pc})])]),z("menuHiddBtn",j,l),z("hideRefPsts",j,l),z("delHiddPost",j,function(){F(V("de-post-hid",y),function(a){a=e.J(a);!a.classList.contains("de-hidden")?a.insertAdjacentHTML("afterend",'<span style="counter-increment: de-cnt 1;"></span>'):v(a.nextSibling);a.classList.toggle("de-hidden")});ha()})])}function Gf(){return q("div",{"class":"de-cfg-unvis",id:"de-cfg-posts"},[da("updThread",o,l),q("label",l,[ia("updThrDelay",4,l),T(ga.updThrDelay[i])]),q("div",{"class":"de-cfg-depend"},
[G(!k.r,z("favIcoBlink",j,l)),G(k.r,z("desktNotif",j,function(){f.desktNotif&&window.webkitNotifications.requestPermission()}))]),da("expandPosts",j,l),da("expandImgs",j,l),G(k.da,z("preLoadImgs",j,l)),G(k.da,q("div",{"class":"de-cfg-depend"},[z("findImgFile",j,l)])),q("div",l,[z("openImgs",o,l),T(" ("),z("openGIFs",o,l),T(")*")]),z("postBtnsTxt",j,l),z("imgSrcBtns",j,l),z("noSpoilers",j,ha),z("noPostNames",j,ha),z("noPostScrl",j,ha),q("div",l,[z("keybNavig",o,l),w("a",{text:"?",href:"#","class":"de-abtn"},
{click:function(a){A(a);I(Nc[i],"help-keybnavig",o)}})]),z("correctTime",j,Ba.dd),q("div",{"class":"de-cfg-depend"},[q("div",l,[ia("timeOffset",3,l),T(ga.timeOffset[i])]),q("div",l,[ia("timePattern",30,l),T(" "),w("a",{text:ga.timePattern[i],href:"#","class":"de-abtn"},{click:function(a){A(a);I('"s" - second (one digit),\n"i" - minute (one digit),\n"h" - hour (one digit),\n"d" - day (one digit),\n"w" - week (string)\n"n" - month (one digit),\n"m" - month (string),\n"y" - year (one digit),\n"-" - any symbol\n"+" - any symbol except digits\n"?" - previous char may not be\n\nExamples:\n0chan.ru: "w+yyyy+m+dd+hh+ii+ss"\niichan.ru, 2ch.so: "w+dd+m+yyyy+hh+ii+ss"\ndobrochan.ru: "dd+m+?+?+?+?+?+yyyy++w++hh+ii-?s?s?"\n410chan.org: "dd+nn+yyyy++w++hh+ii+ss"\n4chan.org: "nn+dd+yy+w+hh+ii-?s?s?"\n4chon.net: "nn+dd+yy++w++hh+ii+ss"\nkrautchan.net: "yyyy+nn+dd+hh+ii+ss+--?-?-?-?-?"',
"help-correcttime",o)}})])])])}function Hf(){return q("div",{"class":"de-cfg-unvis",id:"de-cfg-links"},[da("linksNavig",j,l),q("div",{"class":"de-cfg-depend"},[q("div",l,[ia("linksOver",6,function(){Q("linksOver",+this.value|0)}),T(ga.linksOver[i])]),q("div",l,[ia("linksOut",6,function(){Q("linksOut",+this.value|0)}),T(ga.linksOut[i])]),z("markViewed",j,l),z("strikeHidd",j,l),z("noNavigHidd",j,l)]),z("crossLinks",j,l),z("insertNum",j,l),z("addMP3",j,l),z("addImgs",j,l),da("addYouTube",j,l),q("div",
{"class":"de-cfg-depend"},[q("div",l,[da("YTubeType",o,l),ia("YTubeWidth",6,l),T("\u00d7"),ia("YTubeHeigh",6,l),T(" "),z("YTubeHD",o,l)]),G(!(k.i&&12>k.i),z("YTubeTitles",o,l))])])}function If(){return q("div",{"class":"de-cfg-unvis",id:"de-cfg-form"},[da("ajaxReply",j,l),G(k.da,q("div",{"class":"de-cfg-depend"},[z("postSameImg",j,l),z("removeEXIF",j,l),z("removeFName",j,l)])),G(h.form,da("addPostForm",j,l)),G(h.form,z("noThrdForm",j,function(){s||(r("de-parea").style.display=f.noThrdForm?"none":
"")})),z("favOnReply",j,l),G(h.Q,q("div",l,[z("addSageBtn",o,l),z("saveSage",o,l)])),G(h.gb,z("warnSubjTrip",o,l)),da("captchaLang",j,l),G(h.form,q("div",l,[da("addTextBtns",o,function(){Q("addTextBtns",this.selectedIndex);rc()}),z("txtBtnsLoc",o,rc)])),G(h.X,q("div",l,[ia("passwValue",20,we),T(ga.userPassw[i])])),G(h.name,q("div",l,[ia("nameValue",20,sc),z("userName",o,sc)])),G(h.f,q("div",l,[ia("signatValue",20,l),z("userSignat",o,l)])),q("div",l,[G(h.form||ba,T(Oc[i])),z("noBoardRule",o,ha),G(h.wa,
z("noGoto",o,function(){K(h.wa)})),G(h.X,z("noPassword",o,function(){K(h.X.parentNode.parentNode)}))])])}function Jf(){return q("div",{"class":"de-cfg-unvis",id:"de-cfg-common"},[G(k.ya,q("div",l,[T(ga.excludeList[i]),w("textarea",{value:Ha("DESU_Exclude")||"",rows:6,cols:50},{keyup:function(){fa("DESU_Exclude",this.value)}})])),da("scriptStyle",j,function(){Q("scriptStyle",this.selectedIndex);r("de-main").lang=qe()}),z("attachPanel",j,function(){pa("cfg",o);ha()}),z("panelCounter",j,ha),z("rePageTitle",
j,l),G(k.Ga,z("animation",j,l)),z("closePopups",j,l),G(!k.i,q("div",l,[z("updScript",j,l),q("div",{"class":"de-cfg-depend"},[da("scrUpdIntrv",j,l),Y(Pc[i],"",function(){var a=r("de-cfg-updresult");a.innerHTML='<span class="de-wait">'+Ub[i]+"</div>";xe(j,function(b){a.innerHTML=b})})]),w("div",{id:"de-cfg-updresult"},l)]))])}function Kf(){return q("div",{"class":"de-cfg-unvis",id:"de-cfg-info"},[P('<span style="width: 179px;"><b>'+Qc[i]+yb+"</b><br><br>"+Rc[i]+f.stats.view+"<br>"+Sc[i]+f.stats.op+
"<br>"+Tc[i]+f.stats.reply+"</span>"),P('<span style="padding-left: 7px; border-left: 1px solid grey;">'+qb.join("<br>")+"</span>"),P('<span><a href="//www.freedollchan.org/scripts/" target="_blank">Freedollchan</a>&nbsp;<a href="//github.com/SthephanShinkufag/Dollchan-Extension-Tools/wiki/'+(i?"home-en/":"")+'" target="_blank">Github</a></span>'),U(Y(Uc[i],Vb[i],function(){var a,b={};for(a in f)f[a]!==zb[a]&&"nameValue"!==a&&"passwValue"!==a&&"signatValue"!==a&&(b[a]=f[a]);I(Vb[i]+':<textarea readonly class="de-editor">'+
kc({version:yb,location:""+window.location,nav:k,cfg:b,spells:D.list.split("\n"),cSpells:Ha("DESU_CSpells_"+e.b),oSpells:sessionStorage["de-spells-"+B+s],perf:qb},"")+"</textarea>","help-debug",o)}),{style:"float: right;"})])}function tc(a,b,c){return Y(Vc[i],Wc[i],function(){I("","edit-"+a,o);xa(x("de-alert-msg",r("de-alert-edit-"+a)),[T(Xc[a][i]),w("textarea",{"class":"de-editor",value:kc(b,"")},l),Y(lb[i],Yc[i],function(){try{c(),window.location.reload()}catch(a){I(Zc[i],"err-invaliddata",o)}})])})}
function Df(a){a.appendChild(q("div",{"class":e.t},[w("div",{id:"de-cfg-head",text:"Dollchan Extension Tools"},l),q("div",{id:"de-cfg-bar"},[Pa("filters"),Pa("posts"),Pa("links"),Pa("form"),Pa("common"),Pa("info")]),Lf(),q("div",{id:"de-cfg-btns"},[da("language",o,function(){Q("language",i=this.selectedIndex);v(r("de-main"));v(r("de-css"));v(r("de-css-dynamic"));ye();pe();pa("cfg",o)}),q("div",{style:"float: right;"},[G(k.ya,Y($c[i],ad[i],function(){(Z.global&&!oa(Z.global)?Z.global:he())?(za(e.b,
l),window.location.reload()):I(bd[i],"err-noglobalcfg",o)})),G(k.ya,Y(lb[i],cd[i],function(){var a,c={},d=Z[e.b];for(a in d)d[a]!==zb[a]&&"stats"!==a&&(c[a]=d[a]);za("global",c);pa("cfg",j)})),tc("cfg",f,function(){za(e.b,JSON.parse(N("textarea",r("de-alert-edit-cfg")).value.trim().replace(/[\n\r\t]/g,"")))}),Y(dd[i],ed[i],function(){confirm(fd[i])&&(tb("DESU_Config"),tb("DESU_Favorites"),tb("DESU_Threads"),fa("DESU_Spells_"+e.b,'[1,85765385,"#wipe(samelines,samewords,longwords,numbers)"]'),window.location.reload())})]),
w("div",{style:"clear: both;"},l)])]));x("de-cfg-tab",a).click();r("de-spell-edit").setSelectionRange(0,0);pc()}function ze(a,b){return a.appendChild(q("div",{"class":"de-content-block"},[w("input",{type:"checkbox"},{click:function(){for(var a,b=this.checked,g=0,e=this.parentNode.querySelectorAll(".de-entry > div > input");a=e[g++];)a.checked=b}}),w("b",{text:b},l)]))}function Ef(a){var b,c,d,g,u,p,t,f=$[e.b];b=0;for(c=V("de-post-hid",y);d=c[b++];)d.p||((g=d.cloneNode(j)).removeAttribute("id"),g.style.display=
"",g.h=j,g.Tc=d,g.va=g.querySelector(".de-btn-hide, .de-btn-hide-user"),g.va.parentNode.className="de-ppanel",g.va.onmouseover=g.va.onmouseout=l,g.va.onclick=function(){var a=ca(this);ab(a,a.h=!a.h)},(t||(t=a.appendChild(P('<div class="de-content-block"><b>'+gd[i]+":</b></div>")))).appendChild(q("div",{"class":"de-entry"},[g])));t?xa(a,[Y(Wb[i],"",function(){F(this.parentNode.querySelectorAll(".de-entry > [de-post]"),function(a){ab(a,a.h=!a.h)});this.value=this.value===Xb[i]?Wb[i]:Xb[i]}),Y(lb[i],
"",function(){F(this.parentNode.querySelectorAll(".de-entry > [de-post]"),function(a){a.h||Qa(a.Tc,o)});Na()})]):a.appendChild(w("b",{text:hd[i]},l));xa(a,[n.createElement("hr"),w("b",{text:oa(f)?id[i]:jd[i]+":"},l)]);if(!oa(f))for(u in f)for(p in t=ze(a,"/"+u),f[u])t.insertAdjacentHTML("beforeend",'<div class="de-entry" info="'+u+";"+p+'"><div class="'+e.t+'"><input type="checkbox"><a href="'+e.O(u,p)+'" target="_blank">¹'+p+"</a> - "+f[u][p]+"</div></div>");xa(a,[n.createElement("hr"),tc("hidden",
$[e.b],function(){$[e.b]=JSON.parse(N("textarea",r("de-alert-edit-hidden")).value.trim().replace(/[\n\r\t]/g,""));fa("DESU_Threads",JSON.stringify($))}),Y(Yb[i],Zb[i],function(){F(this.parentNode.querySelectorAll(".de-entry[info]"),function(a){var b=a.getAttribute("info").split(";");N("input",a).checked&&(H[b[1]]?Qa(H[b[1]],o):(delete $[e.b][b[0]][b[1]],ke(b[0])))});le();Na()})])}function Ff(a){var b,c,d,g;for(b in E)for(c in E[b])for(d in g=ze(a,b+"/"+c),E[b][c])E[b][c][d].url||(E[b][c][d].url=sb(c)+
(/(?:^|\.)krautchan\.net$/.test(b)?"thread-":"res/")+d+(/(?:^|\.)(?:dobrochan\.(?:ru|org)|tenhou\.ru)$/.test(b)?".xhtml":/(?:^|\.)420chan\.org$/.test(b)?".php":/(?:^|\.)2chan\.net$/.test(b)?".htm":".html")),g.appendChild(q("div",{"class":"de-entry",info:b+";"+c+";"+d},[q("div",{"class":e.t},[P('<input type="checkbox">'),w("span",{"class":"de-btn-expthr"},{click:Nf}),P('<a href="//'+b+E[b][c][d].url+'">¹'+d+"</a>"),P('<span class="de-fav-title"> - '+E[b][c][d].txt+"</span>"),P('<span class="de-fav-inf-page"></span>'),
P('<span class="de-fav-inf-posts">[<span class="de-fav-inf-old">'+E[b][c][d].cnt+"</span>]</span>")])]));g||a.appendChild(w("b",{text:kd[i]},l));xa(a,[n.createElement("hr"),tc("favor",E,function(){E=JSON.parse(N("textarea",r("de-alert-edit-favor")).value.trim().replace(/\\\n|[\n\r\t]/g,""));fa("DESU_Favorites",JSON.stringify(E))}),Y(ld[i],md[i],function(){F(V("de-entry",n),function(a){var b,c=a.getAttribute("info").split(";"),d=E[c[0]][c[1]][c[2]];c[0]===e.host&&(b=U(x("de-fav-inf-posts",a).firstElementChild,
{"class":"de-wait",text:""}),Da(l,c[1],c[2],j,function(a,c,g){a=g?g:a.length+1;b.textContent=a;!g&&a>d.wb?(b.className="de-fav-inf-new",d.wb=a,fa("DESU_Favorites",JSON.stringify(E))):b.className="de-fav-inf-old";b=d=l}))})}),Y($b[i],nd[i],function(){var a=6,b=0;for(I(ua[i],"load-pages",j);a--;)uc(n.createElement("div"),a,function(a,c){for(var d,g,u=0,f=V("de-entry",n);g=f[u++];)d=g.getAttribute("info").split(";"),d[0]===e.host&&d[1]===B&&(g=x("de-fav-inf-page",g),RegExp("(?:¹|No.|>)\\s*"+d[2]+
"\\s*<").test(a.innerHTML)?g.innerHTML="@"+c:5===b&&!g.textContent.contains("@")&&(g.innerHTML="@?"));5===b&&ja(r("de-alert-load-pages"));b++})}),Y(kb[i],od[i],function(){F(V("de-entry",n),function(a){var b=a.getAttribute("info").split(";");k.i&&b[0]!==e.host||Da("//"+b[0]+E[b[0]][b[1]][b[2]].url,l,l,o,function(a,c,d){d&&(mc(b[0],b[1],b[2]),wb(JSON.stringify(E)));b=l})})}),Y(Yb[i],Zb[i],function(){F(V("de-entry",n),function(a){var b=a.getAttribute("info").split(";");N("input",a).checked&&mc(b[0],
b[1],b[2])});wb(JSON.stringify(E))})])}function ja(a){a&&(a.vb=l,f.animation?(k.$(a,v),a.classList.add("de-close")):v(a))}function I(a,b,c){var d=r("de-alert-"+b),g="de-alert-msg"+(c?" de-wait":""),u=c?"":"\u00d7 ";d?(U(N("div",d),{"class":g}).innerHTML=a.trim(),N("span",d).textContent=u,clearTimeout(d.vb),f.animation&&(k.$(d,function(a){a.classList.remove("de-blink")}),d.classList.add("de-blink"))):(d=r("de-alert").appendChild(q("div",{"class":e.t,id:"de-alert-"+b},[w("span",{"class":"de-alert-btn",
text:u},{click:function(){ja(this.parentNode)}}),P('<div class="'+g+'">'+a.trim()+"</div>")])),f.animation&&(k.$(d,function(a){a.classList.remove("de-open")}),d.classList.add("de-open")));f.closePopups&&!c&&!b.contains("help")&&(d.vb=setTimeout(ja,4E3,d))}function Ra(a,b,c){var d,g=ca(a),u=na(a),p=g&&g.classList.contains("de-pview")?na(g):{top:0,left:0};f.attachPanel&&b?(d="fixed",b="de-btn-refresh"===a.id||"de-btn-audio-off"===a.id?"bottom: 25":"top: "+(a.getBoundingClientRect().top+a.offsetHeight-
(k.c?0.5:0))):(d="absolute",b="top: "+(u.top-p.top+a.offsetHeight-(k.c?0.5:0)));(g||n.body).insertAdjacentHTML("beforeend",'<div class="'+e.t+'" id="de-menu" style="position: '+d+"; "+("de-btn-src"===a.className?"left: "+(u.left-p.left):"right: "+(n.documentElement.clientWidth-na(a).left-a.offsetWidth))+"px; "+b+'px;" onmouseout="de_delSelection(event)">'+c+"</div>");return c?r("de-menu").querySelectorAll("span"):(g||n.body).lastChild}function Mf(a){F(Ra(a.target,j,'<div style="display: inline-block; border-right: 1px solid grey;"><span>'+
"#words,#exp,#exph,#imgn,#ihash,#subj,#name,#trip,#img".split(",").join("</span><span>")+'</span></div><div style="display: inline-block;"><span>'+"#sage,#op,#tlen,#all,#video,#num,#wipe,#rep,#outrep".split(",").join("</span><span>")+"</span></div>"),function(a){a.onclick=function(){var a=this.textContent;Xa(r("de-spell-edit"),a+(s&&"#op"!==a&&"#rep"!==a&&"#outrep"!==a?"["+B+","+s+"]":"")+(D.Kc(a.substr(1))?"(":""))}})}function Of(a){if(f.menuHiddBtn){var b,c=Ra(a.I.firstChild,o,""),d=function(a,
b){var d=P("<span>"+pd[a][i]+"</span>");d.onclick=b;c.appendChild(d)};!a.h&&(Sa=gc().trim())&&d("sel",function(){Ia("#words","("+Sa+")")});(b=x("postertrip",a))&&d("trip",function(){Ia("#trip","("+b.textContent.replace(/\)/g,"\\)")+")")});a.P[0]?(d("img",function(){Ia("#img","(="+fe(a)+"@"+jc(a).join("x")+")")}),d("ihash",function(){Ia("#ihash","("+Ae(a)+")")})):d("noimg",function(){Ia("(#all"," & !#img)")});ya(a)?d("text",function(){Pf(a)}):d("notext",function(){Ia("(#all"," & !#tlen)")});c=l}}function Qf(a){F(Ra(x("de-btn-expthr",
a.I),o,"<span>"+qd[i].join("</span><span>")+"</span>"),function(b){b.onclick=function(){bb(a,parseInt(this.textContent,10),l)}})}function Bf(){F(Ra(r("de-btn-refresh"),j,"<span>"+rd[i].join("</span><span>")+"</span>"),function(a){a.onclick=function(){var a=Ea.indexOf.call(this.parentNode.children,this);0===a?Be(Aa):Rf(a+1)}})}function Cf(){"de-btn-audio-off"===this.id&&F(Ra(r("de-btn-audio-off"),j,"<span>"+sd[i].join("</span><span>")+"</span>"),function(a){a.onclick=function(){var a=Ea.indexOf.call(this.parentNode.children,
this);Ua=0===a?3E4:1===a?6E4:2===a?12E4:3E5;ue();r("de-btn-audio-off").id="de-btn-audio-on";v(this.parentNode)}})}function Sf(a){var b=a.nextSibling.href+'" target="_blank">'+td[i],c=n.body.getAttribute("de-image-search"),d="";c&&(c=c.split(";"),c.forEach(function(a){a=a.split(",");d+='<a class="de-src'+a[0]+(!a[1]?'" onclick="de_cImgSearch(event, \''+a[0]+'\')" de-url="':'" href="'+a[1])+b+a[0]+"</a>"}));Ra(a,o,'<a class="de-src-iqdb" href="//iqdb.org/?url='+b+'IQDB</a><a class="de-src-tineye" href="//tineye.com/search/?url='+
b+'TinEye</a><a class="de-src-google" href="//google.ru/searchbyimage?image_url='+b+'Google</a><a class="de-src-saucenao" href="//saucenao.com/search.php?url='+b+"SauceNAO</a>"+d);d=l}function Tf(){function a(){try{d=c(C,0>=d?0:d-1,-1,j,o),p=j}catch(a){}}function b(){if(d!==C.length-1)try{d=c(C,d+1,1,C[d+1].p||C[d+1].getBoundingClientRect().top>window.innerHeight/2-C[d+1].clientHeight/2,o),p=j}catch(a){}}function c(a,b,c,d,g){for(var e=a[b],u=b;e.h||e.L.h;)if(e=a[u+=c],!e)return b;if(u!==b||d)window.scrollTo(0,
g?na(e).top:na(e).top-window.innerHeight/2+e.clientHeight/2);(b=x("de-selected",n))&&b.classList.remove("de-selected");e.p&&(e=e.L);e.classList.add("de-selected");return u}var d,g=0,u=o,p=j,t=j;window.onscroll=function(){u?u=o:t=p=j};n.addEventListener("keydown",function(f){var i=f.target.tagName,h=f.keyCode;if("TEXTAREA"===i||"INPUT"===i&&"text"===f.target.type)27===h&&f.target.blur();else if(f.ctrlKey)37===h?window.location.pathname=e.oa(B,s||0===Aa?0:Aa-1):!s&&39===h&&(window.location.pathname=
e.oa(B,Aa+1));else if(!f.altKey&&!(f.shiftKey||74!==h&&75!==h&&77!==h&&78!==h&&86!==h&&116!==h))if(116===h)s||(A(f),Be(Aa));else{A(f);f.stopPropagation();if(t){if(p)a:{for(var f=C,i=0,n=window.pageYOffset;i<f.length;i++)if(na(f[i]).top>n){f=i-1;break a}f=ka}else f=C.indexOf(ra[g]);d=f}if(!s&&p)if((C[d]||{}).p)g=i=ra.indexOf(C[d]);else if(t){for(i=0>=d?0:d;0<i&&!C[i].p;i--);g=i=ra.indexOf(C[i])}else i=g;else i=g;p=t=o;if(86===h)s?vc(C[d]):k.c?GM_openInTab("//"+e.host+e.O(B,ra[i].a),o,j):window.open("//"+
e.host+e.O(B,ra[i].a),"_blank");else if(u=j,75===h)if(s)a();else try{g=c(ra,0>=g?0:g-1,-1,j,j),t=j}catch(r){}else if(74===h)if(s)b();else{if(g!==ra.length-1)try{g=c(ra,g+1,1,j,j),t=j}catch(w){}}else!s&&77===h?a():!s&&78===h&&b()}},j)}function Ce(a,b){if(e.C||e.Ea)return a.replace(/\?[^?]+$|$/,(e.ia?"?board="+B+"&":"?")+Math.random());0<b&&(a=a.replace(/mainpage|res\d+/ig,"res"+b));return a.replace(/dummy=[\d\.]*/,"dummy="+Math.random())}function cb(a){var b=h.T?r("recaptcha_image")||h.T:N("img",h.V(h.j));
e.g||h.T?(a=n.createEvent("MouseEvents"),a.initEvent("click",j,j),b.dispatchEvent(a)):(a=Ce(b.getAttribute("src"),a),b.src="",b.src=a)}function De(){var a=f.sageReply;r("de-sagebtn").innerHTML="&nbsp;"+(a?'<span class="de-btn-sage"></span><b style="color: red;">SAGE</b>':"<i>(no&nbsp;sage)</i>");"text"===h.Q.type?h.Q.value=a?"sage":e.d?"noko":"":h.Q.checked=a}function sc(){var a=n.querySelector('input[info="nameValue"]');a&&Q("nameValue",a.value);h.name.value=f.userName?f.nameValue:""}function we(){var a=
n.querySelector('input[info="passwValue"]');a&&Q("passwValue",a.value);(h.Bc||{}).value=h.X.value=f.passwValue}function Uf(){function a(){dc(n.body,{mousemove:b,mouseup:a});Q("textaWidth",parseInt(h.f.style.width,10));Q("textaHeight",parseInt(h.f.style.height,10))}function b(a){var b=na(h.f);h.f.style.width=a.pageX-b.left+"px";h.f.style.height=a.pageY-b.top+"px"}L(h.f,w("div",{id:"de-txt-resizer"},{mousedown:function(c){A(c);S(n.body,{mousemove:b,mouseup:a})}}))}function wc(a){F(a.querySelectorAll('input[type="file"]'),
function(a){S(a,{change:Ee})})}function Fe(a){F(a.querySelectorAll(".de-file-util"),v);F(a.querySelectorAll('input[type="file"]'),function(a){a.ca=l})}function Ee(){this.Ec?this.ca&&(this.ca=l,v(this.nextSibling)):(this.Ec=j,L(this,w("button",{"class":"de-file-util de-file-del",text:kb[i],type:"button"},{click:function(a){A(a);a=this.parentNode;Fe(a);S(h.file=nb('input[type="file"]',ce(a,a.innerHTML)),{change:Ee})}})));v(x("de-file-rar",this.parentNode));wc(h.V(this));k.da&&/^image\/(?:png|jpeg)$/.test(this.files[0].type)&&
L(this,w("button",{"class":"de-file-util de-file-rar",text:wd[i],title:xd[i],type:"button"},{click:function(a){A(a);var a=r("de-file-rar")||n.body.appendChild(w("input",{id:"de-file-rar",type:"file",style:"display: none;"},l)),b=this.parentNode.querySelector('input[type="file"]'),c=this;a.onchange=function(){v(c);var a=this.files[0],g=new FileReader;b.insertAdjacentHTML("afterend",'<span class="de-file-util" style="margin: 0 5px;"><span class="de-wait"></span>'+yd[i]+"</span>");g.onload=function(a,
c,d){if(a.nextSibling===c){U(c,{style:"font-weight: bold; margin: 0 5px; cursor: default;",title:b.files[0].name+" + "+this.name,text:b.files[0].name.replace(/^.+\./,"")+" + "+this.name.replace(/^.+\./,"")});b.ca=d.target.result}}.bind(a,b,b.nextSibling);g.readAsArrayBuffer(a);c=b=l};a.click()}}))}function Ge(){var a,b;h.T?(U(h.sa,{onclick:"Recaptcha.focus_response_field = function() {}"}),(a=r("recaptcha_image"))&&U(a,{onclick:"Recaptcha.reload()",style:"width: 300px; cursor: pointer;"})):e.N&&He();
if(h.j&&(e.N&&setTimeout(function(){cb(0);h.j.onclick=l},50),h.j.autocomplete="off",h.j.onfocus=l,h.j.onkeypress=function(){return function(a){if(f.captchaLang&&a.which!==0){var b,g=a.charCode||a.keyCode,e=String.fromCharCode(g).toLowerCase();if(f.captchaLang===1){if(g<1040||g>1279||(b="éöóêåíãøùçõúôûâàïðîëäæýÿ÷ñìèòüáþ¸".indexOf(e))===
-1)return;e="qwertyuiop[]asdfghjkl;'zxcvbnm,.`"[b]}else{if(g<33||g>122||(b="qwertyuiop[]asdfghjkl;'zxcvbnm,.`".indexOf(e))===-1)return;e="éöóêåíãøùçõúôûâàïðîëäæýÿ÷ñìèòüáþ¸"[b]}A(a);Xa(a.target,e)}}}(),!e.g&&!h.T)){a=nb("a, img",h.V(h.j));b=w("img",{alt:ua[i],title:zd[i],style:"display: block; border: none; cursor: pointer;"},{click:function(){cb(s||
0)}});if(a)a.parentNode.replaceChild(b,a);else{for(;h.j.nextSibling;)v(h.j.nextSibling);L(h.j,b)}setTimeout(function(b){b.src=Ce(e.ia?"/faptcha.php?board="+B:e.Ib?"/securimage/securimage_show.php?"+Math.random():e.C?"/"+B.substr(0,B.indexOf("/")+1)+"captcha.php?"+Math.random():a?a.src:"/"+B+"/captcha.pl?key=mainpage&amp;dummy="+Math.random(),s||0)},50,b)}}function He(){var a=r("captcha_div");(k.c?unsafeWindow:window).cc||n.head.appendChild(w("script",{type:"text/javascript",src:"http://www.google.com/recaptcha/api/js/recaptcha_ajax.js"},
l));a.innerHTML="";a.appendChild(w("a",{href:"#",text:Ad[i]},{click:function(a){A(a);this.parentNode.innerHTML="";(k.c?unsafeWindow:window).cc.create("6LdOEMMSAAAAAIGhmYodlkflEb2C-xgPjyATLnxx","captcha_div",{theme:"red"});var c=setInterval(function(){var a=r("recaptcha_response_field");a&&(h.j=h.T=a,Ge(),clearInterval(c),c=l)},500)}}))}function Ie(a,b,c){h.form.style.display="inline-block";h.form.style.textAlign="left";k.c?S(h.f,{mouseup:function(){Q("textaWidth",parseInt(this.style.width,10));Q("textaHeight",
parseInt(this.style.height,10))}}):Uf();rc();h.f.style.cssText="padding: 0; width: "+f.textaWidth+"px; height: "+f.textaHeight+"px;";S(h.f,{keypress:function(a){var b=a.charCode||a.keyCode;if((33===b||34===b)&&0===a.which)a.target.blur(),window.focus()}});S(h.sa,{click:function(a){var b=h.f.value,c=f.signatValue;if(f.warnSubjTrip&&h.gb&&/#.|##./.test(h.gb.value))A(a),I(Bd[i],"upload",o);else{D.Gb&&(b=D.Qc(b));f.userSignat&&c&&(b+="\n"+c);if(h.w&&"Dollchan Extension Tools"===(x("filetitle",H[h.w])||
{}).textContent&&!/`\-{50}`$/.test(b))b+="\n\n`--------------------------------------------------`\n`"+window.navigator.userAgent+"`\n`v"+yb+"`\n`--------------------------------------------------`";h.f.value=b;f.ajaxReply&&I(Ub[i],"upload",j);f.favOnReply&&h.w&&ne(H[h.w],x("de-btn-fav",H[h.w].I));if(h.ta&&(b=h.ta.value)&&(b=b.match(db())))h.ta.value=e.W?b[1]:"http://www.youtube.com/watch?v="+b[1];h.K&&(K(r("de-qarea")),L(r("de-togglereply"),r("de-pform")))}}});F(h.form.querySelectorAll('input[type="text"], input[type="file"]'),
function(a){a.size=30});f.noGoto&&h.wa&&K(h.wa);f.noPassword&&h.X&&K(h.V(h.X));S(window,{load:function(){f.userName&&h.name&&setTimeout(sc,1E3);h.X&&setTimeout(we,1E3)}});Ge();f.addSageBtn&&h.Q&&(a=w("span",{id:"de-sagebtn"},{click:function(a){a.stopPropagation();A(a);vb("sageReply");De()}}),c=X("ancestor::label",h.Q)||h.Q,c.nextElementSibling||c.previousElementSibling?(K(c),L(c,a)):(K(h.V(h.Q)),L(h.name||h.sa,a)),setTimeout(De,0));if(2===f.ajaxReply){if(h.form.onsubmit=function(a){A(a);Je(h.form,
h.sa,Ke)},y.onsubmit=A,a=y.querySelector(e.Vc))a.onclick=function(a){A(a);Ja();I(ac[i],"deleting",j);Je(y,this,Le)}}else 1===f.ajaxReply&&(r("de-main").insertAdjacentHTML("beforeend",'<iframe id="de-iframe-pform" name="de-iframe-pform" src="about:blank"></iframe><iframe id="de-iframe-dform" name="de-iframe-dform" src="about:blank"></iframe>'),U(h.form,{target:"de-iframe-pform"}).onsubmit=l,U(y,{target:"de-iframe-dform"}).onsubmit=function(){Ja();I(ac[i],"deleting",j)});h.file&&wc(h.V(h.file))}function Me(a,
b){var c,d,g,u="",p=a.querySelector(e.Aa);if(a.body.hasChildNodes()&&!p){c=0;for(d=a.querySelectorAll(e.Wc);g=d[c++];)u+=g.innerHTML+"\n";if(!(u=u.replace(/<a [^>]+>Íàçàä.+|<br.+/,"")))u=mb[i]+"\n"+a.body.innerHTML;u=/successful|uploaded|updating|îáíîâë|óäàëåí[î\.]/i.test(u)?"":u.replace(/"/g,"'")}return[b?window.location:p?e.O(B,e.Fb(p)):"",u]}function Ne(){ja(r("de-alert-upload"));s&&pb(C[C.length-1])}function Ke(a){var b;
(b=a[1])?(h.K&&(K(a=r("de-qarea")),a.appendChild(r("de-pform"))),h.j&&/captch|êàï÷|ïîäòâåð/i.test(b)&&(h.j.value="",h.j.focus(),cb(h.w)),I(b,"upload",o)):(h.f.value="",h.file&&(Fe(b=h.V(h.file)),h.file=nb('input[type="file"]',b=ce(b,b.innerHTML)),wc(b)),h.ta&&(h.ta.value=""),f.stats[h.w?"reply":"op"]++,za(e.b,f),h.w)?(Ja(),s?Ab(Ne):bb(H[h.w],5,Ne),h.j&&(h.j.value="",cb(h.w),e.N&&GM_xmlhttpRequest({method:"GET",url:"/makaba/captcha?usercode="+
(ge("usercode")||""),onload:function(a){a=a.responseText;if(a.contains("OK")||a.contains("VIP")){h.j=h.T=l;He()}}}))):window.location=a[0]}function Oe(){var a=r("de-alert-deleting");a&&(ja(a),I(Cd[i],"deleted",o))}function Le(a){if(a[1])I(Dd[i]+a[1],"deleting",o);else{for(var b,c=[],d=0,g=y.querySelectorAll("[de-post] input:checked");a=g[d++];)s?-1===c.indexOf(b=ca(a).L.a)&&c.push(b):a.checked=o;s?Ab(Oe):c.forEach(function(a){bb(H[a],5,Oe)})}}function Je(a,b,c){R={Ta:"---------------------------"+
Math.round(1E11*Math.random()),data:[],Ua:0,error:o,url:a.action,Wa:c};F(a.querySelectorAll('input:not([type="submit"]):not([type="button"]), textarea, select'),Pe);Pe(b);Qe()}function Pe(a){var b,c,d,g;g="--"+R.Ta+'\r\nContent-Disposition: form-data; name="'+a.name+'"';"file"===a.type&&0<a.files.length?(b=a.files[0],c=b.name,R.data.push(g+'; filename="'+(!f.removeFName?c:" "+c.substring(c.lastIndexOf(".")))+'"\r\nContent-type: '+b.type+"\r\n\r\n",l,"\r\n"),d=R.data.length-2,/^image\/(?:png|jpeg)$/.test(b.type)?
(g=new FileReader,g.onload=function(b){(b=Vf(new Uint8Array(b.target.result),!!a.ca))?(a.ca&&b.push(a.ca),f.postSameImg&&b.push(""+Math.round(1E6*Math.random())),R.data[d]=new Blob(b),R.Ua--,Qe()):(R.error=j,I(Ed[i]+c,"upload",o))},g.readAsArrayBuffer(b),R.Ua++):R.data[d]=b):("checkbox"!==a.type||a.checked)&&R.data.push(g+"\r\n\r\n"+a.value+"\r\n")}function Qe(){if(!R.error&&!R.Ua){var a={"Content-type":"multipart/form-data; boundary="+R.Ta};k.c&&(a.Referer=""+n.location);R.data.push("--"+R.Ta+"--\r\n");
GM_xmlhttpRequest({method:"POST",headers:a,data:new Blob(R.data),url:k.Va(R.url),onreadystatechange:function(a){4===a.readyState&&(200===a.status?R.Wa(Me(k.$b(a.responseText),o)):I(0===a.status?va[i]:"HTTP ["+a.status+"] "+a.statusText,"upload",o),R=l)}})}}function Vf(a,b){var c,d,g,e,p,t,Ca,i=!!f.removeEXIF;if(!f.postSameImg&&!i&&!b)return[a];if(255===a[0]&&216===a[1]){d=2;g=0;p=1;e=a.length-1;Ca=[2];for(t=l;d<e;){if(255===a[d]){if(i){if(!t&&1===p)if(225===a[d+1]&&69===a[d+4])a:{var h=d+10;c=(a[d+
2]<<8)+a[d+3];var k=t=ka,n=ka,r=ka,s=ka,w=0,v=0,x=0,q="MM"!==String.fromCharCode(a[h],a[h+1]),h=new DataView(a.buffer,h);if(42!==h.getUint16(2,q))t=l;else if(t=h.getUint32(4,q),t>c)t=l;else{s=h.getUint16(t,q);for(k=0;k<s;k++)if(r=h.getUint16(n=t+2+12*k,q),!(282!==r&&283!==r&&296!==r))if(296===r)x=h.getUint16(n+8,q)-1;else{n=h.getUint32(n+8,q);if(n>c){t=l;break a}282===r?w=Math.round(h.getUint32(n,q)/h.getUint32(n+4,q)):v=Math.round(h.getUint32(n,q)/h.getUint32(n+4,q))}w=w||v;v=v||w;t=[x,w>>8,w&255,
v>>8,v&255]}}else 224===a[d+1]&&70===a[d+7]&&(t=[a[d+11],a[d+12],a[d+13],a[d+14]]);if(14===a[d+1]>>4||254===a[d+1]){c=2+(a[d+2]<<8)+a[d+3];g+=c;Ca.push(d,d+=c);continue}}if(216===a[d+1])p++;else if(217===a[d+1]&&0===--p)break}d++}d+=2;!b&&75<e-d&&(d=e);if(0===g)return d===e?[a]:[new Uint8Array(a,d)];Ca.push(d);p=new Uint8Array(d-g+18);p.set([255,216,255,224,0,16,74,70,73,70,0,1,1].concat(t||[0,0,1,0,1]),0);d=0;g=20;for(e=Ca.length;d<e;d+=2)p.set(a.subarray(Ca[d],Ca[d+1]),g),g+=Ca[d+1]-Ca[d];return[p]}if(137===
a[0]&&80===a[1]){d=0;for(e=a.length-7;d<e&&(73!==a[d]||69!==a[d+1]||78!==a[d+2]||68!==a[d+3]);d++);d+=8;return d===e||!b&&75<e-d?[a]:[new Uint8Array(a,d)]}return l}function vc(a){var b=a.L.a,c=r("de-qarea");h.w=b;if(h.K){if(e.J(a).nextElementSibling===c){K(c);Ja();return}}else h.K=j,c.appendChild(r("de-pform")),K(r("de-togglereply")),!s&&!e.C&&!e.g&&(v(h.form.querySelector('#thr_id, input[name="parent"]')),h.form.insertAdjacentHTML("afterbegin",'<input type="hidden" id="thr_id" value="'+b+'" name="'+
(e.d||e.k?"resto":e.o?"thread":"parent")+'">'),ba&&(v(ba.querySelector('input[name="oek_parent"]')),ba.insertAdjacentHTML("afterbegin",'<input type="hidden" value="'+b+'" name="oek_parent">')));L(e.J(a),c);c.style.display="";s||(Re(b),f.noThrdForm&&(r("de-parea").style.display="none"));h.j&&!h.T&&!e.C&&cb(b);e.n&&"Comment"===h.f.value&&(h.f.value="");Xa(h.f,">>"+a.a+(Sa||"").replace(/(?:^|\n)(.)/gm,"\n> $1")+"\n");3===f.addPostForm&&U(N("a",r("de-qarea-target")),{href:e.O(B,b),text:"#"+b})}function Ja(){if(h.K){var a=
r("de-togglereply"),b=r("de-qarea");h.K=o;s||(Re(0),v(r("thr_id")));K(a);b.style.display="none";L(r("de-parea"),b);L(a,r("de-pform"))}}function Re(a){h.form.querySelector('#thr_id, input[name*="thread"]').value=a;ba&&(ba.querySelector('input[name="oek_parent"], input[name="replyto"]').value=a);e.ab&&(h.form.querySelector('input[name="quickreply"]').value=a||"")}function re(a){var b=r("de-parea");A(a);h.K?(b.style.display="",Ja()):K(b);pb(b)}function Wf(a){/Reply|Îòâåò/.test(a.target.textContent)||
((a.stopPropagation(),A(a),!s&&f.noThrdForm&&!h.K&&(r("de-parea").style.display=""),a=ca(a.target).a,s&&1<f.addPostForm&&!h.K)?vc(H[a]):(e.n&&"Comment"===h.f.value&&(h.f.value=""),Xa(h.f,">>"+a)))}function rc(){if(h.f){var a=e.C||e.e||e.n||e.D||e.N,b={bold:[e.n?"**":a?"b":"**","B"],italic:[e.n?"*":a?"i":"*","i"],under:[a?"u":"__","U"],strike:[e.D?"-":a?"s":e.ia?"^^":"","S"],spoil:[e.D?"s":e.n?"%":a||e.d?"spoiler":"%%","%"],code:[e.D?"c":e.e?"aa":e.n?"pre":a?"code":"`","C"],quote:[,"&gt;"]},c=function(d){var g=
h.f,u=r("de-btn-"+d),p=b[d][1];u||(u=w("span",{id:"de-btn-"+d,title:Fd[d][i]},l),"&gt;"!==p?u.onclick=function(c){var d,u,p=g.selectionStart,f=g.selectionEnd,h=g.scrollTop,i=g.value.substring(p,f).split("\n"),k=i.length;d=b[this.id.substring(7)][0];A(c);a||e.d&&"spoiler"===d?(c="["+d+"]",d="[/"+d+"]"):c=d;for(;k--;){if(!c)for(u=i[k].trim().length;u--;)d+="^H";u=f+c.length+d.length;i[k].match(/^\s+/)&&(c=i[k].match(/^\s+/)[0]+c);i[k].match(/\s+$/)&&(d+=i[k].match(/\s+$/)[0]);i[k]=c+i[k].trim()+d}g.value=
g.value.substr(0,p)+i.join("\n")+g.value.substr(f);g.setSelectionRange(u,u);g.focus();g.scrollTop=h}:(u.onmouseover=function(){Sa=gc()},u.onclick=function(a){var b=g.selectionStart,c=g.selectionEnd;A(a);Xa(g,"> "+(b===c?Sa:g.value.substring(b,c)).replace(/\n/gm,"\n> "))}),r("de-txt-panel").appendChild(u));u.innerHTML=2===f.addTextBtns?("B"===p?"[ ":"")+'<a href="#">'+p+"</a>"+("&gt;"!==p?" / ":" ]"):3===f.addTextBtns?'<input type="button" value="'+p+'" style="font-weight: bold;">':"";return c};L(f.txtBtnsLoc?
r("de-txt-resizer")||h.f:e.n?x("popup",h.form):h.sa,U(r("de-txt-panel")||w("span",{id:"de-txt-panel"},l),{lang:!f.addTextBtns?"en":!f.txtBtnsLoc?"ru":""}));c("bold")("italic");e.n||c("under")("strike");c("spoil")("code")("quote")}}function xc(a){var b,c=a.querySelector(e.Sb),d='<span class="de-ppanel '+(a.p?"":"de-ppanel-cnt")+'" info="'+a.a+'"><span class="de-btn-hide" onclick="de_hideClick(this)" onmouseover="de_hideOver(this)" onmouseout="de_btnOut(event)"></span>'+(h.Uc||ba?'<span class="de-btn-rep" onclick="de_qReplyClick(this)" onmouseover="de_qReplyOver(this)"></span>':
"");a.p&&(s||(d+='<span class="de-btn-expthr" onclick="de_expandClick(this)" onmouseover="de_expandOver(this)" onmouseout="de_btnOut(event)"></span>'),b=e.host,E[b]&&E[b][B]&&E[b][B][a.a]?(d+='<span class="de-btn-fav-sel" onclick="de_favorClick(this)"></span>',E[b][B][a.a].wb=a.L.R):d+='<span class="de-btn-fav" onclick="de_favorClick(this)"></span>');c.insertAdjacentHTML("afterend",d+(a.Xb?'<span class="de-btn-sage" title="SAGE" onclick="de_sageClick(this)"></span>':"")+"</span>");a.Ob=c;a.I=c.nextSibling;
h.form&&f.insertNum&&((e.W||s&&(e.C||e.Ea))&&F(c.getElementsByTagName("a"),function(a){a.onclick=l}),e.B||(c.onclick=Wf))}function Xf(){ob('function de_removeSel() {\t\t\tvar el = document.getElementById("de-menu");\t\t\tif(el) {\t\t\t\tel.parentNode.removeChild(el);\t\t\t}\t\t}\t\tfunction de_delSelection(e) {\t\t\tif(e.relatedTarget && !document.evaluate("ancestor-or-self::div[@id=\'de-menu\']", e.relatedTarget, null, 3, null).booleanValue) {\t\t\t\tde_removeSel();\t\t\t}\t\t}\t\tfunction de_btnOut(e) {\t\t\tclearTimeout(e.target.de_overDelay);\t\t\tde_delSelection(e);\t\t}\t\tfunction de_btnOver(el, data) {\t\t\tel.de_overDelay = setTimeout(window.postMessage.bind(window), '+
f.linksOver+', data, "*");\t\t}\t\tfunction de_hideOver(el) {\t\t\tde_btnOver(el, "A" + el.parentNode.getAttribute("info"));\t\t}\t\tfunction de_imgSOver(el) {\t\t\tde_btnOver(el, "L" + el.getAttribute("de-id"));\t\t}\t\tfunction de_expandOver(el) {\t\t\tde_btnOver(el, "B" + el.parentNode.getAttribute("info"));\t\t}\t\tfunction de_hideClick(el) {\t\t\twindow.postMessage("D" + el.parentNode.getAttribute("info"), "*");\t\t}\t\tfunction de_qReplyClick(el) {\t\t\twindow.postMessage("F" + el.parentNode.getAttribute("info"), "*");\t\t}\t\tfunction de_qReplyOver(el) {\t\t\twindow.postMessage("C" + el.parentNode.getAttribute("info"), "*");\t\t}\t\tfunction de_expandClick(el) {\t\t\twindow.postMessage("E" + el.parentNode.getAttribute("info"), "*");\t\t}\t\tfunction de_favorClick(el) {\t\t\twindow.postMessage("G" + el.parentNode.getAttribute("info"), "*");\t\t}\t\tfunction de_sageClick(el) {\t\t\twindow.postMessage("H" + el.parentNode.getAttribute("info"), "*");\t\t}\t\tfunction de_cImgSearch(e, name) {\t\t\te.preventDefault();\t\t\twindow.postMessage("_" + name + ";" + e.target.getAttribute("de-url"), "*");\t\t\tde_removeSel();\t\t}');
S(window,{message:function(a){var b=a.data.substring(1);switch(a.data[0]){case "A":Of(H[+b]);break;case "B":Qf(H[+b]);break;case "C":Sa=gc();break;case "D":a=H[+b];Qa(a,!a.h);Na();break;case "E":bb(H[+b],1,l);break;case "F":vc(H[+b]);break;case "G":a=H[+b];ne(a,x("de-btn-fav",a)||x("de-btn-fav-sel",a));break;case "H":Ia("#sage","");break;case "I":v(r("de-fav-wait"));r("de-iframe-fav").style.height=b+"px";break;case "J":a=b.split("$#$");"de-iframe-pform"===a[0]?Ke([a[1],a[2]]):Le([a[1],a[2]]);r(a[0]).src=
"about:blank";break;case "L":Sf(y.querySelector('.de-btn-src[de-id="'+b+'"]'))}}})}function Yf(a){var b,c,d=a.length;if(255===a[0]&&216===a[1])for(c=b=0;b<d-1;b++){if(255===a[b])if(216===a[b+1])c++;else if(217===a[b+1]&&0===--c){b+=2;break}}else if(137===a[0]&&80===a[1])for(b=0;b<d-7;b++){if(73===a[b]&&69===a[b+1]&&78===a[b+2]&&68===a[b+3]){b+=8;break}}else return o;if(b!==d&&60<d-b)for(d=b+50;b<d;b++){if(55===a[b]&&122===a[b+1]&&188===a[b+2])return[b,0];if(80===a[b]&&75===a[b+1]&&3===a[b+2])return[b,
1];if(82===a[b]&&97===a[b+1]&&114===a[b+2])return[b,2];if(79===a[b]&&103===a[b+1]&&103===a[b+2])return[b,3];if(73===a[b]&&68===a[b+1]&&51===a[b+2])return[b,4]}return o}function Se(a,b,c){if(k.Hc){this.url=window.URL.createObjectURL(new Blob(["self.onmessage = function(e) {\t\t\tself.postMessage(("+b+')(e["data"]), null);\t\t}']));this.S=new rb(a,this.fc.bind(this),l);this.find=this.jc;this.jb=[];for(this.Oc=this.mc.bind(this,c);0<a;)this.jb.push(new Worker(this.url)),a--}else this.find=this.ic.bind(b)}
function Zf(a,b){if(b){var c,d,g=b[1],u=this.getAttribute("download");2===g?(c="application/x-rar-compressed",d="rar"):1===g?(c="application/zip",d="zip"):0===g?(c="application/x-7z-compressed",d="7z"):3===g?(c="audio/ogg",d="ogg"):(c="audio/mpeg",d="mp3");nb(e.Pb,e.Db(this)).insertAdjacentHTML("afterend",'<a href="'+window.URL.createObjectURL(new Blob([a.subarray(b[0])],{type:c}))+'" class="'+(2<g?"de-img-audio":"de-img-arch")+'" title="'+Gd[i]+'" download="'+u.substring(0,u.lastIndexOf("."))+"."+
d+'">.'+d+"</a>")}}function $f(a,b){var c={method:"GET",url:a,onreadystatechange:function(a){4===a.readyState&&(200===a.status?k.c&&e.d?b(new Uint8Array(a.responseText.split("").map(function(a){return a.charCodeAt()}))):b(new Uint8Array(a.response)):b(l))}};k.c&&e.d?(c.overrideMimeType="text/plain; charset=x-user-defined",GM_xmlhttpRequest(c)):(c.responseType="arraybuffer",de(c))}function yc(a){var b,c,d,g,e,p;e=a?1:4;var t=f.findImgFile&&new Se(e,Yf,function(a){console.error("FILE DETECTOR ERROR, line: "+
a.hd+" - "+a.message)}),i=f.preLoadImgs&&new rb(e,function(a,b){var c=b[0],d=b[2],g=b[3];$f(b[1],function(a){a&&(c.href=window.URL.createObjectURL(new Blob([a],{type:d})),g&&(N("img",c).src=c.href),t&&t.find(a,Zf.bind(c,a)));c=g=d=l;k.c?i.end():setTimeout(i.end.bind(i),100)})},function(){t&&t.clear();t=i=l});e=0;for(p=La(a||y);g=p[e++];)if(a=X("ancestor::a[1]",g)){b=a.href;d=!!f.openImgs;if(/\.gif$/i.test(b))c="image/gif";else{if(/\.jpe?g$/i.test(b))c="image/jpeg";else if(/\.png$/i.test(b))c="image/png";
else continue;d&=!f.openGIFs}a.setAttribute("download",b.substring(b.lastIndexOf("/")+1));i?i.Ca([a,b,c,d]):d&&(g.src=b)}i&&i.complete()}function Ba(a,b,c,d,g){Ba.ub(a)?this.disabled=j:(this.Vb=a.replace(/(?:[sihdny]\?){2,}/g,function(a){return"(?:"+a.replace(/\?/g,"")+")?"}).replace(/\-/g,"[^<]").replace(/\+/g,"[^0-9]").replace(/([sihdny]+)/g,"($1)").replace(/[sihdny]/g,"\\d").replace(/m|w/g,"([a-zA-Zà-ÿÀ-ß]+)"),this.pattern=a.replace(/[\?\-\+]+/g,"").replace(/([a-z])\1+/g,"$1"),
this.Ac=parseInt(b,10),this.uc=Hd[c],this.tc=Id[c],this.sc=Jd[c],d&&g&&Ya(d)===+g&&(this.Jb=j,this.qa=d.substring(1),this.Xa=!!+d[0]))}function zc(){if(f.YTubeTitles){try{this.Fa=JSON.parse(sessionStorage["de-yt-titles"])||{}}catch(a){this.Fa={}}this.S=new rb(8,this.lc.bind(this),this.cd.bind(this))}else this.$a=this.Lc}function ag(a,b){setTimeout(GM_xmlhttpRequest,0,{method:"GET",url:"https://www.youtube.com/watch?v="+a,onload:function(a){var d,g,e,p,f,i,h=[];d=a.responseText.match(/\"url_encoded_fmt_stream_map\":\s*\"([^\"]+)\"/);
g="%2C";var k="%26",n="%3D";if(d){d=d[1];d.contains(",")&&(g=",",k=d.contains("&")?"&":"\\u0026",n="=");a=0;d=d.split(g);for(g=d.length;a<g;a++){e=d[a].split(k);p=[];for(f=0;f<e.length;f++)i=e[f].split(n),2===i.length&&(p[i[0]]=i[1]);if(e=p.url)if(e=unescape(unescape(e)).replace(/\\\//g,"/").replace(/\\u0026/g,"&"),f=p.itag)(p=p.sig)&&(e+="&signature="+p),e.toLowerCase().startsWith("http")&&(h[f]=e)}b(h)}else b(l);b=l}})}function Te(a,b,c){var d=' width="'+f.YTubeWidth+'" height="'+f.YTubeHeigh+'">';
a.innerHTML=1===f.YTubeType?'<iframe type="text/html" src="https://www.youtube.com/embed/'+b+(f.YTubeHD?"?hd=1&":"?")+"start="+c+'&html5=1" frameborder="0"'+d:'<embed type="application/x-shockwave-flash" src="https://www.youtube.com/v/'+b+(f.YTubeHD?"?hd=1&":"?")+"start="+c+'" wmode="transparent"'+d}function Ac(a,b){var c=b[1],d=(b[2]?3600*b[2]:0)+(b[3]?60*b[3]:0)+(b[4]?+b[4]:0);2!==f.YTubeType?Te(a,c,d):ag(c,function(b){(b=b?f.YTubeHD?b[45]||b[44]||b[43]:b[43]:o)?(a.innerHTML='<video poster="https://i.ytimg.com/vi/'+
c+'/0.jpg" controls="controls" preload="none" src="'+b+(k.c&&14>k.c?"&"+Math.random():"")+'" width="'+f.YTubeWidth+'" height="'+f.YTubeHeigh+'"></video>',0!==d&&(a.firstChild.jd=function(){this.currentTime=d;d=l})):Te(a,c,d)})}function Ue(a,b){if(b){var c=x("de-ytube-obj",a);c.M=b.M;b.ac&&Ve(c)}}function We(a,b,c){var d,g,e,p,f,i=c.length;for(g=d=0;d<i;d++)e=c[d],(p=b[g])?db().test(e.href)&&(e.parentNode.replaceChild(p,e),g++):(m=e.href.match(db()),Xe(e,m,a),(f||(f=new zc)).$a([e,m[1]]));f&&f.Yb()}
function Ve(a){a.ac=j;a.firstChild.onclick=function(a){A(a);a=this.parentNode;a.ac=o;Ac(a,a.M)}}function Ye(a,b){a.innerHTML='<a href="https://www.youtube.com/watch?v='+b[1]+'" target="_blank"><img src="https://i.ytimg.com/vi/'+b[1]+'/0.jpg" width="360" height="270"></a>';3===f.addYouTube&&Ve(a)}function db(){return/^https?:\/\/(?:www\.)?youtu(?:be\.com\/(?:watch\?.*?v=|v\/|embed\/)|\.be\/)([^&#?]+).*?(?:t(?:ime)?=(?:(\d+)h)?(?:(\d+)m)?(?:(\d+)s?)?)?$/}function bg(a){var b=this.M,c=x("de-ytube-obj",
ca(this));A(a);c.M===b?(c.innerHTML="",c.M=l):(2<f.addYouTube?Ye(c,b):Ac(c,b),c.M=b)}function Xe(a,b,c){var d,g;c.kb||((c.kb=g=w("div",{"class":"de-ytube-obj"},l),2<f.addYouTube?(g.M=b,Ye(g,b)):2===f.addYouTube&&(g.M=b,Ac(g,b)),c=c.m||c.querySelector(e.F),e.e)?(c=c.parentNode,d=c.previousElementSibling,ea(d.hasAttribute("style")?d:c,g)):ea(c,g));a.href=a.href.replace(/^http:/,"https:");a.M=b;a.className="de-ytube-link";a.onclick=bg}function Bb(a){if(f.addYouTube){var b,c,d,g,u,p=new zc;b=0;for(c=
(a||y).querySelectorAll("embed, object, iframe");d=c[b++];)if(g=(d.src||d.data).match(db())){u="https://www.youtube.com/watch?v="+g[1];if(g[4]||g[3]||g[2])u+="#t="+(g[2]?g[2]+"h":"")+(g[3]?g[3]+"m":"")+(g[4]?g[4]+"s":"");g=a||ca(d);(g.m||g.querySelector(e.F)).insertAdjacentHTML("beforeend",'<p class="de-ytube-ext"><a href="'+u+'">'+u+"</a></p>");v(d)}b=0;for(c=(a||y).querySelectorAll('a[href*="youtu"]');d=c[b++];)if(g=d.href.match(db()))Xe(d,g,a||ca(d)),p.$a([d,g[1]]);p.Yb()}}function cg(a){var b=
this[0];b&&(a&&this[1].test(a)?(J.fa.apply(l,this.concat(j,j)),this[0]=o):0===--b.Y&&(b.Y=l,J.fa.apply(l,this.concat(o,j))))}function Cb(a){if(f.addMP3)for(var b,c,d,g=0,u=(a||y).querySelectorAll('a[href*=".mp3"]');d=u[g++];)if("_blank"===d.target||"nofollow"===d.rel){b=a||ca(d);if(!(c=x("de-mp3",b)))c=w("div",{"class":"de-mp3"},l),ea(b.m||b.querySelector(e.F),c);c.querySelector('object[FlashVars*="'+d.href+'"]')||(c.innerHTML+='<object data="//junglebook2007.narod.ru/audio/player.swf" type="application/x-shockwave-flash" wmode="transparent" width="220" height="16" FlashVars="playerID=1&amp;bg=0x808080&amp;leftbg=0xB3B3B3&amp;lefticon=0x000000&amp;rightbg=0x808080&amp;rightbghover=0x999999&amp;rightcon=0x000000&amp;righticonhover=0xffffff&amp;text=0xffffff&amp;slider=0x222222&amp;track=0xf5f5dc&amp;border=0x666666&amp;loader=0x7fc7ff&amp;loop=yes&amp;autostart=no&amp;soundFile='+
d.href+'"><br>')}}function dg(a){function b(){dc(n.body,{mousemove:c,mouseup:b})}function c(b){a.style.left=b.clientX-a.xc+"px";a.style.top=b.clientY-a.yc+"px";a.Lb=j}a.onmousedown=function(d){A(d);a.xc=d.clientX-parseInt(a.style.left,10);a.yc=d.clientY-parseInt(a.style.top,10);S(n.body,{mousemove:c,mouseup:b})}}function eg(a){var b=a.clientX,c=a.clientY,d=parseInt(this.style.left,10),g=parseInt(this.style.top,10),e=parseFloat(this.style.width||this.width),p=parseFloat(this.style.height||this.height),
f=k.c?-a.detail:a.wheelDelta,i=e*(0<f?1.25:0.8),f=p*(0<f?1.25:0.8);A(a);this.style.width=i+"px";this.style.height=f+"px";this.style.left=parseInt(b-i/e*(b-d),10)+"px";this.style.top=parseInt(c-f/p*(c-g),10)+"px"}function Ze(a,b,c){var d="",g="",e=+b[0],b=+b[1],p=n.documentElement.clientWidth,t=window.innerHeight,i=x("de-img-full",a);if(!(i&&c||!i&&c===o))if(1===f.expandImgs&&!a.querySelector('img[style*="fixed"]')&&K(N("img",a)),i)i.Lb?i.Lb=o:(K(i),setTimeout(v,0,i));else if(1===f.expandImgs?p-=na(a).left+
25:v(x("de-img-center",n)),e&&b&&(d=e<p?e:p,g=d*b/e,2===f.expandImgs&&g>t&&(g=t,d=g*e/b)),a.insertAdjacentHTML("beforeend",'<img class="de-img-full" src="'+a.href+'" alt="'+a.href+'" width="'+d+'" height="'+g+'">'),2===f.expandImgs)i=a.lastChild,i.classList.add("de-img-center"),i.style.cssText="left: "+(p-d)/2+"px; top: "+(t-g)/2+"px;",i.addEventListener(k.c?"DOMMouseScroll":"mousewheel",eg,o),dg(i)}function $e(a){a.onclick=function(a){f.expandImgs&&1!==a.button&&(A(a),Ze(this,this.firstChild.title.split("x"),
l))}}function Db(a){if(f.addImgs)for(var b,c=0,d=a.querySelectorAll(e.F+' a[href*=".jpg"], '+e.F+' a[href*=".png"], '+e.F+' a[href*=".gif"]');(b=d[c++])&&"SMALL"!==b.parentNode.tagName;)a=b.cloneNode(o),a.target="_blank",K(a),a.appendChild(w("img",{"class":"de-img-pre",src:a.href,alt:a.href},{load:function(){var a,b;K(this.parentNode);a=this.width;b=this.height;this.title=a+"x"+b;200>=a&&200>=b||(a/=b,this.width=1>a?200*a:200,this.height=1>a?200:200/a)}})),$e(a),ea(b,a)}function Eb(a){if(f.imgSrcBtns)for(var b=
a.a||"",c=0,d=a.querySelectorAll(e.Pb);a=d[c++];)/google\.|tineye\.com|iqdb\.org/.test(a.href)?v(a):a.firstElementChild||a.insertAdjacentHTML("beforebegin",'<span de-id="'+b+c+'" class="de-btn-src" onmouseover="de_imgSOver(this)" onmouseout="de_btnOut(event)"></span>')}function af(a,b){a&&/\.jpe?g|\.png|.\gif|^blob:/i.test(a.href)&&Ze(a,jc(e.Db(a)),b)}function nc(a,b){for(var c,d=0;c=a.P[d++];)af(X("ancestor::a[1]",c),b)}function Fb(a){F(a.P,function(a){var c=X("ancestor::a[1]",a);c&&(a.onclick=l,
e.zb&&(a.parentNode.onclick=l),c.onclick=function(a){if(a.button!==1){A(a);af(this,l)}})})}function bf(a){var b='<div class="de-refmap">'+a.u.join(", ").replace(/(\d+)/g,'<a href="#">&gt;&gt;$1</a>')+"</div>";try{a.m.insertAdjacentHTML("afterend",b)}catch(c){a.insertAdjacentHTML("beforeend",b)}}function Bc(a){var b=[];k.forEach(a,function(a){for(var d,g,e,p=0,f=this[a].m.getElementsByTagName("a");e=f[p++];)if(e=e.textContent,e.startsWith(">>")&&(d=+e.substr(2))&&(g=this[d]))"undefined"===typeof g.u?
(g.u=[a],b.push(g)):-1===g.u.indexOf(a)&&g.u.push(a)});b.forEach(bf);b=l}function cf(a){for(var b,c,d,g=a.a,e=0,p=a.m.getElementsByTagName("a");d=p[e++];)if(d=d.textContent,d.startsWith(">>")&&(b=+d.substr(2))&&(c=H[b]))"undefined"===typeof c.u?c.u=[g]:-1===c.u.indexOf(g)&&c.u.push(g),v(x("de-refmap",c)),bf(c),eb(x("de-refmap",c)),f.hideRefPsts&&c.h&&Gb(a,"reference to >>"+b)}function Hb(a){if(a){a.parent?a.parent.ea=l:sa=l;do{clearTimeout(a.$c);var b=a;f.animation?(k.$(b,v),b.classList.add("de-pview-anim"),
b.style[k.la]="de-post-close-"+(b.rb?"t":"b")+(b.qb?"l":"r")):v(b)}while(a=a.ea)}}function Ib(a,b){a&&(clearTimeout(jb),jb=setTimeout(Hb,f.linksOut,b?a:a.ea))}function Cc(){this.style[k.la]&&(this.classList.remove("de-pview-anim"),this.style.cssText=this.za,this.za=o,F(V("de-css-move",n.head),v),this.removeEventListener(k.ka,Cc,o))}function df(a,b,c){if(b.link!==a){b.link=a;var d,g;d=a.getBoundingClientRect();g=d.left+window.pageXOffset+a.offsetWidth/2;var e=d.top+window.pageYOffset,p=n.documentElement.clientWidth,
t=g<p/2,p=(t?p-g:g)-10,i="max-width:"+p+"px; left:"+(t?g:g-Math.min(parseInt(b.offsetWidth,10),p))+"px;";c?(p=b.style.cssText,b.style.cssText="opacity: 0; "+i):b.style.cssText=i;g=b.offsetHeight;d=g+d.top+a.offsetHeight<window.innerHeight||5>d.top-g;g=(d?e+a.offsetHeight:e-g)+"px";b.qb=t;b.rb=d;!f.animation||!c?b.style.top=g:(a="de-movecss-"+Math.round(1E3*Math.random()),U(fc("@"+k.yb+"keyframes "+a+" {to { "+i+" top:"+g+"; }}"),{"class":"de-css-move"}),b.za?(b.style.cssText=b.za,b.removeEventListener(k.ka,
Cc,o)):b.style.cssText=p,b.za=i+" top:"+g+";",b.addEventListener(k.ka,Cc,o),b.classList.add("de-pview-anim"),b.style[k.la]=a)}}function ef(a,b){(x("de-pview-link",a)||{}).className="";(X('.//a[starts-with(text(),">>") and contains(text(),"'+b+'")]',a)||{}).className="de-pview-link"}function Jb(a,b,c,d,g){clearTimeout(jb);var u;if(a){if(g=(u=a.ownerDocument===n)?a.cloneNode(j):Kb(a),g.setAttribute("de-post",l),g.className=e.t+" de-pview"+(a.ib?" de-viewed":""),g.style.display="",e.Z&&(g.firstElementChild.style.cssText=
"max-width: 100%; margin: 0;",v(x("doubledash",g))),g.a=b,F(g.querySelectorAll(".de-img-full, .de-ppanel, .de-sound"),v),u?(f.addYouTube&&(We(g,V("de-ytube-link",a),V("de-ytube-link",g)),Ue(g,x("de-ytube-obj",a))),f.addImgs&&F(V("de-img-pre",g),function(a){$e(a.parentNode)}),f.imgSrcBtns&&F(V("de-btn-src",g),function(a){a.setAttribute("de-id","pv"+a.getAttribute("de-id"))})):(Cb(g),Bb(g),Db(g),Eb(g)),F(g.P=La(g),function(a){a.style.display=""}),f.expandImgs&&Fb(g),2===f.linksNavig&&ef(g,c.a),eb(g),
e.Eb(a)&&g.querySelector(e.Sb).insertAdjacentHTML("afterend",'<span class="de-btn-sage" title="SAGE"></span>'),f.markViewed)g.$c=setTimeout(function(a,b){if(!a.ib){a.classList.add("de-viewed");a.ib=j}var c=(sessionStorage["de-viewed"]||"").split(",");c.push(b);sessionStorage["de-viewed"]=c},2E3,a,b)}else g||(Sb[b]=j),g=P('<div class="'+e.t+' de-pview-info de-pview">'+(g||bc[i])+"</div>");y.appendChild(g);df(d,g,o);g.onmouseover=function(){Ib(this,o)};g.onmouseout=function(){Ib(sa,j)};g.Nb=j;sa&&c.Nb?
(Hb(c.ea),g.parent=c,c.ea=g):(Hb(sa),sa=g);f.animation&&(k.$(g,function(a){a.classList.remove("de-pview-anim");a.style[k.la]=""}),g.classList.add("de-pview-anim"),g.style[k.la]="de-post-open-"+(g.rb?"t":"b")+(g.qb?"l":"r"));return g}function ff(a,b,c){if(!ta[a])return l;var d,g=ta[a][b];if(a===B||!g||g.rc)return g;b=sb(a)+e.ra+c+(e.ga?".html":Lb);a=0;for(c=g.getElementsByTagName("a");d=c[a++];)/^>>\d+$/.test(d.textContent)&&(d.href=b);g.rc=j;return g}function fg(a){var b=a.pathname.match(/^\/?(.+\/)/)[1].replace(e.ra,
"").replace(/\/$/,""),c=(a.pathname.match(/.+?\/[^\d]*(\d+)/)||[,0])[1],d=(a.textContent.match(/\d+$/)||[c])[0],g=H[d]||ff(b,d,c),u=ca(a),p=u.Nb?u.ea:sa;if(!f.noNavigHidd||!g||!g.h)Sb[d]?Jb(l,d,u,a,bc[i]):p&&p.a===d?(Ib(p,o),Hb(p.ea),df(a,p,j),ef(p,u.a)):g?Jb(g,d,u,a,l):(p=Jb(l,d,u,a,'<span class="de-wait">'+ua[i]+"</span>"),ta[b]=[],Da(l,b,c,j,function(g,f,i){if(!i){var h=0;f.p=j;f.m=f.querySelector(e.F);for(ta[b][c]=f;f=g[h++];)f.m=f.querySelector(e.F),ta[b][e.ba(f)]=f;Bc(ta[b]);p&&p.parentNode&&
Jb(ff(b,d,c),d,u,a,i)}b=d=c=u=p=l}))}function gg(){2<this.textContent.length&&(this.Sc=setTimeout(fg,f.linksOver,this))}function hg(){clearTimeout(this.Sc);Ib(sa,j)}function eb(a){if(f.linksNavig)for(var b=n.evaluate('.//a[starts-with(text(),">>")]',a,l,4,l);a=b.iterateNext();)a.onmouseover=gg,a.onmouseout=hg}function Da(a,b,c,d,g){GM_xmlhttpRequest({method:"GET",url:k.Va(a||e.O(b,c)),onreadystatechange:function(a){if(4===a.readyState){if(200===a.status){var b=k.$b(a.responseText);!h.form&&ba&&(h=
gf(n.importNode(b.querySelector(e.Rb),j)),ea(ba,h.form));d?hf(b.querySelector(e.Aa),b,function(a){g(e.Ya(a),e.Cb(a,b),l)}):g(l,b,l)}else g(l,l,0===a.status?va[i]:"HTTP ["+a.status+"] "+a.statusText);g=d=b=l}}})}function ig(a,b){GM_xmlhttpRequest({method:"GET",url:k.Va(a),onreadystatechange:function(a){if(4===a.readyState)if(304===a.status)ja(r("de-alert-newposts"));else{try{b(a.status,a.statusText,JSON.parse(a.responseText))}catch(d){b(1,d.toString(),l)}b=l}}})}function Kb(a){return Mb(n.importNode(a,
j))}function jf(a){f.expandImgs&&Fb(a);a.h||(W[a.count]=1,D.U(a,Gb,o));cf(a);eb(a);Cb(a);Db(a);Za&&nc(a,l)}function Nb(a,b,c,d,g){Dc(b,c,a,d);xc(b);Bb(b);jf(b);Eb(b);fb?(c=fb.cloneNode(j),(d=e.Ya(c)[0])?d.parentNode.replaceChild(b,d):c=b):c=b;g?L(g,c):a.appendChild(c);e.o&&!e.D&&c.insertAdjacentHTML("afterend","<br>");(f.preLoadImgs||f.openImgs)&&yc(b);return+!b.h}function Ob(a,b){var c=e.g?a.m.firstElementChild:a.m,d=e.g?a.querySelector(".alternate > div"):n.importNode(b.querySelector(e.F),j),g=
x("de-ytube-ext",c),f=x("de-ytube-obj",a),p=c.querySelectorAll(":not(.de-ytube-ext) > .de-ytube-link");c.parentNode.replaceChild(a.m=Mb(d),c);a.P=La(a);f&&Ue(a,f);We(a,p,a.m.querySelectorAll('a[href*="youtu"]'));g&&a.m.appendChild(g);jf(a)}function kf(a,b){var c=ca(a);e.g?(v(a.nextSibling),v(a.previousSibling),v(a),b?Ob(c,l):c.m.replaceChild(c.querySelector(".alternate > div"),c.m.firstElementChild)):Da(l,B,c.L.a,j,function(b,g,f){if(!f){var p;if(c.p)p=g;else for(g=0;(p=b[g++])&&c.a!==e.ba(p););p&&
(Ob(c,p),v(a));a=c=l}})}function lf(a){if(!a.h&&(a=a.querySelector(e.Yc))&&/long|full comment|gek\u00fcrzt|ñëèøêîì|äëèíí|ìíîã|ïîëíàÿ âåðñèÿ/i.test(a.textContent))1===f.expandPosts?kf(a,o):N("a",a).onclick=function(a){A(a);kf(this,j)}}function bb(a,b,c){c||I(ua[i],"load-thr",j);Da(l,B,a.a,j,function(d,g,f){var p,t,h,k,n,s=d.length,q=a.L;if(f)I(f,"load-thr",o);
else{Ja();t=q.Nc||ee(q);n=q.bc||q.R-t-1;v(r("de-menu"));F(q.querySelectorAll(e.Qb+", .de-omitted, .de-expand"),v);q.R=s+1;1===b||b>=s?(f=0,q.bc=s):(f=s-b,q.bc=b);q.Nc=f;if(!(h=q.Kb))h=[],Ob(a,g);for(g=0;g<f;g++)"undefined"!==typeof h[g]&&e.J(h[g]).classList.add("de-hidden");for(k=q.Mb;g<t;g++)"undefined"===typeof h[g]?(Nb(q,h[g]=Kb(d[g]),e.ba(d[g]),g+1,k),k=e.J(h[g])):(k=e.J(h[g])).classList.remove("de-hidden");0!==f&&L(q.Mb,w("div",{"class":"de-omitted",text:Kd[i]+f},l));if(q.Kb)for(g=t+n;t<g;t++)cf(h[t]);
else{g=0;for(p=C.indexOf(a);g<n;t++,g++)k=h[t]=C[p+g+1],t<f&&e.J(k).classList.add("de-hidden"),Ob(k,d[t])}for(;t<s;t++)Nb(q,h[t]=Kb(d[t]),e.ba(d[t]),t+1,l);if(5<b||1===b)q.appendChild(P('<span class="de-expand">[<a href="#">'+Ld[i]+"</a>]</span>")).onclick=function(b){A(b);bb(a,5,l);a=l};Ea.splice.apply(C,[C.indexOf(a),n+1,a].concat(h.slice(f,s)));q.Kb=h;ja(r("de-alert-load-thr"))}pb(a);c&&c();b=c=l})}function Nf(){var a=this.parentNode.parentNode,b=N("iframe",a),c=a.getAttribute("info").split(";")[2],
d=x("de-content",n);v(r("de-fav-wait"));b?(v(b),d.style.overflowY="auto"):(c=H[c])&&!c.h?pb(c):(v(r("de-iframe-fav")),x("de-content",n).style.overflowY="scroll",a.insertAdjacentHTML("beforeend",'<iframe name="de-iframe-fav" id="de-iframe-fav" src="'+N("a",a).href+'" scrolling="no" style="border: none; width: '+(n.documentElement.clientWidth-55)+'px; height: 1px;"><div id="de-fav-wait" class="de-wait" style="font-size: 1.1em; text-align: center">'+ua[i]+"</div>"))}function uc(a,b,c){Da(e.oa(B,b),l,
l,o,function(d,g){for(var f,d=n.importNode(g.querySelector(e.Aa),j);f=d.firstChild;)a.appendChild(f);c(Mb(a),b);c=a=b=l})}function mf(a){a.forEach(function(a){nf(a);of(a)});C.forEach(xc);f.expandImgs&&C.forEach(Fb);f.expandPosts&&C.forEach(lf);Cb(l);Bb(l);Db(y);Eb(y);2===f.linksNavig&&Bc(H);eb(y);ie();f.markViewed&&oe();pf();Za&&C.forEach(function(a){nc(a,l)});ja(r("de-alert-load-pages"));(f.preLoadImgs||f.openImgs)&&yc(l)}function qf(){I(ua[i],"load-pages",j);f.preLoadImgs&&F(y.querySelectorAll('a[href^="blob:"]'),
function(a){window.URL.revokeObjectURL(a.href)});y.innerHTML="";C=[];ta={}}function Be(a){qf();uc(y,a,function(a){mf([a])})}function Rf(a){qf();for(var b,c=0,d=Array(a),g=1;c<a;c++)b=w("div",{id:"de-page"+c},l),xa(y,[w("center",{text:c+" "+$b[i],style:"font-size: 2em;"},l),n.createElement("hr"),b]),uc(b,c,function(b,c){d[c]=b;g===a?(mf(d),g=d=l):g++})}function Ec(a){s&&1===f.updThread&&(n.querySelector('a[id^="de-btn-upd"]').id="de-btn-upd-"+a)}function se(){Ec("off");clearInterval(xb);xb=ka}function ue(){Wa||
(Wa=w("audio",{preload:"auto",src:"https://raw.github.com/SthephanShinkufag/Dollchan-Extension-Tools/master/signal.ogg"},l));Va=!Va}function rf(){la?hb=o:(Wa.play(),setTimeout(rf,Ua),hb=j)}function Pb(a,b){if(a)a!==va[i]?(I(Md[i]+s+"): \n"+a,"newposts",o),n.title="{"+a.match(/(?:\[)(\d+)(?:\])/)[1]+"} "+n.title,se()):(I(va[i],"newposts",o),Ec("warn"));else if(ja(r("de-alert-newposts")),1===f.updThread&&(Ec("on"),!la)){b+=+(n.title.match(/^\[(\d+)\]/)||[,0])[1];f.favIcoBlink&&Ga&&(clearInterval(ib),
0<b&&(ib=setInterval(function(){var a=n.head.querySelector('link[href="'+Ga+'"]')?"data:image/x-icon;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQEAYAAABPYyMiAAAABmJLR0T///////8JWPfcAAAACXBIWXMAAABIAAAASABGyWs+AAAAF0lEQVRIx2NgGAWjYBSMglEwCkbBSAcACBAAAeaR9cIAAAAASUVORK5CYII=":Ga;F(n.head.querySelectorAll('link[rel="shortcut icon"]'),v);n.head.appendChild(w("link",{href:a,rel:"shortcut icon"},l))},800)));n.title=(0<b?" ["+b+"] ":"")+Ta;if(k.r&&f.desktNotif&&0<b&&0!==window.webkitNotifications.checkPermission()){var c=
window.webkitNotifications.createNotification("/favicon.ico",Ta,Nd[i].replace(/%m/g,b));c.ondisplay=function(){setTimeout(this.cancel.bind(this),8E3)};c.onclick=function(){window.focus&&window.focus();this.cancel()};c.show()}Va&&!hb&&0<b&&(Ua?rf():Wa.play())}}function sf(a,b){if(e.bb&&!a.Gc){var c=b.querySelector(e.bb);c&&(a.querySelector(e.bb)||a.m.appendChild(n.importNode(c,j)),a.Gc=j)}}function tf(a){if(!a.zc){var b=sessionStorage["de-deleted"];sessionStorage["de-deleted"]=(b?b+",":"")+a.count;
a.zc=j;a.I.classList.remove("de-ppanel-cnt");a.I.classList.add("de-ppanel-del")}}function Ab(a){e.g?ig("//dobrochan.ru/api/thread/"+B+"/"+s+"/new.json?message_html&new_format&last_post="+C[C.length-1].a,function(b,c,d){if(200!==b||d.error)Pb(0===b?va[i]:c||d.message,0);else{var g,b=0,f=(d.result||{}).posts,p=x("de-thread",y);if(f&&0<f.length){d=0;for(c=f.length;d<c;d++){g=f[d];for(var t=ka,h=ka,t=g.display_id,k=g.files,n=k.length,r=w("td",{id:"reply"+t,"class":"reply","de-post":t},l),h='<a name="i'+
t+'"></a><label><a class="delete icon"><input type="checkbox" id="delbox_'+t+'" class="delete_checkbox" value="'+g.post_id+'" id="'+t+'"></a><span class="postername">'+g.name+"</span> "+e.Dc.Bb(g.date)+' </label><span class="reflink"><a onclick="Highlight(0, '+t+')" href="/'+B+"/res/"+s+".xhtml#i"+t+'">No.'+t+"</a></span><br>",t=0;t<n;t++){var q=k[t],v=ka,z=q.src,A=q.thumb,D=q.thumb_width,E=q.thumb_height,F=q.size,G=q.rating,H=ge("de-rating")||"r-15";"b"===B||"rf"===B?v=A.substring(A.lastIndexOf("/")+
1):(v=z.substring(z.lastIndexOf("/")+1),17<v.length&&(v=v.substring(0,17)+"..."));A="r-18g"===G&&"r-18g"!==H?"images/r-18g.png":"r-18"===G&&("r-18g"!==H||"r-18"!==H)?"images/r-18.png":"r-15"===G&&"sfw"===H?"images/r-15.png":"illegal"===G?"images/illegal.png":q.thumb;A!==q.thumb&&(E=D=200);h+='<div class="file"><div class="fileinfo">Ôàéë: <a href="/'+z+'" target="_blank">'+v+"</a><br><em>"+q.thumb.substring(q.thumb.lastIndexOf(".")+1)+", "+(1024>F?F+" B":1048576>F?(F/1024).toFixed(2)+
" KB":1073741824>F?(F/1048576).toFixed(2)+" MB":(F/1073741824).toFixed(2)+" GB")+", "+q.metadata.width+"x"+q.metadata.height+'</em><br><a class="edit_ icon" href="/utils/image/edit/'+q.file_id+"/"+g.post_id+'"><img title="edit" alt="edit" src="/images/blank.png"></a></div><a href="/'+z+'" target="_blank"><img class="thumb" src="/'+A+'" width="'+D+'" height="'+E+'"></a></div>'}r.innerHTML=h+(1<n?'<div style="clear: both;"></div>':"")+'<div class="postbody">'+g.message_html+'</div><div class="abbrev"></div>';
g=Mb(r);b+=Nb(p,g,f[d].display_id,p.R+d,l);C.push(g)}p.R+=f.length}Pb(l,b)}a&&a();a=l}):Da(l,B,s,j,function(b,c,d){if(d)Pb(d,0);else{var g,f,p,i,h=0,k=C.length,n=b.length,q=x("de-thread",y);sf(C[0],c);c=1;for(g=0;c<k||g<n;c++,g++)f=C[c],(p=b[g])?(i=e.ba(p),f?f.a!==i?(tf(f),g--):sf(f,p):(h+=Nb(q,f=Kb(p),i,c,l),C.push(f))):tf(f);Pb(d,h);q.R=k;Ma();r("de-panel-info").firstChild.textContent=c+"/"+La(y).length}a&&a();a=l})}function te(){xb=setInterval(function(){Ab(l)},1E3*f.updThrDelay)}function uf(a){f.hideRefPsts&&
a.u&&(a.u.forEach(function(b){var c=H[b];c&&!O[b]&&Fc(c,"reference to >>"+a.a)}),a=l)}function Gc(a){f.hideRefPsts&&a.u&&a.u.forEach(function(a){var c=H[a];c&&!O[a]&&(0!==W[c.count]&&gb(c,o,l),Gc(c))})}function pf(){for(var a,b,c,d=0;c=C[d++];)if(a=W[d],O[b=c.a]){if(c.p&&(O[b][0]="undefined"===typeof Oa[b]?1:0),0===O[b][0]?Qa(c,j):(O[b][1]=Date.now(),c.I.firstChild.className="de-btn-hide-user"),"undefined"===typeof a)W[d]=1,D.U(c,function(a){W[a.count]=0},o)}else c.p&&("undefined"!==typeof Oa[b]?
W[d]=a="0":"0"===a&&(a=l)),"0"===a?Fc(c,l):"1"!==a&&(W[c.count]=1,D.U(c,Gb,o))}function ab(a,b){b?a.classList.add("de-post-hid"):a.classList.remove("de-post-hid")}function Hc(a,b){b&&a.I.appendChild(w("a",{"class":"de-post-note de-abtn",text:" autohide: "+b+" ",href:"#"},{click:function(a){A(a);v(this)}}))}function gb(a,b,c){var d,g,u=a.L;a.h=b;if(a.p){if(u.style.display=b?"none":"",u.h=b,d=r("de-thr-hid-"+(g=a.a)),!b&&d&&(v(d),me(a,1)),b&&!d)u.insertAdjacentHTML("beforebegin",'<div class="'+e.t+
' de-thr-hid" id="de-thr-hid-'+g+'">'+Od[i]+' <a href="#">¹'+g+"</a><i> ("+(c?"autohide: "+c:a.Da.replace(/</g,"&lt;").replace(/>/g,"&gt;"))+")</i></div>"),b=N("a",d=u.previousSibling),b.onclick=function(b){A(b);Qa(a,!a.h);Na()},b.onmouseover=function(){u.style.display=""},d.onmouseout=function(){u.style.display="none"},me(a,0)}else ab(a,b),f.delHiddPost?b?((d=e.J(a)).classList.add("de-hidden"),d.insertAdjacentHTML("afterend",'<span style="counter-increment: de-cnt 1;"></span>')):((d=e.J(a)).classList.remove("de-hidden"),
v(d.nextSibling)):((d=x("de-post-note",a))?b?c&&(d.innerText=" autohide: "+c+" "):v(d):b&&Hc(a,c),a.Ob.onmouseover=b&&function(){ab(ca(this),o)},a.Ob.onmouseout=b&&function(){ab(ca(this),j)}),f.strikeHidd&&setTimeout(F,0,y.querySelectorAll('a[href*="#'+a.a+'"]'),b?function(a){a.className="de-ref-hid"}:function(a){a.className=l})}function Fc(a,b){gb(a,j,b);uf(a)}function Gb(a,b){O[a.a]||(a.h?(v(x("de-post-note",a)),Hc(a,b)):(W[a.count]=0,Fc(a,b)))}function vf(a){O[a.a]||(W[a.count]=1,gb(a,o,l),Gc(a),
v(x("de-post-note",a)))}function Qa(a,b){var c=a.a;gb(a,b,l);a.I.firstChild.className="de-btn-hide-user";b?uf(a):Gc(a);O[c]||(O[c]=Array(2));O[c][0]=+!b;O[c][1]=Date.now()}function wf(a){return a.replace(/\s+/g," ").replace(/[^a-zà-ÿ¸ ]/ig,"").substring(0,800).split(" ")}function Pf(a){var b=ya(a),c=wf(b),d=a.h,g=a.a;C.forEach(function(a){var b=g,e=d,f=c,i,h=wf(ya(a)),k=h.length,n=f.length,q=n,r=n,s=0;if(!(k<0.4*q||k>3*q)){for(;n--;)if(6<q&&3>f[n].length)r--;else for(i=k;i--;)(h[i]===
f[n]||f[n].match(/>>\d+/)&&h[i].match(/>>\d+/))&&s++;s<0.4*r||k>3*r||(v(x("de-post-note",a)),e?(0!==W[a.count]&&gb(a,o,l),O[n=a.a]&&delete O[n]):(Qa(a,j),Hc(a,"similar to >>"+b)))}});Na();d=g=c=l}function Ae(a){var b,c,d=a.P[0];if(d.hash)return d.hash;c=r("de-canvas")||n.body.appendChild(w("canvas",{id:"de-canvas",style:"display: none;"},l));a=c.width=d.width;b=c.height=d.height;c=c.getContext("2d");c.drawImage(d,0,0);c=c.getImageData(0,0,a||1,b||1).data;var g,e,f,i,h,k;h=a*b;var q=256/3,s=0;for(e=
g=0;g<h;g++,e+=4)c[g]=0.3*c[e]+0.59*c[e+1]+0.11*c[e+2];for(g=0;8>g;g++)for(e=0;8>e;e++){h=g/7*(b-1);f=Math.min(h|0,b-2);k=h-f;h=e/7*(a-1);i=Math.min(h|0,a-2);h-=i;s=(s<<4)+Math.min(128*((c[f*a+i]*(1-h)*(1-k)+c[f*a+i+1]*h*(1-k)+c[(f+1)*a+i+1]*h*k+c[(f+1)*a+i]*(1-h)*k)/q|0),255);if(f=s&4026531840)s^=f>>>24;s&=~f}return d.hash=s}function J(a){a?this.update():this.Ja()}function xf(a){D.U(a,Gb,a.h&&vf)}function Ic(){ja(r("de-alert-help-err-spell"));D.Hb&&C.forEach(function(a){D.U(a,vf,l)})}function qc(){var a=
r("de-spell-edit"),b=a.value;if(b){if(D.pa(b)){Ic();D.eb();a.value=D.list;f.hideBySpell?C.forEach(xf):D.disable();Ma();return}}else Ic(),Ma();D.cb("");n.querySelector('input[info="hideBySpell"]').checked=o}function Ia(a,b){var c,d=r("de-spell-edit"),g=d&&d.value,e=n.querySelector('input[info="hideBySpell"]');g||(D.Ub||D.Tb(),g=D.list);if(c=D.pa(g))if(a=a+(s?"["+B+","+s+"]":"")+b,g=c[0].split(RegExp("(?:^|\\|?[\\s\\n]*)"+ic(a)+"(?: \\|\\n|$)","g")),c=1===g.length?D.pa(a+(g[0]?" |\n"+g[0]:"")+"\n\n"+
c[1]):D.pa(g.join("")+"\n\n"+c[1])){Ic();D.eb();d&&(e.checked=!!(d.value=D.list));D.list&&(Q("hideBySpell",1),C.forEach(xf));return}D.disable();d&&(e.checked=o);Q("hideBySpell",0)}function qe(){return!f.scriptStyle?"fr":1===f.scriptStyle?"en":"de"}function ye(){function a(a,b){d+=a+':before { content: ""; padding: 0 16px 0 0; margin: 0 4px; background: url('+b+") no-repeat center; }"}function b(a,b){d+=a+" { background: url(data:image/gif;base64,"+b+") no-repeat center !important; }"}K(y);var c,d=
"",d=d+('.de-block { display: block; }\t\t#de-content-cfg > div { float: left; border-radius: 10px 10px 0 0; width: auto; min-width: 0; padding: 0; margin: 5px 20px; overflow: hidden; }\t\t#de-cfg-info > span { display: inline-block; vertical-align: top; }\t\t#de-cfg-head { padding: 4px; border-radius: 10px 10px 0 0; color: #fff; text-align: center; font: bold 14px arial; cursor: default; }\t\t#de-cfg-head:lang(en), #de-panel:lang(en) { background: linear-gradient(to bottom, #4b90df, #3d77be 5px, #376cb0 7px, #295591 13px, rgba(0,0,0,0) 13px), linear-gradient(to bottom, rgba(0,0,0,0) 12px, #183d77 13px, #1f4485 18px, #264c90 20px, #325f9e 25px); }\t\t#de-cfg-head:lang(fr), #de-panel:lang(fr) { background: linear-gradient(to bottom, #7b849b, #616b86 2px, #3a414f 13px, rgba(0,0,0,0) 13px), linear-gradient(to bottom, rgba(0,0,0,0) 12px, #121212 13px, #1f2740 25px); }\t\t#de-cfg-head:lang(de), #de-panel:lang(de) { background: #777; }\t\t.de-cfg-body { width: 372px; min-height: 348px; padding: 11px 7px 7px; margin-top: -1px; font: 13px sans-serif; }\t\t.de-cfg-body input[type="text"] { width: auto; padding: 0px; }\t\t.de-cfg-body input[value=">"] { width: 20px; }\t\t.de-cfg-body, #de-cfg-btns { border: 1px solid #183d77; border-top: none; }\t\t.de-cfg-body:lang(de), #de-cfg-btns:lang(de) { border-color: #444; }\t\t#de-cfg-btns { padding: 7px 2px 2px; }\t\t#de-cfg-bar { height: 25px; width: 100%; display: table; background-color: #1f2740; margin: 0; padding: 0; }\t\t#de-cfg-bar:lang(en) { background-color: #325f9e; }\t\t#de-cfg-bar:lang(de) { background-color: #777; }\t\t.de-cfg-depend { padding-left: 25px; }\t\t.de-cfg-tab { padding: 4px 6px; border-radius: 4px 4px 0 0; font: bold 14px arial; text-align: center; cursor: default; }\t\t.de-cfg-tab-back { display: table-cell !important; float: none !important; min-width: 0; padding: 0 !important; box-shadow: none !important; border: 1px solid #183d77 !important; border-radius: 4px 4px 0 0; opacity: 1; }\t\t.de-cfg-tab-back:lang(de) { border-color: #444 !important; }\t\t.de-cfg-tab-back:lang(fr) { border-color: #121421 !important; }\t\t.de-cfg-tab-back[selected="true"] { border-bottom: none !important; }\t\t.de-cfg-tab-back[selected="false"] > .de-cfg-tab { background-color: rgba(0,0,0,.2); }\t\t.de-cfg-tab-back[selected="false"] > .de-cfg-tab:lang(en), .de-cfg-tab-back[selected="false"] > .de-cfg-tab:lang(fr) { background: linear-gradient(to bottom, rgba(132,132,132,.35) 0%, rgba(79,79,79,.35) 50%, rgba(40,40,40,.35) 50%, rgba(80,80,80,.35) 100%) !important; }\t\t.de-cfg-tab-back[selected="false"] > .de-cfg-tab:hover { background-color: rgba(99,99,99,.2); }\t\t.de-cfg-tab-back[selected="false"] > .de-cfg-tab:hover:lang(en), .de-cfg-tab-back[selected="false"] > .de-cfg-tab:hover:lang(fr)  { background: linear-gradient(to top, rgba(132,132,132,.35) 0%, rgba(79,79,79,.35) 50%, rgba(40,40,40,.35) 50%, rgba(80,80,80,.35) 100%) !important; }\t\t.de-cfg-tab::'+
(k.c?"-moz-":"")+"selection { background: transparent; }\t\t.de-cfg-unvis { display: none; }\t\t#de-cfg-updresult { padding: 3px 0; font-size: 1.1em; text-align: center; }\t\t#de-spell-panel { float: right; }\t\t#de-spell-panel > a { padding: 0 4px; }\t\t#de-spell-div { display: table; }\t\t#de-spell-div > div { display: table-cell; vertical-align: top; }\t\t#de-spell-edit { padding: 2px; width: 340px; height: 255px; border: none !important; outline: none !important; }\t\t#de-spell-rowmeter { padding: 2px 3px 0 0; margin: 2px 0; overflow: hidden; width: 2em; height: 257px; text-align: right; color: #fff; font: 12px courier new; }\t\t#de-spell-rowmeter:lang(en), #de-spell-rowmeter:lang(fr) { background-color: #616b86; }\t\t#de-spell-rowmeter:lang(de) { background-color: #777; }"),
d=d+"#de-btn-logo { margin-right: 3px; cursor: pointer; }\t\t#de-panel { height: 25px; z-index: 9999; border-radius: 15px 0 0 0; cursor: default;}\t\t#de-panel-btns { display: inline-block; padding: 0 2px; margin: 0; height: 25px; border-left: 1px solid #8fbbed; }\t\t#de-panel-btns:lang(de), #de-panel-info:lang(de) { border-color: #ccc; }\t\t#de-panel-btns:lang(fr), #de-panel-info:lang(fr) { border-color: #616b86; }\t\t#de-panel-btns > li { margin: 0 1px; padding: 0; }\t\t#de-panel-btns > li, #de-panel-btns > li > a, #de-btn-logo { display: inline-block; width: 25px; height: 25px; }\t\t#de-panel-btns:lang(en) > li, #de-panel-btns:lang(fr) > li  { transition: all 0.3s ease; }\t\t#de-panel-btns:lang(en) > li:hover, #de-panel-btns:lang(fr) > li:hover { background-color: rgba(255,255,255,.15); box-shadow: 0 0 3px rgba(143,187,237,.5); }\t\t#de-panel-btns:lang(de) > li > a { border-radius: 5px; }\t\t#de-panel-btns:lang(de) > li > a:hover { width: 21px; height: 21px; border: 2px solid #444; }\t\t#de-panel-info { display: inline-block; vertical-align: top; padding: 0 6px; height: 25px; border-left: 1px solid #8fbbed; color: #fff; font: 18px serif; }";
c="R0lGODlhGQAZAIAAAPDw8P///yH5BAEAAAEALAAAAAAZABkAQA";b("#de-btn-logo",c+"I5jI+pywEPWoIIRomz3tN6K30ixZXM+HCgtjpk1rbmTNc0erHvLOt4vvj1KqnD8FQ0HIPCpbIJtB0KADs=");b("#de-btn-settings",c+"JAjI+pa+API0Mv1Ymz3hYuiQHHFYjcOZmlM3Jkw4aeAn7R/aL6zuu5VpH8aMJaKtZR2ZBEZnMJLM5kIqnP2csUAAA7");b("#de-btn-hidden",c+"I5jI+pa+CeHmRHgmCp3rxvO3WhMnomUqIXl2UmuLJSNJ/2jed4Tad96JLBbsEXLPbhFRc8lU8HTRQAADs=");b("#de-btn-favor",c+"IzjI+py+AMjZs02ovzobzb1wDaeIkkwp3dpLEoeMbynJmzG6fYysNh3+IFWbqPb3OkKRUFADs=");b("#de-btn-refresh",
c+"JAjI+pe+AfHmRGLkuz3rzN+1HS2JWbhWlpVIXJ+roxSpr2jedOBIu0rKjxhEFgawcCqJBFZlPJIA6d0ZH01MtRCgA7");b("#de-btn-goback",c+"IrjI+pmwAMm4u02gud3lzjD4biJgbd6VVPybbua61lGqIoY98ZPcvwD4QUAAA7");b("#de-btn-gonext",c+"IrjI+pywjQonuy2iuf3lzjD4Zis0Xd6YnQyLbua61tSqJnbXcqHVLwD0QUAAA7");b("#de-btn-goup",c+"IsjI+pm+DvmDRw2ouzrbq9DmKcBpVfN4ZpyLYuCbgmaK7iydpw1OqZf+O9LgUAOw==");b("#de-btn-godown",c+"ItjI+pu+DA4ps02osznrq9DnZceIxkYILUd7bue6WhrLInLdokHq96tnI5YJoCADs=");b("#de-btn-newthr",c+"IyjI+pG+APQYMsWsuy3rzeLy2g05XcGJqqgmJiS63yTHtgLaPTY8Np4uO9gj0YbqM7bgoAOw==");
b("#de-btn-expimg",c+"I9jI+pGwDn4GPL2Wep3rxXFEFel42mBE6kcYXqFqYnVc72jTPtS/KNr5OJOJMdq4diAXWvS065NNVwseehAAA7");b("#de-btn-maskimg",c+"JQjI+pGwD3TGxtJgezrKz7DzLYRlKj4qTqmoYuysbtgk02ZCG1Rkk53gvafq+i8QiSxTozIY7IcZJOl9PNBx1de1Sdldeslq7dJ9gsUq6QnwIAOw==");(e.W||e.d)&&b("#de-btn-catalog",c+"I2jI+pa+DhAHyRNYpltbz7j1Rixo0aCaaJOZ2SxbIwKTMxqub6zuu32wP9WsHPcFMs0XDJ5qEAADs=");b("#de-btn-audio-off",c+"I7jI+pq+DO1psvQHOj3rxTik1dCIzmSZqfmGXIWlkiB6L2jedhPqOfCitVYolgKcUwyoQuSe3WwzV1kQIAOw==");b("#de-btn-audio-on",
c+"JHjI+pq+AewJHs2WdoZLz7X11WRkEgNoHqimadOG7uAqOm+Y6atvb+D0TgfjHS6RIp8YQ1pbHRfA4n0eSTI7JqP8Wtahr0FAAAOw==");c="Dw8P///wAAACH5BAEAAAIALAAAAAAZABkAQAJElI+pe2EBoxOTNYmr3bz7OwHiCDzQh6bq06QSCUhcZMCmNrfrzvf+XsF1MpjhCSainBg0AbKkFCJko6g0MSGyftwuowAAOw==";b("#de-btn-upd-on","R0lGODlhGQAZAJEAADL/Mv"+c);b("#de-btn-upd-off","R0lGODlhGQAZAJEAAP8yMv"+c);b("#de-btn-upd-warn","R0lGODlhGQAZAJEAAP/0Qf"+c);d+=".de-ppanel { margin-left: 4px; }\t\t.de-post-note { color: inherit; font: italic bold 12px serif; }\t\t.de-ppanel > span, .de-btn-src, .de-btn-expthr, .de-btn-sage { display: inline-block; margin: 0 4px -2px 0 !important; cursor: pointer; ";
f.postBtnsTxt?d+="color: "+getComputedStyle(N("a",n)).getPropertyValue("color")+'; font-size:14px; }\t\t\t.de-btn-hide:after { content: "\u00d7"; }\t\t\t.de-post-hid .de-btn-hide:after { content: "+"; }\t\t\t.de-btn-hide-user:after { content: "[\u00d7]"; }\t\t\t.de-post-hid .de-btn-hide-user:after { content: "[+]"; }\t\t\t.de-btn-rep:after { content: "R"; }\t\t\t.de-btn-expthr:after { content: "E"; }\t\t\t.de-btn-fav:after { content: "F"; }\t\t\t.de-btn-fav-sel:after { content: "[F]"; }\t\t\t.de-btn-sage:after { content: "Sage!"; }\t\t\t.de-btn-src:after { content: "[Sauce]"; }':
(d+="padding: 0 14px 14px 0; }",b(".de-btn-hide-user","R0lGODlhDgAOAKIAAL//v6CgoICAgEtLS////wAAAAAAAAAAACH5BAEAAAQALAAAAAAOAA4AQAM8SLLcS2MNQGsUMYi6uB5BKI5hFgojel5YBbDDNcmvpJLkcgLq1jcuSgPmgkUmlJgFAyqNmoEBJEatxggJADs="),b(".de-post-hid .de-btn-hide-user","R0lGODlhDgAOAKIAAP+/v6CgoICAgEtLS////wAAAAAAAAAAACH5BAEAAAQALAAAAAAOAA4AQAM5SLLcS2ONCcCMIoYdRBVcN4Qkp4ULmWVV20ZTM1SYBJbqvXmA3jk8IMzlgtVYFtkoNCENIJdolJAAADs="),c="R0lGODlhDgAOAKIAAPDw8KCgoICAgEtLS////wAAAAAAAAAAACH5BAEAAAQALAAAAAAOAA4AQAM",b(".de-btn-hide",
c+"8SLLcS2MNQGsUMYi6uB5BKI5hFgojel5YBbDDNcmvpJLkcgLq1jcuSgPmgkUmlJgFAyqNmoEBJEatxggJADs="),b(".de-post-hid .de-btn-hide",c+"5SLLcS2ONCcCMIoYdRBVcN4Qkp4ULmWVV20ZTM1SYBJbqvXmA3jk8IMzlgtVYFtkoNCENIJdolJAAADs="),b(".de-btn-rep",c+"4SLLcS2MNQGsUMQRRwdLbAI5kpn1kKHUWdk3AcDFmOqKcJ5AOq0srX0QWpBAlIo3MNoDInlAZIQEAOw=="),b(".de-btn-expthr",c+"7SLLcS6MNACKLIQjKgcjCkI2DOAbYuHlnKFHWUl5dnKpfm2vd7iyUXywEk1gmnYrMlEEyUZCSdFoiJAAAOw=="),b(".de-btn-fav",c+"5SLLcS2MNQGsUl1XgRvhg+EWhQAllNG0WplLXqqIlDS7lWZvsJkm92Au2Aqg8gQFyhBxAlNCokpAAADs="),
b(".de-btn-fav-sel","R0lGODlhDgAOAKIAAP/hAKCgoICAgEtLS////wAAAAAAAAAAACH5BAEAAAQALAAAAAAOAA4AQAM5SLLcS2MNQGsUl1XgRvhg+EWhQAllNG0WplLXqqIlDS7lWZvsJkm92Au2Aqg8gQFyhBxAlNCokpAAADs="),b(".de-btn-sage","R0lGODlhDgAOAJEAAPDw8EtLS////wAAACH5BAEAAAIALAAAAAAOAA4AQAIZVI55duDvFIKy2vluoJfrD4Yi5lWRwmhCAQA7"),b(".de-btn-src",c+"9SLLcS0MMQMesUoQg6PKbtFnDaI0a53VAml2ARcVSFC0WY6ecyy+hFajnWDVssyQtB5NhTs1mYAAhWa2EBAA7"));a(".de-src-google","//google.ru/favicon.ico");a(".de-src-tineye","//tineye.com/favicon.ico");a(".de-src-iqdb",
"//iqdb.org/favicon.ico");a(".de-src-saucenao","//saucenao.com/favicon.ico");s&&(d+='.de-thread { counter-reset: de-cnt 1; }\t\t.de-ppanel-cnt:after { counter-increment: de-cnt 1; content: counter(de-cnt); vertical-align: 1px; color: #4f7942; font: italic bold 13px serif; cursor: default; }\t\t.de-ppanel-del:after { content: "'+Pd[i]+'"; color: #727579; font: italic bold 13px serif; cursor: default; }');d+="#de-txt-panel { display: block; height: 23px; font-weight: bold; cursor: pointer; }\t\t#de-txt-panel > span:empty { display: inline-block; width: 27px; height: 23px; }\t\t#de-txt-panel:lang(en) { display: none; }\t\t#de-txt-panel:lang(ru) { float: right; }";
c="R0lGODlhFwAWAJEAAPDw8GRkZAAAAP///yH5BAEAAAMALAAAAAAXABYAQAJ";b("#de-btn-bold:empty",c+"T3IKpq4YAoZgR0KqqnfzipIUikFWc6ZHBwbQtG4zyonW2Vkb2iYOo8Ps8ZLOV69gYEkU5yQ7YUzqhzmgsOLXWnlRIc9PleX06rnbJ/KITDqTLUAAAOw==");b("#de-btn-italic:empty",c+"K3IKpq4YAYxRCSmUhzTfx3z3c9iEHg6JnAJYYSFpvRlXcLNUg3srBmgr+RL0MzxILsYpGzyepfEIjR43t5kResUQmtdpKOIQpQwEAOw==");b("#de-btn-under:empty",c+"V3IKpq4YAoRARzAoV3hzoDnoJNlGSWSEHw7JrEHILiVp1NlZXtKe5XiptPrFh4NVKHh9FI5NX60WIJ6ATZoVeaVnf8xSU4r7NMRYcFk6pzYRD2TIUAAA7");b("#de-btn-strike:empty",
c+"S3IKpq4YAoRBR0qqqnVeD7IUaKHIecjCqmgbiu3jcfCbAjOfTZ0fmVnu8YIHW6lgUDkOkCo7Z8+2AmCiVqHTSgi6pZlrN3nJQ8TISO4cdyJWhAAA7");b("#de-btn-spoil:empty","R0lGODlhFwAWAJEAAPDw8GRkZP///wAAACH5BAEAAAIALAAAAAAXABYAQAJBlIKpq4YAmHwxwYtzVrprXk0LhBziGZiBx44hur4kTIGsZ99fSk+mjrMAd7XerEg7xnpLIVM5JMaiFxc14WBiBQUAOw==");b("#de-btn-code:empty",c+"O3IKpq4YAoZgR0KpqnFxokH2iFm7eGCEHw7JrgI6L2F1YotloKek6iIvJAq+WkfgQinjKVLBS45CePSXzt6RaTjHmNjpNNm9aq6p4XBgKADs=");b("#de-btn-quote:empty",c+"L3IKpq4YAYxRUSKguvRzkDkZfWFlicDCqmgYhuGjVO74zlnQlnL98uwqiHr5ODbDxHSE7Y490wxF90eUkepoysRxrMVaUJBzClaEAADs=");
k.Ga&&(d+="@keyframes de-open {\t\t\t\t0% { transform: translateY(-1500px); }\t\t\t\t40% { transform: translateY(30px); }\t\t\t\t70% { transform: translateY(-10px); }\t\t\t\t100% { transform: translateY(0); }\t\t\t}\t\t\t@keyframes de-close {\t\t\t\t0% { transform: translateY(0); }\t\t\t\t20% { transform: translateY(20px); }\t\t\t\t100% { transform: translateY(-4000px); }\t\t\t}\t\t\t@keyframes de-blink {\t\t\t\t0%, 100% { transform: translateX(0); }\t\t\t\t10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }\t\t\t\t20%, 40%, 60%, 80% { transform: translateX(10px); }\t\t\t}\t\t\t@keyframes de-cfg-open { from { transform: translate(0,50%) scaleY(0); opacity: 0; } }\t\t\t@keyframes de-cfg-close { to { transform: translate(0,50%) scaleY(0); opacity: 0; } }\t\t\t@keyframes de-post-open-tl { from { transform: translate(-50%,-50%) scale(0); opacity: 0; } }\t\t\t@keyframes de-post-open-bl { from { transform: translate(-50%,50%) scale(0); opacity: 0; } }\t\t\t@keyframes de-post-open-tr { from { transform: translate(50%,-50%) scale(0); opacity: 0; } }\t\t\t@keyframes de-post-open-br { from { transform: translate(50%,50%) scale(0); opacity: 0; } }\t\t\t@keyframes de-post-close-tl { to { transform: translate(-50%,-50%) scale(0); opacity: 0; } }\t\t\t@keyframes de-post-close-bl { to { transform: translate(-50%,50%) scale(0); opacity: 0; } }\t\t\t@keyframes de-post-close-tr { to { transform: translate(50%,-50%) scale(0); opacity: 0; } }\t\t\t@keyframes de-post-close-br { to { transform: translate(50%,50%) scale(0); opacity: 0; } }\t\t\t.de-pview-anim { animation-duration: .2s; animation-timing-function: ease-in-out; animation-fill-mode: both; }\t\t\t.de-open { animation: de-open .7s ease-out both; }\t\t\t.de-close { animation: de-close .7s ease-in both; }\t\t\t.de-blink { animation: de-blink .7s ease-in-out both; }\t\t\t.de-cfg-open { animation: de-cfg-open .2s ease-out backwards; }\t\t\t.de-cfg-close { animation: de-cfg-close .2s ease-in both; }");
a(".de-ytube-link","//youtube.com/favicon.ico");a(".de-img-arch","data:image/gif;base64,R0lGODlhEAAQALMAAF82SsxdwQMEP6+zzRA872NmZQesBylPHYBBHP///wAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAkALAAAAAAQABAAQARTMMlJaxqjiL2L51sGjCOCkGiBGWyLtC0KmPIoqUOg78i+ZwOCUOgpDIW3g3KJWC4t0ElBRqtdMr6AKRsA1qYy3JGgMR4xGpAAoRYkVDDWKx6NRgAAOw==");a(".de-img-audio","data:image/gif;base64,R0lGODlhEAAQAKIAAGya4wFLukKG4oq3802i7Bqy9P///wAAACH5BAEAAAYALAAAAAAQABAAQANBaLrcHsMN4QQYhE01OoCcQIyOYQGooKpV1GwNuAwAa9RkqTPpWqGj0YTSELg0RIYM+TjOkgba0sOaAEbGBW7HTQAAOw==");
d+=".de-img-arch, .de-img-audio { color: inherit; text-decoration: none; font-weight: bold; }\t\t.de-img-pre, .de-img-full { display: block; margin: "+(e.e?0:"2px 10px")+"; border: none; outline: none; cursor: pointer; }\t\t.de-img-full { float: left; }\t\t.de-img-center { position: fixed; z-index: 9999; background-color: #ccc; border: 1px solid black; }\t\t.de-mp3, .de-ytube-obj { margin: 5px 20px; }\t\ttd > a + .de-ytube-obj { display: inline-block; }\t\tvideo { background: black; }";a(".de-wait",
"data:image/gif;base64,R0lGODlhEAAQALMMAKqooJGOhp2bk7e1rZ2bkre1rJCPhqqon8PBudDOxXd1bISCef///wAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFAAAMACwAAAAAEAAQAAAET5DJyYyhmAZ7sxQEs1nMsmACGJKmSaVEOLXnK1PuBADepCiMg/DQ+/2GRI8RKOxJfpTCIJNIYArS6aRajWYZCASDa41Ow+Fx2YMWOyfpTAQAIfkEBQAADAAsAAAAABAAEAAABE6QyckEoZgKe7MEQMUxhoEd6FFdQWlOqTq15SlT9VQM3rQsjMKO5/n9hANixgjc9SQ/CgKRUSgw0ynFapVmGYkEg3v1gsPibg8tfk7CnggAIfkEBQAADAAsAAAAABAAEAAABE2QycnOoZjaA/IsRWV1goCBoMiUJTW8A0XMBPZmM4Ug3hQEjN2uZygahDyP0RBMEpmTRCKzWGCkUkq1SsFOFQrG1tr9gsPc3jnco4A9EQAh+QQFAAAMACwAAAAAEAAQAAAETpDJyUqhmFqbJ0LMIA7McWDfF5LmAVApOLUvLFMmlSTdJAiM3a73+wl5HYKSEET2lBSFIhMIYKRSimFriGIZiwWD2/WCw+Jt7xxeU9qZCAAh+QQFAAAMACwAAAAAEAAQAAAETZDJyRCimFqbZ0rVxgwF9n3hSJbeSQ2rCWIkpSjddBzMfee7nQ/XCfJ+OQYAQFksMgQBxumkEKLSCfVpMDCugqyW2w18xZmuwZycdDsRACH5BAUAAAwALAAAAAAQABAAAARNkMnJUqKYWpunUtXGIAj2feFIlt5JrWybkdSydNNQMLaND7pC79YBFnY+HENHMRgyhwPGaQhQotGm00oQMLBSLYPQ9QIASrLAq5x0OxEAIfkEBQAADAAsAAAAABAAEAAABE2QycmUopham+da1cYkCfZ94UiW3kmtbJuRlGF0E4Iwto3rut6tA9wFAjiJjkIgZAYDTLNJgUIpgqyAcTgwCuACJssAdL3gpLmbpLAzEQA7");
d+=".de-abtn { text-decoration: none !important; outline: none; }\t\t#de-alert { position: fixed; right: 0; top: 0; z-index: 9999; font: 14px arial; cursor: default; }\t\t#de-alert > div { float: right; clear: both; width: auto; min-width: 0pt; padding: 10px; margin: 1px; border: 1px solid grey; white-space: pre-wrap; }\t\t.de-alert-btn { display: inline-block; vertical-align: top; font-size: 150%; color: green; cursor: pointer; }\t\t.de-alert-msg { display: inline-block; margin-top: .25em; }\t\t.de-content { text-align: left; }\t\t.de-content textarea { display: block; margin: 2px 0; font: 12px courier new; "+
(k.i?"":"resize: none !important; ")+'}\t\t.de-content-block > a { color: inherit; font-weight: bold; }\t\t#de-content-fav, #de-content-hid { font-size: 16px; padding: 10px; border: 1px solid gray; }\t\t.de-editor { display: block; font: 12px courier new; width: 619px; height: 337px; }\t\t.de-entry { margin: 2px 0; }\t\t.de-entry > :first-child { float: none !important; }\t\t.de-entry > div > a { text-decoration: none; }\t\t.de-fav-inf-posts, .de-fav-inf-page { float: right; margin-right: 5px; font: bold 16px serif; }\t\t.de-fav-inf-old { color: #4f7942; }\t\t.de-fav-inf-new { color: blue; }\t\t.de-fav-title { margin-right: 15px; }\t\t#de-menu { padding: 0 !important; margin: 0 !important; width: auto; min-width: 0; z-index: 9999; border: 1px solid grey;}\t\t#de-menu span, #de-menu a { display: block; padding: 3px 10px; color: inherit; text-decoration: none; font: 13px arial; white-space: nowrap; cursor: pointer; }\t\t#de-menu span:hover, #de-menu a:hover { background-color: #222; color: #fff; }\t\t.de-omitted { color: grey; font-style: italic; }\t\t#de-parea { text-align: center;}\t\t.de-ref-hid { text-decoration: line-through !important; }\t\t.de-refmap { margin: 10px 4px 4px 4px; font-size: 70%; font-style: italic; }\t\t.de-refmap:before { content: "'+
Qd[i]+' "; }\t\t.de-refmap > a { text-decoration: none; }\t\t#de-sagebtn { margin-right: 7px; cursor: pointer; }\t\t.de-selected { '+(k.i?"border-left: 4px solid red; border-right: 4px solid red; }":"box-shadow: 6px 0 2px -2px red, -6px 0 2px -2px red; }")+"\t\t#de-txt-resizer { display: inline-block !important; float: none !important; padding: 6px; margin: -2px -12px; vertical-align: bottom; border-bottom: 2px solid #555; border-right: 2px solid #444; cursor: se-resize; }\t\t.de-viewed { color: #888 !important; }\t\t.de-pview { position: absolute; width: auto; min-width: 0; z-index: 9999; border: 1px solid grey; margin: 0 !important; display: block !important; }\t\t.de-pview-info { padding: 3px 6px !important; }\t\t.de-pview-link { font-weight: bold; }\t\t.de-hidden"+
(e.o&&!e.D?", .de-hidden + br":"")+', #de-iframe-pform, #de-iframe-dform, small[id^="rfmap"], div[id^="preview"], div[id^="pstprev"], body > hr, .theader, .postarea { display: none !important; }';e.C?d+="#newposts_get, .extrabtns, .ui-resizable-handle, .replymode, blockquote + a { display: none !important; }\t\t\t.ui-wrapper { display: inline-block; width: auto !important; height: auto !important; padding: 0 !important; }":e.D&&(d+='#de-pform > div, .mentioned, form > div[style="text-align: center;"], form > div[style="text-align: center;"] + hr { display: none !important; }');
e.e?d+='.de-post-hid > div:not(.postheader), img[id^="translate_button"], img[src$="button-expand.gif"], img[src$="button-close.gif"], body > center > hr, h2, form > div:first-of-type > hr { display: none !important; }\t\t\tdiv[id^="Wz"] { z-index: 10000 !important; }\t\t\t.de-thr-hid { margin-bottom: '+(!s?"7":"2")+"px; }\t\t\t.file_reply + .de-ytube-obj, .file_thread + .de-ytube-obj { margin: 5px 20px 5px 5px; float: left; }\t\t\t.de-ytube-obj + div { clear: left; }":e.d?d+=".de-post-hid > .file, .de-post-hid > blockquote, .de-post-hid > .de-ytube-obj, #mpostform, .navLinks, .postingMode { display: none !important; }":
e.o?d+="form, form table { margin: 0; }\t\t\t.de-post-hid > .intro ~ *, .post-hover, div.banner { display: none !important; }":e.n?d+=".de-post-hid > .replyheader ~ *, .opqrbtn, .qrbtn, .ignorebtn, .hidethread, noscript, #content > hr { display: none !important; }\t\t\t.de-thr-hid { margin: 1em 0; }":(d+=".de-post-hid > .de-ppanel ~ * { display: none !important; }",e.N?d+=".ABU_refmap, .postpanel, #CommentToolbar, #usrFlds + tbody > tr:first-child, #postform > div:nth-child(2), #BottomNormalReply, body > center { display: none !important; }\t\t\t\t#de-txt-panel { font-size: 16px !important; }\t\t\t\t.de-abtn { transition: none; }":
e.W?d+='#postform nobr, .replieslist, #captcha_status, .postnode + a, .postblock + td > small, .content-background > hr, span[style="float: right;"] { display: none !important; }\t\t\t\t.ui-wrapper { position: static !important; margin: 0 !important; overflow: visible !important; }\t\t\t\t.ui-resizable { display: inline !important; }\t\t\t\tform textarea { resize: both !important; }':e.g?d+="#hideinfotd, .reply_, .delete > img, .popup, .search_google, .search_iqdb { display: none; }\t\t\t\t.delete { background: none; }\t\t\t\t.delete_checkbox { position: static !important; }\t\t\t\t.file + .de-ytube-obj { float: left; margin: 5px 20px 5px 5px; }\t\t\t\t.de-ytube-obj + div { clear: left; }":
e.Z?d+=".reply { background-color: "+getComputedStyle(n.body).getPropertyValue("background-color")+"; }":e.k?d+="span { font-size: inherit; }\t\t\t\t.de-content, .de-cfg-body { font-family: arial; }\t\t\t\t.ftbl { width: auto; margin: 0; }\t\t\t\t.reply { background: #f0e0d6; }":e.B?d+=".de-ppanel { float: left; margin-top: 0.45em; }\t\t\t\ta + .threadlinktext { position: relative; top: 17px; }\t\t\t\t.postthreadlinks, .pagethreadlinks, .pwpostblock { display: none; }\t\t\t\t.de-btn-src { padding: 0px 10px 10px 0px !important; background-size: cover !important; }":
e.Ea?d+="br.clear { display: none !important; }":e.ab?d+="#bodywrap3 > hr, .blotter { display: none !important; }":e.ga&&(d+='span[id$="_display"] { display: none; }'));16>k.c&&(d=d.replace(/(transition|keyframes|transform|animation|linear-gradient)/g,k.yb+"$1"),k.i||(d=d.replace(/\(to bottom/g,"(top").replace(/\(to top/g,"(bottom")));U(fc(d),{id:"de-css"});U(fc(""),{id:"de-css-dynamic"});d=b=a=l;ha();K(y)}function ha(){var a;a=f.attachPanel?".de-content { position: fixed; right: 0; bottom: 25px; z-index: 9999; max-height: 95%; overflow-x: visible; overflow-y: auto; }\t\t#de-panel { position: fixed; right: 0; bottom: 0; }":
".de-content { clear: both; float: left; }\t\t#de-panel { float: right; clear: both; }";a=3===f.addPostForm?a+"#de-qarea { position: fixed; right: 0; bottom: 25px; z-index: 9990; padding: 3px; border: 1px solid gray; }\t\t\t#de-qarea-target { font-weight: bold; }\t\t\t#de-qarea-close { float: right; color: green; font: bold 20px arial; cursor: pointer; }":a+"#de-qarea { float: none; clear: left; width: 100%; padding: 3px 0 3px 3px; margin: 2px 0; }";f.panelCounter||(a+="#de-panel-info { display: none; }");
f.expandPanel||(a+="#de-panel-btns, #de-panel-info { display: none; }");f.maskImgs&&(a+='.de-img-pre, .de-ytube-obj, img[src*="spoiler"], img[src*="thumb"], img[src^="blob"] { opacity: 0.07 !important; }\t\t\t.de-img-pre:hover, .de-ytube-obj:hover, img[src*="spoiler"]:hover, img[src*="thumb"]:hover, img[src^="blob"]:hover { opacity: 1 !important; }');f.delHiddPost&&(a+=".de-thr-hid, .de-thr-hid + div + br, .de-thr-hid + div + br + hr { display: none; }");f.noPostNames&&(a+=".commentpostername, .postername, .postertrip { display: none; }");
f.noSpoilers&&(a+=".spoiler"+(e.d?", s":"")+" { background: #888 !important; color: #ccc !important; }");f.noPostScrl&&(a+="blockquote, blockquote > p, .code_part { max-height: 100% !important; overflow: visible !important; }");f.noBoardRule&&(a+=(e.k?".chui":".rules, #rules, #rules_row")+" { display: none; }");e.N&&(f.openImgs&&(a+=".reply .img { max-width: 200px; max-height: 200px; }\t\t\t\t.oppost .img { max-width: 250px; max-height: 250px }"),f.addYouTube&&(a+='div[id^="post_video"] { display: none !important; }'));
r("de-css-dynamic").textContent=a}function xe(a,b){var c=f.scrUpdIntrv;if(!a){switch(c){case 0:c=1728E5;break;case 1:c=3456E5;break;case 2:c=12096E5;break;case 3:c=24192E5;break;default:c=5184E6}if(Date.now()-+Z.lastUpd<c)return}GM_xmlhttpRequest({method:"GET",url:"https://raw.github.com/SthephanShinkufag/Dollchan-Extension-Tools/master/Dollchan_Extension_Tools.meta.js",headers:{"Content-Type":"text/plain"},onreadystatechange:function(c){if(4===c.readyState)if(200===c.status){var c=c.responseText.match(/@version\s+([0-9.]+)/)[1].split("."),
g=yb.split("."),e=g.length>c.length?g.length:c.length,f=0,h=o;if(c){for(za("lastUpd",Date.now());f<e;){if((+c[f]||0)>(+g[f]||0)){h=j;break}else if((+c[f]||0)<(+g[f]||0))break;f++}h?b('<a style="color: blue; font-weight: bold;" href="https://raw.github.com/SthephanShinkufag/Dollchan-Extension-Tools/master/Dollchan_Extension_Tools.user.js">'+Rd[i]+"</a>"):a&&b(Sd[i])}else a&&b('<div style="color: red; font-weigth: bold;">'+va[i]+"</div>")}else a&&b('<div style="color: red; font-weigth: bold;">'+va[i]+
"</div>")}})}function jg(){if(/^(?:about|chrome|opera|res)/i.test(window.location))return o;if(!window.localStorage||!("object"===typeof localStorage&&window.sessionStorage))return GM_log("WEBSTORAGE ERROR: please, enable webstorage!"),o;kg();switch(window.name){case "de-iframe-pform":case "de-iframe-dform":return ob(('window.top.postMessage("J'+window.name+"$#$"+Me(n,j).join("$#$")+'", "*");').replace(/\n|\r/g,"\\n")),o;case "de-iframe-fav":var a=setInterval(function(){v(r("de-fav-script"));U(ob('window.top.postMessage("I'+
(n.body.offsetHeight+5)+'", "*");'),{id:"de-fav-script"})},1500);S(window,{load:setTimeout.bind(window,clearInterval,3E4,a)});$a=j;h={}}if(e.g&&"/settings"===window.location.pathname)return S(n.querySelector('input[type="button"]'),{click:function(){n.cookie=escape("de-rating")+"="+escape(r("rating").value)+";expires="+(new Date(Date.now()+1E12)).toGMTString()+";path=/"}}),o;if(!y||r("de-panel"))return o;lg();mg();return(Ha("DESU_Exclude")||"").contains(e.b)?o:j}function lg(){var a=window.navigator.userAgent;
String.prototype.contains||(String.prototype.contains=function(a){return-1!==this.indexOf(a)},String.prototype.startsWith=function(a){return 0===this.indexOf(a)});k={c:+(a.match(/mozilla.*? rv:(\d+)/i)||[,0])[1],i:window.opera?+window.opera.version():0,r:a.contains("WebKit/")};k.ha=k.r&&!a.contains("Chrome/");k.xa=(k.c||k.ha)&&"function"===typeof GM_setValue;k.ya=k.xa||!!Fa;k.yb=k.r?"-webkit-":k.i?12.1>k.i?"-o-":"":k.c&&16>k.c?"-moz-":"";if(!k.i||12<=k.i)k.Ga=j,k.la=k.r?"webkitAnimationName":k.i&&
12.1>k.i?"OAnimationName":k.c&&16>k.c?"MozAnimationName":"animationName",k.ka=k.r?"webkitAnimationEnd":k.i&&12.1>k.i?"oAnimationEnd":"animationend",k.$=function(a,c){a.addEventListener(k.ka,function g(){this.removeEventListener(k.ka,g,o);c(this);c=l},o)};k.da=14<k.c||k.r&&!k.ha;k.Hc=17<k.c||k.da;17<k.c&&ob('window["de-worker"] = function(url) {\t\t\t\tthis.wrk = new Worker(url);\t\t\t};\t\t\twindow["de-worker-proto"] = window["de-worker"].prototype = {\t\t\t\tset onmessage(Fn) {\t\t\t\t\tthis.wrk.onmessage = Fn;\t\t\t\t},\t\t\t\tset onerror(Fn) {\t\t\t\t\tthis.wrk.onerror = Fn;\t\t\t\t},\t\t\t\t_postMessage: function() {\t\t\t\t\tthis.wrk.postMessage.apply(this.wrk, arguments);\t\t\t\t}\t\t\t};');
k.forEach=k.i?function(a,c){for(var d in a)a.hasOwnProperty(d)&&c.call(a,d)}:function(a,c){Object.keys(a).forEach(c,a)};k.Va=k.ha?function(a){return a[1]==="/"?"http:"+a:a[0]==="/"?"http://"+e.host+a:a}:function(a){return a};k.$b=12<=k.c?function(a){return(new DOMParser).parseFromString(a,"text/html")}:function(a){var c=n.implementation.createHTMLDocument("");c.documentElement.innerHTML=a;return c}}function mg(){e.Ib&&(window.setTimeout=function(a,b){var c=document.createEvent("HTMLEvents"),d=arguments;
"function"===typeof a&&(window.document.body.addEventListener("timeoutEvent",function(){a.apply(l,Ea.slice.call(d,2));a=d=l},o),c.initEvent("timeoutEvent",j,o),window.document.body.dispatchEvent(c));return 1});window.GM_log||(window.GM_log=function(a){console.error(a)});window.GM_xmlhttpRequest||(window.GM_xmlhttpRequest=de);k.r&&(window.URL=window.webkitURL);17<k.c&&(window.Worker=new Proxy(unsafeWindow["de-worker"],{}),window.Worker.prototype.postMessage=function(){unsafeWindow["de-worker-proto"]._postMessage.apply(this,
arguments)})}function gf(a){if(!a||e.N&&x("locked",a))return{};var b=e.Z?"li":"tr",c=".//"+b+'[not(contains(@style,"none"))]//input[not(@type="hidden") and ',d=a.querySelector("#recaptcha_response_field");return{K:o,Uc:!e.o||!!s,w:s,form:a,T:d,j:a.querySelector('input[name*="aptcha"]:not([name="recaptcha_challenge_field"])')||d,f:a.querySelector(b+':not([style*="none"]) textarea:not([style*="display:none"])'),sa:a.querySelector(b+' input[type="submit"]'),file:a.querySelector(b+' input[type="file"]'),
X:a.querySelector(b+' input[type="password"]'),Bc:y.querySelector('input[type="password"]'),wa:X('.//tr[@id="trgetback"]|.//input[@type="radio" or @name="gotothread"]/ancestor::tr[1]',a),name:X(c+'(@name="field1" or @name="name" or @name="internal_n" or @name="nya1" or @name="akane")]',a),Q:X(c+(e.ia?'@name="sage"]':'(@name="field2" or @name="em" or @name="sage" or @name="email" or @name="nabiki" or @name="dont_bump")]'),a),gb:X(c+'(@name="field3" or @name="sub" or @name="subject" or @name="internal_s" or @name="nya3" or @name="kasumi")]',
a),ta:a.querySelector(b+' input[name="video"], '+b+' input[name="embed"]'),V:e.Z?function(a){return X("ancestor::li[1]",a)}:function(a){return X("ancestor::tr[1]",a)}}}function kg(){var a=window.location.hostname.match(/(?:(?:[^.]+\.)(?=org\.|net\.|com\.))?[^.]+\.[^.]+$|^\d+\.\d+\.\d+\.\d+$|localhost/)[0];switch(a){case "4chan.org":e.d=j;break;case "krautchan.net":e.e=j;break;case "britfa.gs":e.B=j;break;case "420chan.org":e.n=j;break;default:e.g=!!n.querySelector('script[src*="hanabira"]'),e.k=!!n.querySelector('form[action*="futaba.php"]'),
e.o=!!n.querySelector('form[name*="postcontrols"]')}e.Aa=e.B?".threadz":e.g||e.e?'form[action*="delete"]':e.o?'form[name="postcontrols"]':e.k?"form:not([enctype])":'#delform, form[name="delform"]';e.Wc=e.g?".post-error, h2":e.C?'h1, h2, div[style*="1.25em"]':e.d?"#errmsg":e.e?".message_text":e.n?"pre":'h1, h2, font[size="5"]';e.Fb=e.d||e.e||e.k||e.o?function(a){return a.querySelector('input[type="checkbox"]').name.match(/\d+/)[0]}:e.g||e.B?function(a){return a.querySelector("a[name]").name.match(/\d+/)[0]}:
e.n?function(a){return a.querySelector("a[id]").id.match(/\d+/)[0]}:function(a){return a.querySelector('input[type="checkbox"]').value};if(y=n.querySelector(e.Aa)){e.C=!!n.querySelector('script[src*="kusaba"]');e.host=window.location.hostname;switch(e.b=a){case "0-chan.ru":case "0chan.hk":case "0chan.ru":e.W=e.C=j;break;case "2--ch.ru":e.ga=j;break;case "410chan.org":e.ia=j;break;case "hiddenchan.i2p":e.Ib=j;break;case "dfwk.ru":e.zb=j;break;case "7chan.org":e.Z=j;break;case "ponychan.net":e.ab=j;
break;case "mlpg.co":e.D=j;break;case "ernstchan.com":case "ernstchan.net":e.na=j;break;default:e.N=!!r("ABU_css"),e.Ea=!!n.querySelector('form[action*="imgboard.php?delete"]')}e.bd=e.g||e.W||e.Ea||e.ga||"02ch.net"===a;e.t=e.e?"postreply":e.o||e.d?"post reply":"reply";e.vc=e.d||e.D||e.ab?"op":e.C?"postnode":"oppost";e.Xc=e.e?".thread_body":e.n?'[id*="thread"]':!e.na&&n.querySelector(".thread")?".thread":n.querySelector('div[id*="_info"][style*="float"]')?'div[id^="t"]:not([style])':'[id^="thread"]'+
(e.Z?":not(#thread_controls)":"");e.Sb=e.d?".postInfo > .postNum":e.o?".intro > .post_no + a":e.e?".postnumber":e.k?'.del, font[color="#117743"]':".reflink";e.F=e.g?".postbody":e.o?".body":e.Z?".message":"blockquote";e.aa=e.d?"fileText":e.e||e.o||e.g||e.B?"fileinfo":"filesize";e.Pb=e.B?".fileinfo":e.e?".filename > a":(e.k?"":"."+e.aa)+' a[href$=".jpg"]:nth-of-type(1), '+(e.k?"":"."+e.aa)+' a[href$=".png"]:nth-of-type(1), '+(e.k?"":"."+e.aa)+' a[href$=".gif"]:nth-of-type(1)';e.Rb=e.k?"form:nth-of-type(1)":
e.d||e.o?'form[name="post"]':"#postform";e.wc=e.e?"postsubject":e.o||e.d?"subject":e.g?"replytitle":"filetitle";e.Qb=e.k?'font[color="#707070"]':e.e?".omittedinfo":e.g?".abbrev":e.d?".summary.desktop":".omittedposts";e.Yc=e.e?'p[id^="post_truncated"]':e.g?".abbrev > span":".abbrev, .abbr, .omittedposts, .shortened";e.bb=e.e?".ban_mark":e.d?'strong[style="color: red;"]':o;e.Vc=(e.d?".deleteform.desktop > ":"")+'input[type="submit"]';e.ra=e.e?"thread-":e.na?"faden/":"res/";e.Zc=RegExp(">https?:\\/\\/[^\\/]*"+
e.b+"\\/([a-z0-9]+)\\/"+ic(e.ra)+"(\\d+)(?:[^#<]+)?(?:#i?(\\d+))?<","g");e.O=function(a,c){return sb(a)+(e.k?"futaba.php?res="+c:e.ra+c+(e.ga?".html":Lb))};e.oa=function(a,c){return sb(a)+(0<c?e.na?"wakaba.pl?task=show&page="+c:c+Lb:e.k?"futaba.htm":e.g?"index.xhtml":"")};e.Db=e.g?function(a){a.previousElementSibling||(a=a.parentNode);return a.parentNode}:e.e?function(a){return a.parentNode}:ca;e.Ya=e.k?function(a){return a.querySelectorAll("td:nth-child(2)")}:e.o||e.d?function(a){return V("reply",
a)}:function(a){return V(e.t,a)};e.Cb=e.B?function(a,c){var d,e=U(c.createElement("div"),{style:"clear: left;"}),f=x("originalpost",a);for(L(x("postmenu",f),e);"TABLE"!==(d=a.firstChild).tagName;)L(e,d),e=d;e=c.createElement("div");for(ea(a.firstChild,e);d=f.firstChild;)e.appendChild(d);v(N("table",a));return e}:function(a,c){var d,g,f;if(g=x(e.vc,a))return g;g=c.createElement("div");for(f=a.querySelector(e.Ba+', div[id^="repl"]');(d=a.firstChild)!==f;)g.appendChild(d);a.hasChildNodes()?ea(a.firstChild,
g):a.appendChild(g);return g};e.ba=e.k?function(a){return N("input",a).name}:function(a){return a.id.match(/\d+/)[0]};e.Eb=e.d?function(a){return!!x("id_Heaven",a)}:e.e?function(a){return!!x("sage",a)}:e.ia?function(a){return!!X('.//span[@class="filetitle" and contains(text(),"'+unescape("%u21E9")+'")]',a)}:e.W?function(a){return!!a.querySelector('a[href="mailto:sage"], a[href^="http://cloudflare.com"]')}:function(a){return(a=a.querySelector('a[href^="mailto:"], a[href="sage"]'))&&/sage/i.test(a.href)}}}
function Dc(a,b,c,d){a.L=c;a.count=d;a.m=a.querySelector(e.F);a.P=La(a);a.Xb=e.Eb(a);a.setAttribute("de-post",l);H[a.a=b]=a}function hf(a,b,c){var d=a.querySelectorAll(e.Xc);if(2>C.length&&(e.Ba=e.d||e.D?".replyContainer":e.B?'div[id^="replies"] > table':e.ga?"table:not(.postfiles)":e.k||a.querySelector("td."+e.t)?"form > table, div > table":o,e.J=e.d||e.D?function(a){return a.parentNode}:e.Ba?function(a){return a.p?a:X("ancestor::table[1]",a)}:function(a){return a},e.Ba&&(fb=a.querySelector(e.Ba))&&
b!==n))fb=n.importNode(fb,j);0===d.length?Ea.slice.call(N("hr",a).parentNode.childNodes).reduce(function(a,c,d,e){if(e[d+1]){if("HR"===c.tagName)return ea(c,a.lastChild),ea(c,a),L(a,a.lastChild),this(a),b.createElement("div");a.appendChild(c);return a}L(c,a);a.appendChild(c)}.bind(c),b.createElement("div")):F(d,c)}function nf(a){try{F(a.getElementsByTagName("script"),v),hf(a,n,function(a){if(e.n||e.o)L(a,a.lastChild),v(x("clear",a));var b,g,f,p=e.Cb(a,n);Dc(p,a.a=e.Fb(p),a,0);p.p=j;p.Da=(x(e.wc,p)||
{}).textContent||ya(p).substring(0,70).replace(/\s+/g," ");b=0;for(g=Ea.slice.call(e.Ya(a));f=g[b++];)Dc(f,e.ba(f),a,b+1);C.push(p);ra.push(p);C=C.concat(g);a.classList.add("de-thread");a.R=b+ee(a);a.Mb=p})}catch(b){return GM_log("DELFORM ERROR:\n"+(k.r?b.stack:b.name+": "+b.message+"\n"+(k.c?b.stack.replace(/^([^@]*).*\/(.+)$/gm,function(a,b,e){return"    at "+(b?b+" ("+e+")":e)}):b.stack))),o}a.removeAttribute("id");return j}function yf(a){Qb&&(a=Qb.Fc(a).Bb(a,l));if(e.d||e.e)a=a.replace(/(^|>|\s|&gt;)(https*:\/\/.*?)(?=$|<|\s)/ig,
'$1<a href="$2">$2</a>');D.Za&&(a=D.replace(a));f.crossLinks&&(a=a.replace(e.Zc,function(a,c,d,e){return">&gt;&gt;/"+c+"/"+(e||d)+"<"}));return a}function Mb(a){e.Wb&&(a.innerHTML=yf(a.innerHTML));return a}function ng(){K(n.body);var a=y.outerHTML||(new XMLSerializer).serializeToString(y);$a?(n.body.insertAdjacentHTML("afterbegin",a),y=n.body.firstChild,S(window,{load:function(){for(;y.nextSibling;)v(y.nextSibling);K(n.body)}})):(y.insertAdjacentHTML("beforebegin",yf(a)),y.style.display="none",y.id=
"de-dform-old",y=y.previousSibling,K(n.body),S(window,{load:function(){v(r("de-dform-old"))}}))}function of(a){var b,c;if(e.N){if(s&&(a=x("de-thread",a).nextSibling)){for(;b=a.nextSibling;)v(a),a=b;a.insertAdjacentHTML("afterend","<hr>")}}else if(e.B){b=0;for(c=V("reflink",a);a=c[b++];)a=a.firstChild,a.onclick=l,a.href=e.O(B,a.textContent),a.target="_blank"}}function zf(){la=j;f.favIcoBlink&&Ga&&(clearInterval(ib),F(n.head.querySelectorAll('link[rel="shortcut icon"]'),v),n.head.appendChild(w("link",
{href:Ga,rel:"shortcut icon"},l)));1===f.updThread&&setTimeout(function(){n.title=Ta},200)}function og(){h=gf(n.querySelector(e.Rb));ba=n.querySelector('form[name="oeform"], form[action*="paint"]');s?(f.rePageTitle?(Ta="/"+B+" - "+H[s].Da,n.title=Ta):Ta=n.title,1===f.updThread&&(10<k.c||k.r&&!k.ha?(n.addEventListener((k.r?"webkit":18>k.c?"moz":"")+"visibilitychange",function(){n.hidden||n.Jc||n.ed?la=o:zf()},o),la=!(n.hidden||n.Jc||n.ed)):(window.onblur=function(){la=o},window.onfocus=zf,la=o,S(window,
{mousemove:function b(){la=j;dc(window,{mousemove:b})}})),te()),2===f.updThread&&L(x("de-thread",n),S(P('<span>[<a href="#">'+Td[i]+"</a>]</span>"),{click:function(b){A(b);I(ua[i],"newposts",j);Ab(l)}}))):setTimeout(window.scrollTo,20,0,0);f.updScript&&xe(o,function(b){I(b,"updavail",o)})}function Af(){var a=hc=Date.now();if(jg()){ec=n.createElement("div");var b=(window.location.pathname||"").match(RegExp("^(?:\\/?([^\\.]*?)\\/?)?("+ic(e.ra)+")?(\\d+|index|wakaba|futaba)?(\\.(?:[a-z]+))?$"));B=b[1]||
(e.zb?"df":"");s=b[2]?b[3]:e.k?(window.location.search.match(/\d+/)||[o])[0]:o;Aa=b[3]&&!s?+(e.na?(window.location.search.match(/\d+/)||[0])[0]:b[3])||0:0;Lb=e.d||e.na?"":e.k?".htm":e.n?".php":b[4]||".html";Ga=(n.querySelector('head link[rel="shortcut icon"]')||{}).href;M("initBoard");Z=ub("DESU_Config");f=Z[e.b]&&!oa(Z[e.b])?Z[e.b]:he();if(!f&&(f={},k.ya)){for(var c in Z.global)f[c]=Z.global[c];f.captchaLang=e.bd?2:1;f.timePattern=f.timeOffset="";f.correctTime=0}f.__proto__=zb;k.da||(f.preLoadImgs=
0,2===f.ajaxReply&&(f.ajaxReply=1));k.Ga||(f.animations=0);k.c||(zb.favIcoBlink=0);k.r?f.favIcoBlink=0:f.desktNotif=0;k.i&&(12>k.i&&(f.YTubeTitles=0),2===f.YTubeType&&(f.YTubeType=1),f.updScript=0);15>f.updThrDelay&&(f.updThrDelay=15);f.saveSage||(f.sageReply=0);f.passwValue||(f.passwValue=Math.round(1E15*Math.random()).toString(32));f.stats||(f.stats={view:0,op:0,reply:0});s&&f.stats.view++;za(e.b,f);i=f.language;f.correctTime&&(Qb=new Ba(f.timePattern,f.timeOffset,i,sessionStorage.timeRPattern,
sessionStorage.timeRPHash));e.g&&(e.Dc=new Ba("yyyy-nn-dd-hh-ii-ss",f.timeOffset||0,f.correctTime?i:1,"1_d _m _y (_w) _h:_i ",152203056));D=new J(!!f.hideBySpell);e.Wb=e.d||e.e||Qb||D.Za||f.crossLinks;M("readCfg");if(e.Wb||$a)ng(),M("replaceDelform");if(nf(y)){M("parseDelform");lc();M("readFavorites");f.keybNavig&&(Tf(),M("initKeyNavig"));of(y);$a||(og(),M("initPage"),pe(),M("addPanel"),b=q("div",{id:"de-parea"},[q("div",{id:"de-togglereply",style:"display: none;"},[T("["),w("a",{text:ud[i],href:"#",
"class":"de-abtn"},{click:re}),T("]")]),q("div",{id:"de-pform"},[h.form,ba]),n.createElement("hr")]),s&&1===f.addPostForm?L(e.d?N("hr",y):y,b):ea(y,b),(s&&1<f.addPostForm||!s&&f.noThrdForm)&&K(b),b.insertAdjacentHTML("afterend",'<div id="de-qarea" class="'+e.t+'" style="display: none;"></div>'),3===f.addPostForm&&xa(r("de-qarea"),[P('<span id="de-qarea-target">'+vd[i]+' <a class="de-abtn"></a></span>'),w("span",{id:"de-qarea-close",text:"\u00d7"},{click:Ja})]),e.ga&&(F(y.querySelectorAll('input[type="hidden"]'),
v),y.appendChild(x("userdelete",n.body))),h.form?Ie(0,0,l):ba&&Da(l,B,C[0].a,o,Ie),M("initPostform"));if(f.preLoadImgs||f.openImgs)yc(l),M("preloadImages");Xf();C.forEach(xc);wb(JSON.stringify(E));M("addPostButtons");f.expandImgs&&(C.forEach(Fb),M("eventPostImg"));f.expandPosts&&!s&&(C.forEach(lf),M("expandPost"));f.addMP3&&(Cb(l),M("addLinkMP3"));f.addYouTube&&(Bb(l),M("addLinksTube"));f.addImgs&&(Db(y),M("addLinkImg"));f.imgSrcBtns&&(Eb(y),M("addImgSearch"));2===f.linksNavig&&(Bc(H),M("genRefMap"));
f.linksNavig&&(eb(y),M("eventRefLink"));ie();f.markViewed&&oe();pf();Ma();Na();M("readPosts");ye();M("scriptCSS");qb.push(Ud[i]+(Date.now()-a)+"ms")}}}var yb="12.12.10.0",zb={language:0,hideBySpell:1,menuHiddBtn:1,hideRefPsts:0,delHiddPost:0,updThread:1,updThrDelay:60,favIcoBlink:1,desktNotif:0,expandPosts:2,expandImgs:2,maskImgs:0,preLoadImgs:0,findImgFile:0,openImgs:0,openGIFs:0,postBtnsTxt:0,imgSrcBtns:1,noSpoilers:1,noPostNames:0,noPostScrl:1,keybNavig:0,correctTime:0,timeOffset:"",timePattern:"",
linksNavig:2,linksOver:100,linksOut:1500,markViewed:0,strikeHidd:0,noNavigHidd:0,crossLinks:0,insertNum:1,addMP3:1,addImgs:1,addYouTube:3,YTubeType:0,YTubeWidth:360,YTubeHeigh:270,YTubeHD:0,YTubeTitles:0,ajaxReply:2,postSameImg:1,removeEXIF:1,removeFName:0,addPostForm:2,noThrdForm:1,favOnReply:1,addSageBtn:1,warnSubjTrip:0,saveSage:1,sageReply:0,captchaLang:1,addTextBtns:1,txtBtnsLoc:0,passwValue:"",userName:0,nameValue:"",userSignat:0,signatValue:"",noBoardRule:1,noGoto:1,noPassword:1,scriptStyle:0,
expandPanel:0,attachPanel:1,panelCounter:1,rePageTitle:1,animation:1,closePopups:0,updScript:1,scrUpdIntrv:1,textaWidth:500,textaHeight:160};ga={hideBySpell:["Çàêëèíàíèÿ: ","Magic spells: "],menuHiddBtn:["Äîïîëíèòåëüíîå ìåíþ êíîïîê ñêðûòèÿ ","Additional menu of hide buttons"],hideRefPsts:["Ñêðûâàòü îòâåòû íà ñêðûòûå ïîñòû*",
"Hide replies to hidden posts*"],delHiddPost:["Óäàëÿòü ñêðûòûå ïîñòû","Delete hidden posts"],updThread:{q:[["Îòêë.","Àâòî","Ïî êëèêó"],["Disable","Auto","On click"]],s:["AJAX îáíîâëåíèå òðåäà* ","AJAX thread update* "]},updThrDelay:[" (ñåê)",
" (sec)"],favIcoBlink:["ìèãàòü ôàâèêîíîì ïðè íîâûõ ïîñòàõ*","Favicon blinking on new posts*"],desktNotif:["Óâåäîìëåíèÿ íà ðàáî÷åì ñòîëå","Desktop notifications"],expandPosts:{q:[["Îòêë.","Àâòî",
"Ïî êëèêó"],["Disable","Auto","On click"]],s:["AJAX çàãðóçêà ñîêðàùåííûõ ïîñòîâ*","AJAX upload of shorted posts*"]},expandImgs:{q:[["Îòêë.","Â ïîñòå","Ïî öåíòðó"],["Disable","In post","By center"]],s:["ðàñêðûâàòü èçîáðàæåíèÿ ",
"expand images "]},preLoadImgs:["Ïðåäâàðèòåëüíî çàãðóæàòü èçîáðàæåíèÿ*","Pre-load images*"],findImgFile:["Ðàñïîçíàâàòü âñòðîåííûå ôàéëû â èçîáðàæåíèÿõ*",
"Detect built-in files in images*"],openImgs:["Ðàñêðûâàòü èçîáðàæåíèÿ","Open images"],openGIFs:["òîëüêî GIFû","GIFs only"],postBtnsTxt:["Êíîïêè ïîñòîâ â âèäå òåêñòà*","Show post buttons as text*"],imgSrcBtns:["Äîáàâëÿòü êíîïêè äëÿ ïîèñêà èçîáðàæåíèé*",
"Add image search buttons*"],noSpoilers:["Îòêðûâàòü òåêñòîâûå ñïîéëåðû","Open text spoilers"],noPostNames:["Ñêðûâàòü èìåíà â ïîñòàõ","Hide names in posts"],noPostScrl:["Áåç ñêðîëëà â ïîñòàõ",
"No scroll in posts"],keybNavig:["Íàâèãàöèÿ ñ ïîìîùüþ êëàâèàòóðû* ","Navigation with keyboard* "],correctTime:["Êîððåêòèðîâàòü âðåìÿ â ïîñòàõ* ","Correct time in posts* "],timeOffset:[" Ðàçíèöà âî âðåìåíè",
" Time difference"],timePattern:["Øàáëîí çàìåíû","Replace pattern"],linksNavig:{q:[["Îòêë.","Áåç êàðòû","Ñ êàðòîé"],["Disable","No map","With map"]],s:["íàâèãàöèÿ ïî >>ññûëêàì* ","navigation by >>links* "]},linksOver:[" çàäåðæêà ïîÿâëåíèÿ (ìñ)",
" delay appearance (ms)"],linksOut:[" çàäåðæêà ïðîïàäàíèÿ (ìñ)"," delay disappearance (ms)"],markViewed:["Îòìå÷àòü ïðîñìîòðåííûå ïîñòû*","Mark viewed posts*"],strikeHidd:["Çà÷åðêèâàòü >>ññûëêè íà ñêðûòûå ïîñòû",
"Strike >>links to hidden posts"],noNavigHidd:["Íå îòîáðàæàòü ïðåâüþ äëÿ ñêðûòûõ ïîñòîâ","Don't show previews for hidden posts"],crossLinks:["Ïðåîáðàçîâûâàòü http:// â >>/b/ññûëêè*","Replace http:// with >>/b/links*"],insertNum:["Âñòàâëÿòü >>ññûëêó ïî êëèêó íà ¹ïîñòà*",
"Insert >>link on ¹postnumber click*"],addMP3:["Äîáàâëÿòü ïëåéåð ê mp3-ññûëêàì* ","Add player to mp3-links* "],addImgs:["Çàãðóæàòü èçîáðàæåíèÿ ê .jpg-, .png-, .gif-ññûëêàì*","Load images to .jpg-, .png-, .gif-links*"],addYouTube:{q:[["Íè÷åãî",
"Ïëåéåð ïî êëèêó","Àâòî ïëåéåð","Ïðåâüþ+ïëåéåð","Òîëüêî ïðåâüþ"],["Nothing","On click player","Auto player","Preview+player","Only preview"]],s:["ê YouTube-ññûëêàì* ","to YouTube-links* "]},YTubeType:{q:[["Flash","HTML5 iframe",
"HTML5 video"],["Flash","HTML5 iframe","HTML5 video"]],s:["",""]},YTubeHD:["HD ","HD "],YTubeTitles:["Çàãðóæàòü íàçâàíèÿ ê YouTube-ññûëêàì*","Load titles into YouTube-links*"],ajaxReply:{q:[["Îòêë.","Iframe","HTML5"],["Disable","Iframe","HTML5"]],s:["AJAX îòïðàâêà ïîñòîâ*","posting with AJAX*"]},
postSameImg:["Âîçìîæíîñòü îòïðàâêè îäèíàêîâûõ èçîáðàæåíèé","Ability to post same images"],removeEXIF:["Óäàëÿòü EXIF èç îòïðàâëÿåìûõ JPEG-èçîáðàæåíèé",
"Remove EXIF from uploaded JPEG-images"],removeFName:["Óäàëÿòü èìÿ èç îòïðàâëÿåìûõ ôàéëîâ","Remove names from uploaded files"],addPostForm:{q:[["Ñâåðõó","Âíèçó","Â ïîñòàõ","Îòäåëüíàÿ"],["At top","At bottom","Inline",
"Hanging"]],s:["ôîðìà îòâåòà â òðåäå* ","reply form in thread* "]},noThrdForm:["Ïðÿòàòü ôîðìó ñîçäàíèÿ òðåäà","Hide thread creating form"],favOnReply:["Äîáàâëÿòü òðåä â èçáðàííîå ïðè îòâåòå",
"Add thread to favorites on reply"],addSageBtn:["Sage âìåñòî ïîëÿ E-mail* ","Sage button instead of E-mail field* "],warnSubjTrip:["Ïðåäóïðåæäàòü ïðè íàëè÷èè òðèï-êîäà â ïîëå òåìà","Warn if field subject contains trip-code"],saveSage:["çàïîìèíàòü ñàæó",
"remember sage"],captchaLang:{q:[["Îòêë.","Eng","Rus"],["Disable","Eng","Rus"]],s:["ÿçûê ââîäà êàï÷è","language input in captcha"]},addTextBtns:{q:[["Îòêë.","Ãðàôè÷.","Óïðîù.","Ñòàíäàðò."],["Disable","As images","As text","Standard"]],s:["êíîïêè ôîðìàòèðîâàíèÿ òåêñòà ",
"text format buttons "]},txtBtnsLoc:["âíèçó","at bottom"],userPassw:[" Ïîñòîÿííûé ïàðîëü"," Fixed password"],userName:["Ïîñòîÿííîå èìÿ","Fixed name"],userSignat:["Ïîñòîÿííàÿ ïîäïèñü","Fixed signature"],noBoardRule:["ïðàâèëà ",
"rules "],noGoto:["ïîëå goto ","goto field "],noPassword:["ïàðîëü","password"],excludeList:["Ñïèñîê àäðåñîâ, çàïðåùàþùèõ çàïóñê ñêðèïòà:","Address list, that excludes script launch:"],scriptStyle:{q:[["Glass black","Glass blue","Solid grey"],["Glass black","Glass blue",
"Solid grey"]],s:["ñòèëü ñêðèïòà","script style"]},attachPanel:["Ïðèêðåïèòü ãëàâíóþ ïàíåëü","Attach main panel"],panelCounter:["Ñ÷åò÷èê ïîñòîâ/èçîáðàæåíèé íà ãëàâíîé ïàíåëè",
"Counter of posts/images on main panel"],rePageTitle:["Íàçâàíèå òðåäà â çàãîëîâêå âêëàäêè*","Thread title in page tab*"],animation:["CSS3 àíèìàöèÿ â ñêðèïòå","CSS3 animation in script"],closePopups:["Àâòîìàòè÷åñêè çàêðûâàòü óâåäîìëåíèÿ",
"Close popups automatically"],updScript:["Àâòîìàòè÷åñêè ïðîâåðÿòü îáíîâëåíèÿ ñêðèïòà","Check for script update automatically"],scrUpdIntrv:{q:[["Êàæäûé äåíü","Êàæäûå 2 äíÿ","Êàæäóþ íåäåëþ",
"Êàæäûå 2 íåäåëè","Êàæäûé ìåñÿö"],["Every day","Every 2 days","Every week","Every 2 week","Every month"]],s:["èíòåðâàë ïðîâåðêè","check interval"]},language:{q:[["Ru","En"],["Ru","En"]],s:["",""]}};Fd={bold:["Æèðíûé","Bold"],italic:["Íàêëîííûé",
"Italic"],under:["Ïîä÷åðêíóòûé","Underlined"],strike:["Çà÷åðêíóòûé","Strike"],spoil:["Ñïîéëåð","Spoiler"],code:["Êîä","Code"],quote:["Öèòèðîâàòü âûäåëåííîå","Quote selected"]};Jc={filters:["Ôèëüòðû","Filters"],
posts:["Ïîñòû","Posts"],links:["Ññûëêè","Links"],form:["Ôîðìà","Form"],common:["Îáùåå","Common"],info:["Èíôî","Info"]};Tb={settings:["Íàñòðîéêè","Settings"],hidden:["Ñêðûòîå","Hidden"],favor:["Èçáðàííîå","Favorites"],refresh:["Îáíîâèòü",
"Refresh"],goback:["Íàçàä","Go back"],gonext:["Ñëåäóþùàÿ","Next"],goup:["Íàâåðõ","To the top"],godown:["Â êîíåö","To the bottom"],newthr:["Ñîçäàòü òðåä","New thread"],expimg:["Ðàñêðûòü êàðòèíêè","Expand images"],maskimg:["Ìàñêèðîâàòü êàðòèíêè",
"Mask images"],"upd-on":["Àâòîîáíîâëåíèå òðåäà","Thread autoupdate"],"audio-off":["Çâóêîâîå îïîâåùåíèå î íîâûõ ïîñòàõ","Sound notification about new posts"],catalog:["Êàòàëîã","Catalog"],counter:["Ïîñòîâ/Èçîáðàæåíèé â òðåäå",
"Posts/Images in thread"]};pd={sel:["Ñêðûâàòü âûäåëåííîå","Hide selected text"],trip:["Ñêðûâàòü òðèï-êîä","Hide with trip-code"],img:["Ñêðûâàòü èçîáðàæåíèå","Hide with image"],ihash:["Ñêðûâàòü ñõîæèå èçîáð.",
"Hide similar images"],text:["Ñêðûâàòü ñõîæèé òåêñò","Hide similar text"],noimg:["Ñêðûâàòü áåç èçîáðàæåíèé","Hide without images"],notext:["Ñêðûâàòü áåç òåêñòà","Hide without text"]};qd=[["5 ïîñòîâ",
"15 ïîñòîâ","30 ïîñòîâ","50 ïîñòîâ","100 ïîñòîâ"],["5 posts","15 posts","30 posts","50 posts","100 posts"]];rd=[["1 ñòðàíèöà","2 ñòðàíèöû","3 ñòðàíèöû","4 ñòðàíèöû","5 ñòðàíèö"],["1 page",
"2 pages","3 pages","4 pages","5 pages"]];sd=[["Êàæäûå 30 ñåê.","Êàæäóþ ìèíóòó","Êàæäûå 2 ìèí.","Êàæäûå 5 ìèí."],["Every 30 sec.","Every minute","Every 2 min.","Every 5 min."]];Nc=['"Ctrl+Âëåâî" - ïðåäûäóùàÿ ñòðàíèöà,\n"Ctrl+Âïðàâî" - ñëåäóþùàÿ ñòðàíèöà.\n\nÍà äîñêå:\n"J" - òðåä íèæå,\n"K" - òðåä âûøå,\n"N" - ïîñò íèæå,\n"M" - ïîñò âûøå,\n"V" - âõîä â òðåä.\n\nÂ òðåäå:\n"J" - ïîñò íèæå,\n"K" - ïîñò âûøå,\n"V" - áûñòðûé îòâåò',
'"Ctrl+Left" - previous page\n"Ctrl+Right" - next page.\n\nOn board:\n"J" - thread below,\n"K" - thread above,\n"N" - post below,\n"M" - post above,\n"V" - enter a thread.\n\nIn thread:\n"J" - post below,\n"K" - post above,\n"V" - quick reply.'];Id=["ÿíâ,ôåâ,ìàð,àïð,ìàÿ,èþí,èþë,àâã,ñåí,îêò,íîÿ,äåê".split(","),"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(",")];
Jd=["ÿíâàðÿ,ôåâðàëÿ,ìàðòà,àïðåëÿ,ìàÿ,èþíÿ,èþëÿ,àâãóñòà,ñåíòÿáðÿ,îêòÿáðÿ,íîÿáðÿ,äåêàáðÿ".split(","),"January,February,March,April,May,June,July,August,September,October,November,December".split(",")];
Hd=["Âñê,Ïíä,Âòð,Ñðä,×òâ,Ïòí,Ñáò".split(","),"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(",")];Xc={fd:["Ðåäàêòèðîâàíèå íàñòðîåê:","Edit settings:"],hidden:["Ðåäàêòèðîâàíèå ñêðûòûõ òðåäîâ:",
"Edit hidden threads:"],gd:["Ðåäàêòèðîâàíèå èçáðàííîãî:","Edit favorites:"]};Kc=["Äîáàâèòü","Add"];Lc=["Ïðèìåíèòü","Apply"];kb=["Î÷èñòèòü","Clear"];Mc=["Ïîìîùü","Help"];zd=["Îáíîâèòü","Refresh"];
$c=["Çàãðóçèòü","Load"];lb=["Ñîõðàíèòü","Save"];Vc=["Ïðàâêà","Edit"];dd=["Ñáðîñ","Reset"];Yb=["Óäàëèòü","Remove"];ld=["Èíôî","Info"];Xb=["Îòìåíà","Undo"];ua=["Çàãðóçêà...","Loading..."];Ub=["Ïðîâåðêà...",
"Checking..."];ac=["Óäàëåíèå...","Deleting..."];mb=["Îøèáêà:","Error:"];va=["Îøèáêà ïîäêëþ÷åíèÿ","Connection failed"];Md=["Òðåä íåäîñòóïåí (¹","Thread is unavailable (¹"];Cd=["Óñïåøíî óäàëåíî!","Succesfully deleted!"];
Dd=["Íå ìîãó óäàëèòü:\n","Can't delete:\n"];Vd=["Íåïðàâèëüíûå íàñòðîéêè âðåìåíè","Invalid time settings"];bd=["Ãëîáàëüíûå íàñòðîéêè íå íàéäåíû","Global config not found"];
bc=["Ïîñò íå íàéäåí","Post not found"];Ad=["Çàãðóçèòü êàï÷ó","Load captcha"];Nd=["Â òðåäå %m íåïðî÷èòàííûõ ñîîáùåíèé.","There are %m unreaded messages in thread."];Oc=["Íå îòîáðàæàòü: ",
"Do not show: "];Pc=["Ïðîâåðèòü ñåé÷àñ","Check now"];Rd=["Äîñòóïíî îáíîâëåíèå!","Update available!"];Sd=["Ó âàñ ñòîèò ñàìàÿ ïîñëåäíÿÿ âåðñèÿ!","You have latest version!"];Qc=["Âåðñèÿ: ",
"Version: "];Rc=["Òðåäîâ ïðîñìîòðåíî: ","Threads viewed: "];Sc=["Òðåäîâ ñîçäàíî: ","Threads created: "];Tc=["Ïîñòîâ: ","Posts: "];Ud=["Âñåãî: ","Total: "];Uc=["Îòëàäêà","Debug"];Vb=["Èíôîðìàöèÿ äëÿ îòëàäêè",
"Information for debugging"];ad=["Çàãðóçèòü ãëîáàëüíûå íàñòðîéêè","Load global settings"];cd=["Ñîõðàíèòü íàñòðîéêè êàê ãëîáàëüíûå","Save settings as global"];Wc=["Ïðàâêà â òåêñòîâîì ôîðìàòå",
"Edit in text format"];ed=["Ñáðîñèòü â íàñòðîéêè ïî óìîë÷àíèþ","Reset settings to defaults"];fd=["Äàííîå äåéñòâèå óäàëèò âñå âàøè íàñòðîéêè è çàêëàäêè. Ïðîäîëæèòü?",
"This will delete all your preferences and favourites. Continue?"];Zb=["Óäàëèòü âûäåëåííûå çàïèñè","Remove selected notes"];Yc=["Ñîõðàíèòü âíåñåííûå èçìåíåíèÿ","Save your changes"];md=["Îáíîâèòü ñ÷åò÷èêè ïîñòîâ",
"Refresh posts counters"];nd=["Ïðîâåðèòü àêòóàëüíîñòü òðåäîâ (äî 5 ñòðàíèöû)","Check for threads actuality (up to 5 page)"];od=["Î÷èñòèòü çàïèñè íåäîñòóïíûõ òðåäîâ",
"Clear notes of inaccessible threads"];gd=["Ñêðûòûå ïîñòû íà ñòðàíèöå","Hidden posts on page"];jd=["Ñêðûòûå òðåäû","Hidden threads"];hd=["Íà ýòîé ñòðàíèöå íåò ñêðûòûõ ïîñòîâ...","No hidden posts on this page..."];
id=["Íåò ñêðûòûõ òðåäîâ...","No hidden threads..."];Wb=["Ðàñêðûòü âñå","Expand all"];Zc=["Íåêîððåêòíûé ôîðìàò äàííûõ","Incorrect data format"];kd=["Íåò èçáðàííûõ òðåäîâ...",
"Favorites is empty..."];vd=["Îòâåò â","Reply to"];Qd=["Îòâåòû:","Replies:"];Kd=["Ïðîïóùåíî îòâåòîâ: ","Posts omitted: "];Ld=["Ñâåðíóòü òðåä","Collapse thread"];Pd=["óäàë¸í","deleted"];Td=["Ïîëó÷èòü íîâûå ïîñòû",
"Get new posts"];$b=["Ñòðàíèöà","Page"];Od=["Ñêðûòûé òðåä:","Hidden thread:"];ud=["Ðàñêðûòü ôîðìó","Expand form"];td=["Èñêàòü â ","Search in "];yd=["Æäèòå","Wait"];wd=["+ ôàéë","+ file"];xd=["Äîáàâèòü .ogg, .rar, .zip, èëè .7z ê êàðòèíêå",
"Add .ogg, .rar, .zip, or .7z to image "];Gd=["Ñêà÷àòü ñîäåðæàùèéñÿ â êàðòèíêå ôàéë","Download existing file from image"];Ed=["Ôàéë ïîâðåæä¸í: ","File is corrupted: "];Bd=['Ïîëå "Òåìà" ñîäåðæèò òðèïêîä',
'"Subject" field contains tripcode'];ma=["ñèíòàêñè÷åñêàÿ îøèáêà","syntax error"];Wd=["íåèçâåñòíûé ñïåëë: ","unknown spell: "];cc=["ïðîïóùåí îïåðàòîð","missing operator"];Xd=["ïðîïóùåí ñïåëë",
"missing spell"];Yd=["îøèáêà ïðåîáðàçîâàíèÿ %1 â ÷èñëî","can't convert %1 to number"];Zd=["ñèíòàêñè÷åñêàÿ îøèáêà â ðåãóëÿðíîì âûðàæåíèè: ","syntax error in regular expression: "];
$d=["íåîæèäàííûé ñèìâîë ","unexpected character "];ae=["ïðîïóùåíà îòêðûâàþùàÿñÿ ñêîáêà","missing ( in parenthetical"];be=["ïðîïóùåíà çàêðûâàþùàÿñÿ ñêîáêà",
"missing ) in parenthetical"];wa=[" (ñòðîêà "," (row "];Ka=[", ñòîëáåö ",", column "];var n=window.document,Ea=Array.prototype,f,Z,Oa,$,E,H={},C=[],ra=[],W,O,e={},k,B,s,Aa,Lb,Ta,h,y,ba,ec,fb,D,Rb,R;Sb=[];ta={};jb=sa=l;Ga="";ib=l;Va=la=o;Wa=l;hb=Ua=o;var hc,qb=[],Qb,xb,i,Sa="",$a,Za,F=Function.prototype.call.bind(Ea.forEach);rb.prototype={Ca:function(a){var b=this.ma;b===this.Ic?(this.sb.push(a),this.length++):(this.ma++,this.Wa(b,a))},
end:function(){this.ma--;0!==this.length?(this.length--,this.Ca(this.sb.splice(0,1)[0])):this.xb&&0===this.ma&&this.Ab()},complete:function(){0===(this.length|this.ma)?this.Ab():this.xb=j}};Se.prototype={ic:function(a,b){b(this(a))},Pc:function(a,b){this.S.end();a(b.data)},mc:function(a,b){this.S.end();a(b)},jc:function(a,b){this.S.Ca([a,this.Pc.bind(this,b)])},fc:function(a,b){var c=this.jb[a];c.onmessage=b[1];c.onerror=this.Oc;c.postMessage(b[0],l,[b[0]])},clear:function(){this.jb=l;window.URL.revokeObjectURL(this.url)}};
Ba.dd=function(a){if(a.checked&&(!/^[+-]\d{1,2}$/.test(f.timeOffset)||Ba.ub(f.timePattern)))I(Vd[i],"err-correcttime",o),Q("correctTime",0),a.checked=o};Ba.ub=function(a){return!a.contains("i")||!a.contains("h")||!a.contains("d")||!a.contains("y")||!(a.contains("n")||a.contains("m"))||/[^\?\-\+sihdmwny]|mm|ww|\?\?|([ihdny]\?)\1+/.test(a)};Ba.prototype={Fc:function(a){if(this.Jb||this.disabled)return this;var b,c,d,e=1,f=0,p=a.match(RegExp(this.Vb));if(!p)return this.disabled=j,this;this.qa="";for(d=
p[0];c=p[e++];){if("m"===(b=this.pattern[e-2]))this.Xa=3<c.length;a=d.indexOf(c,f);this.qa+=d.substring(f,a)+"_"+b;f=a+c.length}sessionStorage.timeRPHash=Ya(sessionStorage.timeRPattern=(this.Xa?"1":"0")+this.qa);this.Jb=j;return this},Bb:function(a){function b(a){return 10>a?"0"+a:a}if(this.disabled)return a;var c=this.uc,d=this.Xa?this.sc:this.tc,e=this.pattern,f=this.qa,p=this.Ac,a=a.replace(RegExp(this.Vb,"g"),function(){var a,i,h,k,n,q,r,s,v;for(a=1;8>a;a++)i=arguments[a],h=e[a-1],"s"===h?k=i:
"i"===h?n=i:"h"===h?q=i:"d"===h?r=i:"n"===h?s=i-1:"y"===h?v=i:"m"===h&&(s=/^ÿíâ|^jan/i.test(i)?0:/^ôåâ|^feb/i.test(i)?1:/^ìàð|^mar/i.test(i)?2:/^àïð|^apr/i.test(i)?3:/^ìàé|^may/i.test(i)?4:/^èþí|^jun/i.test(i)?5:/^èþë|^jul/i.test(i)?6:/^àâã|^aug/i.test(i)?7:/^ñåí|^sep/i.test(i)?8:/^îêò|^oct/i.test(i)?9:/^íîÿ|^nov/i.test(i)?10:/^äåê|^dec/i.test(i)&&
11);a=new Date(2===v.length?"20"+v:v,s,r,q,n,k||0);a.setHours(a.getHours()+p);return f.replace("_s",b(a.getSeconds())).replace("_i",b(a.getMinutes())).replace("_h",b(a.getHours())).replace("_d",b(a.getDate())).replace("_w",c[a.getDay()]).replace("_n",b(a.getMonth()+1)).replace("_m",d[a.getMonth()]).replace("_y",2===v.length?(""+a.getFullYear()).substring(2):a.getFullYear())}),c=d=e=f=p=b=l;return a}};zc.prototype={Lc:function(a){a[0].textContent=a[0].textContent.replace(/^http:\/\/youtu/,"https://youtu")},
cd:function(){sessionStorage["de-yt-titles"]=JSON.stringify(this.Fa)},Yb:function(){this.S&&this.S.complete()},$a:function(a){var b=this.Fa[a[1]];b?this.Zb(a[0],b):this.S.Ca(a)},Zb:function(a,b){b?(a.textContent=b,a.hb=2):a.hb=1;a.fb&&(a.fb(b),a.fb=l)},loaded:function(a,b){if(4===b.readyState){var c;if(200===b.status)try{c=JSON.parse(b.responseText).entry.title.$t,this.Fa[a[1]]=c}catch(d){}this.Zb(a[0],c);this.S.end()}},lc:function(a,b){setTimeout(GM_xmlhttpRequest,0,{method:"GET",url:"https://gdata.youtube.com/feeds/api/videos/"+
b[1]+"?alt=json&fields=title/text()",onreadystatechange:this.loaded.bind(this,b)})}};J.tb=function(a,b){var c,d;d=a[0];for(c=d.length-1;0<=c;c--)if(d[c]===b)return j;d=a[1];for(c=d.length-1;0<=c;c--)if(b>=d[c][0]&&b<=d[c][1])return j;return o};J.fa=function(a,b,c,d,e,f,i,h){b=D.Ha(c,i);b===l?D.lb(a,d,e,f,h):b?(d=d.pop(),e(a,D.La(d[2][d[0]-1]),h)):f&&f(a,h)};J.prototype={Na:"words,exp,exph,imgn,ihash,subj,name,trip,img,sage,op,tlen,all,video,wipe,num".split(","),nb:[function(a,b){var c;return ya(a).toLowerCase().contains(b)||
(c=a.querySelector(".replytitle, .filetitle"))&&c.textContent.toLowerCase().contains(b)},function(a,b){return b.test(ya(a))},function(a,b){return b.test(a.innerHTML)},function(a,b){var c=x(e.aa,a);return c&&b.test(c.textContent)},function(a,b){return a.P[0]&&Ae(a)===b},function(a,b){var c=a.querySelector(".replytitle, .filetitle");return!c||!(c=c.textContent)?o:!b||b.test(c)},function(a,b){var c=a.querySelector(".commentpostername, .postername");return!c||!(c=c.textContent)?o:!b||c.contains(b)},function(a,
b){var c=x("postertrip",a);return!c?o:!b||c.textContent.contains(b)},function(a,b){if(!a.P[0])return o;if(b){var c,d,e;if(c=b[1]){e=fe(a);switch(b[0]){case 0:d=e>=c[0]&&e<=c[1];break;case 1:d=e<c[0];break;case 2:d=e>c[0]}if(d){if(!b[2])return j}else return o}if(c=b[2])switch(d=jc(a),e=+d[0],d=+d[1],b[0]){case 0:return e>=c[0]&&e<=c[1]&&d>=c[2]&&d<=c[3];case 1:return e<c[0]&&d<c[3];case 2:return e>c[0]&&d>c[3]}}return j},function(a){return a.Xb},function(a){return a.p},function(a,b){var c=ya(a);return!b?
!!c:J.tb(b,c.replace(/\n/g,"").length)},function(){return j},function(a,b){var c=Ea.slice.call(arguments);if(b)if(!a.kb||!f.YTubeTitles)J.fa.apply(l,c.concat(o,o));else{var d,e,i=V("de-ytube-link",a),p=i.length;a.Y=p;for(e=0;e<p;e++)if(d=i[e],2===d.hb){if((d=d.textContent)&&b.test(d)){J.fa.apply(l,c.concat(j,o));a.Y=l;c[0]=o;return}a.Y--}else 1===d.hb?a.Y--:d.fb=cg.bind(c);0===a.Y&&(J.fa.apply(l,c.concat(o,o)),a.Y=l)}else J.fa.apply(l,c.concat(!!a.kb,o))},function(a,b){var c,d,e,f,i,h,k,n,q=ya(a);
if(b&1&&(c=q.replace(/>/g,"").split(/\s*\n\s*/),5<(d=c.length))){c.sort();e=0;for(i=d/4;e<d;){h=c[e];for(f=0;c[e++]===h;)f++;if(4<f&&f>i&&h)return J.A='same lines: "'+h.substr(0,20)+'" x'+f,j}}if(b&2&&(c=q.replace(/[\s\.\?\!,>]+/g," ").toUpperCase().split(" "),3<(d=c.length))){c.sort();e=0;i=d/4;for(n=k=0;e<d;k++){h=c[e];for(f=0;c[e++]===h;)f++;if(25<d&&(f>n&&2<h.length&&(n=f),n>=i))return J.A='same words: "'+h.substr(0,20)+'" x'+n,j}h=k/d;if(0.25>h)return J.A="uniq words: "+(100*h).toFixed(0)+"%",
j}if(b&4&&(c=q.replace(/https*:\/\/.*?(\s|$)/g,"").replace(/[\s\.\?!,>:;-]+/g," ").split(" "),50<c[0].length||1<(d=c.length)&&10<c.join("").length/d))return J.A="long words",j;if(b&8&&(c=q.replace(/\s+/g,""),30<(d=c.length)&&0.4<(h=c.replace(/[0-9a-zà-ÿ\.\?!,]/ig,"").length/d)))return J.A="specsymbols: "+(100*h).toFixed(0)+"%",j;if(b&16&&(c=q.replace(/[\s\.\?!;,-]+/g," ").trim().split(" "),4<(d=c.length))){for(k=f=i=e=0;e<d;e++)h=c[e],5>(h.match(/[a-zà-ÿ]/ig)||[]).length||(2<(h.match(/[A-ZÀ-ß]/g)||
[]).length&&k++,h===h.toUpperCase()&&f++,i++);if(0.3<=f/i&&4<i)return J.A="CAPSLOCK: "+100*(f/c.length)+"%",j;if(0.3<=k/i&&8<i)return J.A="cAsE words: "+100*(k/c.length)+"%",j}return b&32&&(c=q.replace(/\s+/g," ").replace(/>>\d+|https*:\/\/.*?(?: |$)/g,""),30<(d=c.length)&&0.4<(h=(d-c.replace(/\d/g,"").length)/d))?(J.A="numbers: "+Math.round(100*h)+"%",j):J.A=o},function(a,b){return J.tb(b,a.count+1)}],Sa:function(a,b){var c=a.lastIndexOf("/"),d=a.substr(c+1);return RegExp(a.substr(1,c-1),b?d.replace("g",
""):d)},nc:function(a,b,c){if(2===this.l||4===this.l)return this.v=cc[i],this.z=0;var d,e,f,h,k=b.substr(c+1).match(/^([a-z]+)(?:\[([a-z0-9]+)(?:(,)|,(\s*[0-9]+))?\])?/);if(!k)return this.v=ma[i],this.z=0;e=this.Na.indexOf(k[1]);this.l=2;if(-1===e)return this.v=Wd[i]+k[1],this.z=1,0;this.ja?(f=e|256,this.ja=o):f=e;d=k[2]&&[k[2],k[4]?k[4]:k[3]?-1:o];b=b.substr(c+1+k[0].length);h="("!==b[0]?0:")"===b[1]?2:o;c=h!==o;switch(e){case 4:if(b=!c&&b.match(/^\((?:(\d+)|(.*?))\)/)){if(b[1])return a.push([f,
+b[1],d]),k[0].length+b[0].length;this.v=Yd[i].replace("%1",b[2])}else this.v=ma[i];this.z=k[0].length;return 0;case 8:if(c)return a.push([f,"",d]),k[0].length+h;b=b.match(/^\(([><=])(?:(\d+(?:\.\d+)?)(?:-(\d+(?:\.\d+)?))?)?(?:@(\d+)(?:-(\d+))?x(\d+)(?:-(\d+))?)?\)/);if(!b||!b[2]&&!b[4])return this.v=ma[i],this.z=k[0].length,0;a.push([f,["="===b[1]?0:"<"===b[1]?1:2,b[2]&&[+b[2],b[3]?+b[3]:+b[2]],b[4]&&[+b[4],b[5]?+b[5]:+b[4],+b[6],b[7]?+b[7]:+b[6]]],d]);return k[0].length+b[0].length;case 14:if(c)return a.push([f,
63,d]),k[0].length+h;if(b=b.match(/^\(([a-z, ]+)\)/))if(h=0,!b[1].split(/, */).some(function(a){switch(a){case "samelines":h=h|1;return o;case "samewords":h=h|2;return o;case "longwords":h=h|4;return o;case "symbols":h=h|8;return o;case "capslock":h=h|16;return o;case "numbers":h=h|32;return o;default:return j}}))return a.push([f,h,d]),k[0].length+b[0].length;this.v=ma[i];this.z=k[0].length;return 0;case 11:if(c)return a.push([f,"",d]),k[0].length+h;case 15:if(b=!c&&b.match(/^\(([\d-, ]+)\)/))return b[1].split(/, */).forEach(function(a){if(a.contains("-")){a=
a.split("-");a[0]=+a[0];a[1]=+a[1];this[1].push(a)}else this[0].push(+a)},h=[[],[]]),a.push([f,h,d]),k[0].length+b[0].length;this.v=ma[i];this.z=k[0].length;return 0;case 13:case 5:if(c)return a.push([f,"",d]),k[0].length+h;case 1:case 2:case 3:b=!c&&b.match(/^\((\/.*?[^\\]\/[ig]*)\)/);if(!b)return this.v=ma[i],this.z=k[0].length,0;h=b[1];try{this.Sa(h,j)}catch(n){return this.v=Zd[i]+h,this.z=k[0].length,0}a.push([f,h,d]);return k[0].length+b[0].length;case 7:case 9:case 10:case 12:if(c)return a.push([f,
"",d]),k[0].length+h;default:b=b.match(/^\((.*?[^\\])\)/);if(!b)return this.v=ma[i],this.z=0,o;h=b[1].replace(/\\\)/g,")");a.push([f,0===e?h.toLowerCase():h,d]);return k[0].length+b[0].length}},qc:function(a,b){if(2===b){if(!this.l||3===this.l)return this.l=1,this.ja=j}else if(2===this.l||4===this.l)return this.l=0,1===b&&(a[a.length-1][0]|=512),j;return o},ec:function(a){if(!a)return l;this.l=this.ja=l;for(var b,c=[],d=[],e=c,f=0,h=1,k=1,n=0,q=a.length;n<q;n++,h++)switch(a[n]){case "\n":k++,h=0;
case "\r":case " ":continue;case "#":b=this.nc(e,a,n);if(0===b)return this.H=this.v+wa[i]+k+Ka[i]+(h+this.z)+")",o;n+=b;h+=b;break;case "(":if(2===this.l||4===this.l)return this.H=cc[i]+wa[i]+k+Ka[i]+h+")",o;d.push(e);e.push([this.ja?511:255,[]]);e=e[e.length-1][1];f++;this.l=3;this.ja=o;break;case ")":if(0===this.l||1===this.l)return this.H=Xd[i]+wa[i]+k+Ka[i]+h+")",o;if(0<f)e=d.pop(),f--;else return this.H=ae[i]+wa[i]+k+Ka[i]+h+")",o;this.l=4;break;case "|":case "&":case "!":if(this.qc(e,"|"===
a[n]?0:"&"===a[n]?1:2))break;default:return this.H=$d[i]+a[n]+wa[i]+k+Ka[i]+h+")",o}return 2!==this.l&&4!==this.l?(this.H=ma[i]+wa[i]+k+")",o):0<f?(this.H=be[i]+wa[i]+k+")",o):0===c.length?l:c},Ia:function(a,b,c,d){var e=0!==(b&256);if(c===d-1){if(0===c)return e?[[12,"",l]]:l;b=a.length-1;if(e){for(;a[b]&&0===(a[b][0]&512);)delete a[b],b-=2;a[b]&&(a[b][0]&=511);if(0>b)return[[12,"",l]]}else{for(;a[b]&&0!==(a[b][0]&512);)delete a[b],b-=2;if(0>b)return l}return 1===a.length&&255===a[0][0]?a[0][1]:a}if(0!==
(b&512)){if(!e)return l}else if(e)return[[12,"",l]];return o},Pa:function(a){for(var b=0,c=a.length,d=[],e,f,h;b<c;b++){f=a[b];e=f[0]&255;if(255===e)if(h=this.Pa(f[1])){1===h.length?(h=h[0],h[0]|=f[0]&512,h[0]^=f[0]&256,d.push(h)):d.push([f[0],h]);continue}else h=this.Ia(d,f[0],b,c);else if((h=f[2])&&(h[0]!==B||(-1===h[1]?s:h[1]&&h[1]!==s)))h=this.Ia(d,f[0],b,c);else if(12===e)h=this.Ia(d,f[0]^256,b,c);else{d.push(f);continue}if(h!==o)return h}return 0===d.length?l:1===d.length&&255===d[0][0]?d[0][1]:
d},kc:function(a){a&&a.forEach(function c(a){var e=a[1];if(e)switch(a[0]&255){case 1:case 2:case 3:case 5:case 13:a[1]=this(e,j);break;case 255:e.forEach(c,this)}},this.Sa);return a},Ha:function(a,b){0!==(a&256)&&(b=!b);if(0!==(a&512)){if(!b)return o}else if(b)return j;return l},gc:function(a,b,c,d){var e,b=(b?"!#":"#")+this.Na[a]+(d?"["+d[0]+(d[1]?","+(-1===d[1]?"":d[1]):"")+"]":"");if(!c)return b;if(8===a)return b+"("+(2===c[0]?">":1===c[0]?"<":"=")+(c[1]?c[1][0]+(c[1][1]===c[1][0]?"":"-"+c[1][1]):
"")+(c[2]?"@"+c[2][0]+(c[2][0]===c[2][1]?"":"-"+c[2][1])+"x"+c[2][2]+(c[2][2]===c[2][3]?"":"-"+c[2][3]):"")+")";if(14===a){if(63===c)return b;a=[];c&1&&a.push("samelines");c&2&&a.push("samewords");c&4&&a.push("longwords");c&8&&a.push("symbols");c&16&&a.push("capslock");c&32&&a.push("numbers");return b+"("+a.join(",")+")"}if(15===a||11===a){if(-1!==(a=c[1].length-1)){for(e=[];0<=a;a--)e.push(c[1][a][0]+"-"+c[1][a][1]);e.reverse()}b+="(";0!==c[0].length&&(b+=c[0].join(",")+(e?",":""));e&&(b+=e.join(","));
return b+")"}return 0===a||6===a||7===a?b+"("+c.replace(/\)/g,"\\)")+")":b+"("+(""+c)+")"},La:function(a){var b=a[0]&256,c=a[0]&255,d=a[1];return 255===c?this.La(d[this.pb]):14===c?(b?"!#wipe":"#wipe")+(J.A?": "+J.A:""):this.gc(c,b,d,a[2])},lb:function(a,b,c,d,e){var f,h;h=o;f=b.pop();for(var i=f[0],k=f[1],n=f[2];;){if(i<k){h=n[i][0];f=h&255;if(255===f){b.push([i,k,n]);n=n[i][1];k=n.length;i=0;continue}else if(13===f){b.push([i+1,k,n]);this.nb[f](a,n[i][1],h,b,c,d);break}else f=this.nb[f](a,n[i][1]);
h=this.Ha(h,f);if(h===l){i++;continue}this.pb=i}else this.pb=i-=1,h=o;if(f=b.pop())if(i=f[0],k=f[1],n=f[2],h=this.Ha(n[i][0],h),h===l){i++;continue}h?c(a,this.La(n[i]),e):d&&d(a,e);break}},pc:function(a,b,c){this.lb(a,[[0,this.Ra.length,this.Ra]],function(a,c,e){b(a,c);e&&(clearTimeout(Rb),Rb=setTimeout(Ma,500))},c&&function(a,b){c(a);b&&(clearTimeout(Rb),Rb=setTimeout(Ma,500))},o)},Ka:function(a,b,c){c&&c(a)},hc:function(a){var b=[],c=[],d="",a=a.replace(/([^\\]\)|^)?[\n\s]*(#rep(?:\[([a-z0-9]+)(?:(,)|,(\s*[0-9]+))?\])?\((\/.*?[^\\]\/[ig]*)(?:,\)|,(.*?[^\\])?\)))[\n\s]*/g,
function(a,c,e,f,h,i,k,n){b.push([f,h?-1:i,k,(n||"").replace(/\\\)/g,")")]);d+=e+"\n";return c||""}).replace(/([^\\]\)|^)?[\n\s]*(#outrep(?:\[([a-z0-9]+)(?:(,)|,(\s*[0-9]+))?\])?\((\/.*?[^\\]\/[ig]*)(?:,\)|,(.*?[^\\])?\)))[\n\s]*/g,function(a,b,e,f,h,i,k,n){c.push([f,h?-1:i,k,(n||"").replace(/\\\)/g,")")]);d+=e+"\n";return b||""});this.G.ad=b;this.G.Rc=c;return[a,d]},ua:function(a){if(a){var b=[];a.forEach(function(a){(!a[0]||a[0]===B&&(-1===a[1]?!s:!a[1]||a[1]===s))&&b.push([a[2],a[3]])});return 0===
b.length?o:b}return o},ob:function(a){if(a)for(var b=a.length-1;0<=b;b--)a[b][0]=this.Sa(a[b][0],o);return a},Ma:function(a,b,c){this.Ra=this.kc(a);this.Qa=this.ob(b);this.Oa=this.ob(c);this.U=this.Ra?this.pc:this.Ka;this.Hb=!!a;this.Za=!!b;this.Gb=!!c},Ja:function(){this.hash=0;this.list="";this.U=this.Ka;this.Hb=this.Za=this.Gb=o;Q("hideBySpell",0)},oc:function(a,b,c,d,e,f){d=(c?"!":"")+"#"+d;f.push(a?"(#op"+b+" & "+d+e+")":c&&b&&"!#num"!==d?"(#all"+b+" & "+d+e+")":d+b+e)},mb:function(a){var b=
[],c=[],d=[],g="";a.forEach(function(a){if(a){var e,f="",g=o;if(e=a.match(/^#(?:([^\/]+)\/)?(\d+)? /))f=e[1]?"["+e[1]+(e[2]?","+e[2]:"")+"]":"",a=a.substr(e[0].length);a.startsWith("#op ")&&(a=a.substr(4),g=j);if("#"===a[0]){if(e=a.match(/^#([a-z]+)(?: (.*))?/))switch(e[1]){case "sage":this(g,f,o,"sage","",b);break;case "notxt":this(g,f,j,"tlen","",b);break;case "noimg":this(g,f,j,"img","",b);break;case "trip":this(g,f,o,"trip","",b);break;case "tmax":this(g,f,o,"tlen","("+e[2]+"-20000)",b);break;
case "name":a=e[2].split("!!");a[1]&&this(g,f,o,"trip","(!!"+a[1]+")",b);a[0]&&(a=a[0].split("!"),a[1]&&this(g,f,o,"trip","(!"+a[1]+")",b),a[0]&&this(g,f,o,"name","("+a[0].replace(/\)/g,"\\)")+")",b));break;case "skip":this(g,f,j,"num","("+e[2]+")",d);break;case "rep":case "outrep":a=e[2].match(/(\/.*?[^\\]\/[ig]*)(?: (.*))?/);c.push("#"+e[1]+f+"("+a[1]+","+(a[2]||"").replace(/\)/g,"\\)")+")");break;case "theme":e[1]="subj";case "exp":case "exph":case "imgn":case "video":this(g,f,o,e[1],"("+e[2]+
")",b);break;case "vtag":break;default:this(g,f,o,e[1],"("+e[2].replace(/\)/g,"\\)")+")",b)}}else this(g,f,o,"words","("+a.replace(/\)/g,"\\)")+")",b)}},this.oc);0!==f.hideByWipe&&(g=[],0!==f.wipeSameLin&&g.push("samelines"),0!==f.wipeSameWrd&&g.push("samewords"),0!==f.wipeLongWrd&&g.push("longwords"),1===f.wipeSpecial&&g.push("symbols"),1===f.wipeCAPS&&g.push("capslock"),0!==f.wipeNumbers&&g.push("numbers"),g=0===g.length?"":"#wipe("+g.join(",")+")"+(0!==b.length?" |\n":""));delete f.hideByWipe;
delete f.wipeSameLin;delete f.wipeSameWrd;delete f.wipeLongWrd;delete f.wipeSpecial;delete f.wipeCAPS;delete f.wipeNumbers;za(e.b,f);return(0!==d.length?d.join(" &\n")+" &\n":"")+g+b.join(" |\n")+"\n\n"+c.join("\n")},Ub:o,Kc:function(a){a=this.Na.indexOf(a);return 5>a||14<a},pa:function(a){a=(""+a).replace(/[\s\n]+$/,"");this.G={};var a=this.hc(a),b=this.ec(a[0]);if(b!==o)this.G.Cc=b;else if(this.H){try{I(mb[i]+" "+this.H,"help-err-spell",o)}catch(c){GM_log(mb[i]+" "+this.H)}this.G.list="";return o}this.G.list=
a.join("\n\n").replace(/[\s\n]+$/,"");return a},cb:function(a){this.hash=Ya(a);this.list=a;fa("DESU_Spells_"+e.b,JSON.stringify([1,this.hash,this.list]));a||this.Ja()},eb:function(){var a=this.G.Cc,b=a?this.Pa(a):o,c=this.G.ad,d=this.G.Rc;0===c.length&&(c=o);0===d.length&&(d=o);fa("DESU_CSpells_"+e.b,JSON.stringify([this.hash,a,c,d]));c=this.ua(c);d=this.ua(d);sessionStorage["de-spells-"+B+s]=JSON.stringify([this.hash,b,c,d]);this.Ma(b,c,d);this.cb(this.G.list)},Tb:function(){var a,b=Ha("DESU_Spells_"+
e.b);this.Ub=j;if(b)try{return a=JSON.parse(b),3>a.length?(this.list=a[1]?this.mb(a[1]):"",this.hash=Ya(this.list)):(this.hash=a[1],this.list=a[2]),this.hash}catch(c){}this.list="string"===typeof b?this.mb(b.split("\n")):"#wipe(samelines,samewords,longwords,numbers)";return this.hash=Ya(this.list)},update:function(){if(this.Tb()){var a,b,c,d;try{if((a=JSON.parse(sessionStorage["de-spells-"+B+s]))&&a[0]===this.hash){this.Ma(a[1],a[2],a[3]);return}}catch(f){}try{if((a=JSON.parse(Ha("DESU_CSpells_"+
e.b)))&&a[0]===this.hash){b=a[1]?this.Pa(a[1]):o;c=this.ua(a[2]);d=this.ua(a[3]);this.Ma(b,c,d);sessionStorage["de-spells-"+B+s]=JSON.stringify([this.hash,b,c,d]);return}}catch(h){}a=this.pa(this.list);this.cb(a?a.join("\n\n").replace(/\n+$/,""):"");this.eb()}else this.Ja()},disable:function(){this.U=this.Ka},replace:function(a){for(var b=0,c=this.Qa.length;b<c;b++)a=a.replace(this.Qa[b][0],this.Qa[b][1]);return a},Qc:function(a){for(var b=0,c=this.Oa.length;b<c;b++)a=a.replace(this.Oa[b][0],this.Oa[b][1]);
return a}};window.opera?S(n,{DOMContentLoaded:Af}):Af()})(window.opera&&window.opera.scriptStorage);
