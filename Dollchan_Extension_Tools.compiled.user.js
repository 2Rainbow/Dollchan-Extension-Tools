// ==UserScript==
// @name			Dollchan Extension Tools
// @version			12.9.19.0
// @namespace		http://www.freedollchan.org/scripts/*
// @author			Sthephan Shinkufag @ FreeDollChan
// @copyright		(C)2084, Bender Bending Rodriguez
// @description		Doing some profit for imageboards
// @icon			https://raw.github.com/SthephanShinkufag/Dollchan-Extension-Tools/stable/Icon.png
// @updateURL		https://raw.github.com/SthephanShinkufag/Dollchan-Extension-Tools/stable/Dollchan_Extension_Tools.meta.js
// @include			*
// ==/UserScript==
var ja=void 0,i=!0,m=null,n=!1;
(function(Ca){var Oa,Pa,Qa,kb,ka,za,lb,sa,mb,Ob,ta,Pb,ga,Oc,Pc,Qc,nb,Rc,Sc,Tc,Qb,Uc,Vc,Wc,Xc,Yc,Rb,Zc,Tb,$c,ad,bd,Da,cd,ob,pb,dd,ed,fd,qb,gd,Ub,Vb,hd,id,jd,Wb,Xb,kd,ld,md,Yb,nd,ua,od,pd,qd,rd,sd,td,ud,vd,wd,xd,yd,Zb,rb,zd,Ad,la,Bd,Cd,Dd,Ed,$b,Fd,Gd,Hd,Id,Jd,Kd,Ld,Md,Nd,Od,Pd,Qd,Rd;function T(a,b){return l.evaluate(a,b,m,8,m).singleNodeValue}function da(a,b){return l.evaluate(a,b,m,3,m).booleanValue}function Sd(a,b){return b.querySelector(a)}function V(a,b){return g.c?b.getElementsByClassName(a):b.querySelectorAll("."+
a)}function w(a,b){return b.getElementsByClassName(a)[0]}function p(a){return l.getElementById(a)}function P(a,b){return b.getElementsByTagName(a)[0]}function B(a,b){Ea.forEach.call(a,b)}function Td(a,b){var c=a.cloneNode(n);c.innerHTML=b;a.parentNode.replaceChild(c,a);return c}function U(a,b){for(var c in b)"text"===c?a.textContent=b[c]:"value"===c?a.value=b[c]:a.setAttribute(c,b[c]);return a}function R(a,b){for(var c in b)a.addEventListener(c,b[c],n);return a}function ac(a,b){for(var c in b)a.removeEventListener(c,
b[c],n)}function ea(a,b){for(var c=0,d=b.length;c<d;c++)b[c]&&a.appendChild(b[c])}function Y(a,b){a.parentNode.insertBefore(b,a)}function K(a,b){a.parentNode.insertBefore(b,a.nextSibling)}function C(a){bc.innerHTML=a;return bc.firstChild}function t(a,b,c){a=l.createElement(a);b&&U(a,b);c&&R(a,c);return a}function q(a,b,c){a=t(a,b,m);ea(a,c);return a}function W(a){return l.createTextNode(a)}function L(a,b,c){return t("input",{type:"button",value:a,title:b},{click:c})}function F(a,b){return a?b:m}function H(a){a.style.display=
"none"===a.style.display?"":"none"}function v(a){a&&a.parentNode.removeChild(a)}function ma(a){a=a.getBoundingClientRect();return{top:Math.round(a.top+window.pageYOffset),left:Math.round(a.left+window.pageXOffset)}}function cc(a){window.scrollTo(0,ma(a).top)}function y(a){a.preventDefault()}function Ra(a,b){var c=a.scrollTop,d=a.selectionStart;a.value=a.value.substr(0,d)+b+a.value.substr(a.selectionEnd);a.setSelectionRange(d+b.length,d+b.length);a.focus();a.scrollTop=c}function ec(){return(g.b?l.getSelection():
window.getSelection()).toString()}function va(a){var a=a.match(/\/.*?[^\\]\/[ig]*/)[0],b=a.lastIndexOf("/");return RegExp(a.substr(1,b-1),a.substr(b+1))}function Aa(a){for(var b in a)if(a.hasOwnProperty(b))return n;return i}function M(a){var b=Date.now();sb+=a+": "+(b-fc)+"ms\n";fc=b}function hf(){e.Ya&&(window.setTimeout=function(a,b){"function"===typeof a&&a.apply(m,Ea.slice.call(arguments,2));return 1});String.prototype.contains||(String.prototype.contains=function(a){return this.indexOf(a)!==
-1});window.GM_log||(window.GM_log=function(a){console.error(a)});window.GM_xmlhttpRequest||(window.GM_xmlhttpRequest=function(a){var b,c=new window.XMLHttpRequest;if(a.onreadystatechange)c.onreadystatechange=function(){a.onreadystatechange(c)};c.onload=function(){if(a.onload)a.onload(c);c=a=m};c.open(a.method,a.url,i);c.setRequestHeader("Accept-Encoding","deflate, gzip, x-gzip");for(b in a.headers)c.setRequestHeader(b,a.headers[b]);c.finalUrl=a.url;c.send(m)})}function gc(a){l.head.appendChild(t("script",
{type:"text/javascript",text:a},m))}function Z(a){return T("ancestor::*[@de-post]",a)}function Fa(a){return a.querySelectorAll('.thumb, img[src*="thumb"], img[src*="/spoiler"], img[src^="blob:"]')}function Ud(a){return(a=a.querySelector(e.Ib))&&(a=a.textContent)?+(a.match(/\d+/)||[0])[0]:0}function wa(a){return a.nb||(a.nb=a.l.innerHTML.replace(/<\/?(?:br|p|li)[^>]*?>/gi,"\n").replace(/<[^>]+?>/g,"").replace(/&gt;/g,">").replace(/&lt;/g,"<").trim())}function Vd(a){var a=w(e.T,a).textContent.match(/\d+[\.\d\smkк]*[bб]/i)[0],
b=parseFloat(a.match(/[\d\.]+/));/MB/.test(a)&&(b*=1E3);/\d\s*B/.test(a)&&(b=(b/1E3).toFixed(2));return+b}function hc(a){a=w(e.T,a);return e.w?(a=a.onclick.toString().split("', '"),[+a[3],+a[4]]):(a=a?a.textContent.match(/\d+[x\u00d7]\d+/):n)?a[0].split(/[x\u00d7]/):[m,m]}function tb(a){return"/"+a+(a?"/":"")}function xa(a,b,c){return"//"+a+tb(b)+(/(?:^|\.)krautchan\.net$/.test(a)?"thread-":"res/")+c+(/(?:^|\.)(?:dobrochan\.(?:ru|org)|tenhou\.ru)$/.test(a)?".xhtml":/(?:^|\.)420chan\.org$/.test(a)?
".php":/(?:^|\.)2chan\.net$/.test(a)?".htm":".html")}function ub(a,b,c){return tb(b)+(0<c?c+vb:/(?:^|\.)(?:dobrochan\.(?:ru|org)|tenhou\.ru)$/.test(a)?"index.xhtml":"")}function Sa(a,b){var c,d,k=a instanceof Array;if(k){if(0==a.length)return"[]";c="["}else{if(Aa(a))return"{}";c="{"}d=0;g.forEach(a,function(a){var e=this[a],f=typeof e;"function"!==f&&("object"===f&&(f=e===m?"null":e instanceof Array?"array":e instanceof Date?"date":e instanceof RegExp?"regex":"object"),0<d&&(c+=","),c+="\n"+b+"    "+
(k?"":'"'+a+'": ')+("array"===f||"object"===f?Sa(e,b+"    "):"boolean"===f||"number"===f?e.toString():"string"===f?'"'+e.replace(/"/g,'\\"')+'"':f),d++)});return c+="\n"+b+(k?"]":"}")}function ic(a){for(var b,c=0,d=0,k=a.length;d<k;++d){c=(c<<4)+a.charCodeAt(d);if(b=c&4026531840)c^=b>>>24;c&=~b}return c}function Wd(a,b,c){l.cookie=escape(a)+"="+escape(b)+";expires="+(new Date(Date.now()+c)).toGMTString()+";path=/"}function Ta(a){return g.na?GM_getValue(a):Ca?Ca.getItem(a):localStorage.getItem(a)}
function N(a,b){g.na?GM_setValue(a,b):Ca?Ca.setItem(a,b):localStorage.setItem(a,b)}function wb(a,b){try{return JSON.parse(Ta(a))||b}catch(c){return b}}function Ua(a){Va=ic(a);ya=a.split("\n");N("DESU_Spells_"+e.e,JSON.stringify([Va,ya]));Xd()}function jc(){var a,b=Ta("DESU_Spells_"+e.e);try{a=JSON.parse(b),Va=a[0],ya=a[1],Xd()}catch(c){Ua(b||"")}}function xb(a){for(var b in a)this[b]=a[b]}function kc(a){try{var b=JSON.parse(Ta(a));if(b.version)return new xb(b)}catch(c){}return n}function Yd(a){a=
a&&kc("DESU_GlobalCfg")||new xb({version:Ha.version});a.captchaLang=e.Mb?2:1;a.language=navigator.language.contains("ru")?0:1;a.timePattern=a.timeOffset="";a.correctTime=0;return a}function Q(a,b){f[a]!==b&&(f[a]=b,N("DESU_Config_"+e.e,JSON.stringify(f)))}function yb(a){Q(a,!f[a]?1:0)}function Zd(){return!f.hideByWipe?0:f.wipeSameLin|f.wipeSameWrd<<1|f.wipeLongWrd<<2|f.wipeCAPS<<3|f.wipeSpecial<<4|f.wipeNumbers<<5}function $d(){X=[];if(u){var a=(sessionStorage["de-hidden"]||"").split(",");if(+a[0]===
(f.hideBySpell?Va:0)&&+a[1]===Zd())if(X=a[2].split(""),a=sessionStorage["de-deleted"])a.split(",").forEach(function(a){X.splice(a,1)}),delete sessionStorage["de-deleted"]}X.length=z.length;O=wb("DESU_Posts_"+e.e+"_"+x,{});ae()}function Ia(){u&&(sessionStorage["de-hidden"]=(f.hideBySpell?Va+",":"0,")+Zd()+","+X.join(""));na("hid",i)}function Wa(){var a,b=JSON.stringify(O);9E3<b.length&&(a=Date.now()-432E6,g.forEach(O,function(b){O[b][1]<a&&delete O[b]}),b=JSON.stringify(O));N("DESU_Posts_"+e.e+"_"+
x,b);na("hid",i)}function ae(){J=wb("DESU_Threads_"+e.e,{})}function be(a,b){J[x]||(J[x]={});0===b?J[x][a.a]=a.ga:(delete J[x][a.a],Aa(J[x])&&delete J[x]);N("DESU_Threads_"+e.e,JSON.stringify(J))}function lc(){E=wb("DESU_Favorites",{})}function Xa(a){N("DESU_Favorites",a);na("fav",i)}function mc(a,b,c){delete E[a][b][c];Aa(E[a][b])&&delete E[a][b];Aa(E[a])&&delete E[a];G[c]&&((w("de-btn-fav-sel",G[c].B)||{}).className="de-btn-fav")}function ce(a,b){var c=e.host,d=x,k=a.a;b&&(lc(),E[c]&&E[c][d]&&E[c][d][k]?
mc(c,d,k):(E[c]||(E[c]={}),E[c][d]||(E[c][d]={}),E[c][d][k]={cnt:a.H.M+1,txt:a.ga},b.className="de-btn-fav-sel"),Xa(JSON.stringify(E)))}function jf(){var a=sessionStorage["de-viewed"];a&&a.split(",").forEach(function(a){if(a=G[a])g.q(a,"de-viewed"),a.La=i})}function $(a,b,c,d,k){return q("li",m,[t("a",{id:"de-btn-"+a,"class":"de-abtn",title:Pb[a][j],href:c||"#",onmouseout:k},{click:b,mouseover:d})])}function de(){var a=Fa(A).length;Y(A,q("div",{id:"de-main",lang:ee()},[q("div",{id:"de-panel"},[t("span",
{id:"de-btn-logo"},{click:function(){yb("expandPanel");ha()}}),q("ul",{id:"de-panel-btns"},[$("settings",function(a){y(a);na("cfg",n)},m,m,m),$("hidden",function(a){y(a);na("hid",n)},m,m,m),$("favor",function(a){y(a);na("fav",n)},m,m,m),$("refresh",function(a){y(a);window.location.reload()},m,function(){u||kf()},"de_delSelection(event)"),$("goback",m,"//"+e.host+ub(e.host,x,nc-1),m,m),F(!u,$("gonext",m,"//"+e.host+ub(e.host,x,nc+1),m,m)),$("goup",function(a){y(a);window.scrollTo(0,0)},m,m,m),$("godown",
function(a){y(a);window.scrollTo(0,l.body.scrollHeight||l.body.offsetHeight)},m,m,m),F(!u&&(h.L||aa),$("newthr",fe,m,m,m)),F(0<a,$("expimg",function(a){y(a);f.expandImgs=1;Ya=!Ya;z.forEach(function(a){oc(a,Ya)})},m,m,m)),F(h.file||aa,$("maskimg",function(a){y(a);yb("maskImgs");ha()},m,m,m)),F(u&&3!==f.updThread,$("upd-on",function(a){y(a);Za?ge():(this.id="de-btn-upd-on",he())},m,m,m)),F(!g.va&&u&&1===f.updThread,$("audio-off",function(a){y(a);ie();Oa=n;this.id=Pa?"de-btn-audio-on":"de-btn-audio-off";
v(p("de-select"))},m,lf,"de_delSelection(event)")),F(e.K,$("catalog",m,"//0chan.ru/"+x+"/catalog.html",m,m))]),F(u,q("div",{id:"de-panel-info"},[t("span",{title:Pb.counter[j],text:z.length+"/"+a},m)]))]),t("div",{"class":"de-content"},m),t("div",{id:"de-alert"},m),t("hr",{style:"clear: both;"},m)]))}function na(a,b){if(!$a){var c=w("de-content",l),d="de-content-"+a;b&&c.id!==d||(c.childElementCount&&f.animation?(g.S(c,function(c){je(c,d,a,b);d=a=b=m}),c.className="de-content de-cfg-close"):je(c,d,
a,b))}}function je(a,b,c,d){a.innerHTML=a.style.backgroundColor="";if(!d&&a.id===b)a.removeAttribute("id");else{a.id=b;f.attachPanel||a.appendChild(t("hr",{style:"clear: both;"},m));if("cfg"===c)mf(a);else if(f.attachPanel&&(a.style.backgroundColor=getComputedStyle(l.body).getPropertyValue("background-color")),"hid"===c&&(ae(),nf(a)),"fav"===c)lc(),of(a);f.animation&&(a.className="de-content de-cfg-open")}}function s(a,b,c){var d=t("input",{info:a,type:"checkbox"},{click:function(){yb(this.getAttribute("info"));
c&&c(this)}});d.checked=f[a];return q("label",b?{"class":"de-blockinp"}:m,[d,W(" "+ga[a][j])])}function ia(a,b,c){return t("input",{info:a,type:"text",size:b,value:f[a]},{keyup:c?c:function(){Q(this.getAttribute("info"),this.value)}})}function ba(a,b,c){for(var d=0,k=ga[a],e=k.s[j].length,D=[];d<e;d++)D[d]='<option value="'+d+'">'+k.s[j][d]+"</option>";(c=R(C('<select info="'+a+'">'+D.join("")+"</select>"),{change:c?c:function(){Q(this.getAttribute("info"),this.selectedIndex)}})).selectedIndex=f[a];
return q("label",b?{"class":"de-blockinp"}:m,[c,W(" "+k.v[j])])}function Ja(a){return q("div",{"class":e.t+" de-cfg-tab-back",selected:n},[t("div",{"class":"de-cfg-tab",text:Oc[a][j],info:a},{click:function(){var a,c;c=this.parentNode;if("true"!==c.getAttribute("selected")){if(a=w("de-cfg-body",l))a.className="de-cfg-unvis",l.querySelector('.de-cfg-tab-back[selected="true"]').setAttribute("selected",n);c.setAttribute("selected",i);c=this.getAttribute("info");(a=p("de-cfg-"+c))||K(p("de-cfg-bar"),
a="posts"===c?pf():"links"===c?qf():"form"===c?rf():"common"===c?sf():tf());a.className="de-cfg-body";"filters"===c&&(jc(),p("de-spell-edit").value=ya.join("\n"))}}})])}function uf(){return q("div",{"class":"de-cfg-unvis",id:"de-cfg-filters"},[q("div",m,[q("span",{id:"de-spell-panel"},[t("a",{text:Pc[j],href:"#","class":"de-abtn",onmouseout:"de_delSelection(event)"},{click:y,mouseover:vf}),t("a",{text:Qc[j],href:"#","class":"de-abtn"},{click:function(a){y(a);Q("hideBySpell",1);l.querySelector('input[info="hideBySpell"]').checked=
i;pc()}}),t("a",{text:nb[j],href:"#","class":"de-abtn"},{click:function(a){y(a);p("de-spell-edit").value="";pc()}}),t("a",{text:"?",target:"_blank",href:"//www.freedollchan.org/scripts/spells","class":"de-abtn"},m)]),s("hideBySpell",n,pc),t("textarea",{id:"de-spell-edit",rows:10,cols:49},m)]),s("hideByWipe",i,m),q("div",{id:"de-cfg-wipe"},[q("div",m,[s("wipeSameLin",n,m),s("wipeSameWrd",n,m),s("wipeLongWrd",n,m)]),q("div",m,[s("wipeSpecial",n,m),s("wipeCAPS",n,m),s("wipeNumbers",n,m)])]),s("filterThrds",
i,m),s("menuHiddBtn",i,m),s("hideRefPsts",i,m),s("delHiddPost",i,function(){B(V("de-post-hid",A),function(a){H(e.la(a))});ha()})])}function pf(){return q("div",{"class":"de-cfg-unvis",id:"de-cfg-posts"},[ba("updThread",n,m),q("label",m,[ia("updThrDelay",4,m),W(ga.updThrDelay[j])]),q("div",{style:"padding-left: 25px;"},[s("favIcoBlink",i,m),F(g.p,s("desktNotif",i,function(){f.desktNotif&&window.webkitNotifications.requestPermission()}))]),ba("expandPosts",i,m),ba("expandImgs",i,m),F(!g.ba,s("preLoadImgs",
i,m)),F(!g.ba,q("div",{style:"padding-left: 25px;"},[F(e.Ha,s("findRarJPEG",i,m)),s("showGIFs",i,m),s("noImgSpoil",i,m)])),s("postBtnsTxt",i,m),s("imgSrcBtns",i,m),s("noSpoilers",i,ha),s("noPostNames",i,ha),s("noPostScrl",i,ha),q("div",m,[s("keybNavig",n,m),t("a",{text:"?",href:"#","class":"de-abtn"},{click:function(a){y(a);I(Rc[j],"help-keybnavig",n)}})]),s("correctTime",i,oa.Nb),q("div",{style:"padding-left: 25px;"},[q("div",m,[ia("timeOffset",3,m),W(ga.timeOffset[j])]),q("div",m,[ia("timePattern",
30,m),W(" "),t("a",{text:ga.timePattern[j],href:"#","class":"de-abtn"},{click:function(a){y(a);I('"s" - second (one digit),\n"i" - minute (one digit),\n"h" - hour (one digit),\n"d" - day (one digit),\n"w" - week (string)\n"n" - month (one digit),\n"m" - month (string),\n"y" - year (one digit),\n"-" - any symbol\n"+" - any symbol except digits\n"?" - previous char may not be\n\nExamples:\n0chan.ru: "w+yyyy+m+dd+hh+ii+ss"\niichan.ru, 2ch.so: "w+dd+m+yyyy+hh+ii+ss"\ndobrochan.ru: "dd+m+?+?+?+?+?+yyyy++w++hh+ii-?s?s?"\n410chan.org: "dd+nn+yyyy++w++hh+ii+ss"\n4chan.org: "nn+dd+yy+w+hh+ii-?s?s?"\n4chon.net: "nn+dd+yy++w++hh+ii+ss"\nkrautchan.net: "yyyy+nn+dd+hh+ii+ss+--?-?-?-?-?"',
"help-correcttime",n)}})])])])}function qf(){return q("div",{"class":"de-cfg-unvis",id:"de-cfg-links"},[ba("linksNavig",i,m),q("div",{style:"padding-left: 25px;"},[q("div",m,[ia("linksOver",6,function(){Q("linksOver",+this.value|0)}),W(ga.linksOver[j])]),q("div",m,[ia("linksOut",6,function(){Q("linksOut",+this.value|0)}),W(ga.linksOut[j])]),s("markViewed",i,m),s("strikeHidd",i,m),s("noNavigHidd",i,m)]),s("crossLinks",i,m),s("insertNum",i,m),s("addMP3",i,m),s("addImgs",i,m),ba("addYouTube",i,m),q("div",
{style:"padding-left: 25px;"},[q("div",m,[ba("YTubeType",n,m),ia("YTubeWidth",6,m),W("\u00d7"),ia("YTubeHeigh",6,m),W(" "),s("YTubeHD",n,m)]),F(!(g.b&&12>g.b),s("YTubeTitles",n,m))])])}function rf(){return q("div",{"class":"de-cfg-unvis",id:"de-cfg-form"},[F(h.L,ba("addPostForm",i,m)),F(h.L,s("noThrdForm",i,function(){u||(p("de-parea").style.display=f.noThrdForm?"none":"")})),s("favOnReply",i,m),s("checkReply",i,m),F(g.ab,q("div",{style:"padding-left: 25px;"},[s("postSameImg",i,m),s("removeEXIF",
i,m),s("removeFName",i,m)])),F(h.J,q("div",m,[s("addSageBtn",n,m),s("saveSage",n,m)])),ba("captchaLang",i,m),F(h.L,q("div",m,[ba("addTextBtns",n,function(){Q("addTextBtns",this.selectedIndex);qc()}),s("txtBtnsLoc",n,qc)])),F(h.P,q("div",m,[ia("passwValue",20,ke),W(ga.userPassw[j])])),F(h.name,q("div",m,[ia("nameValue",20,rc),s("userName",n,rc)])),F(h.g,q("div",m,[ia("signatValue",20,m),s("userSignat",n,m)])),q("div",m,[F(h.L||aa,W(Sc[j])),s("noBoardRule",n,ha),F(h.ma,s("noGoto",n,function(){H(h.ma)})),
F(h.P,s("noPassword",n,function(){H(h.P.parentNode.parentNode)}))])])}function sf(){return q("div",{"class":"de-cfg-unvis",id:"de-cfg-common"},[F(g.oa,q("div",m,[W(ga.excludeList[j]),t("textarea",{value:Ta("DESU_Exclude")||"",rows:6,cols:49},{keyup:function(){N("DESU_Exclude",this.value)}})])),ba("scriptStyle",i,function(){Q("scriptStyle",this.selectedIndex);p("de-main").lang=ee()}),s("attachPanel",i,function(){na("cfg",n);ha()}),s("panelCounter",i,ha),s("rePageTitle",i,m),F(g.ua,s("animation",i,
m)),s("closePopups",i,m),F(!g.b,q("div",m,[s("updScript",i,m),q("div",{id:"de-upd-cont",style:"padding: 2px 0 10px 25px;"},[ba("scrUpdIntrv",n,m),L(Tc[j],"",function(){var a=p("de-updresult");a.innerHTML='<span class="de-wait">'+Qb[j]+"</div>";le(i,function(b){a.innerHTML=b})})]),t("div",{id:"de-updresult",style:"font-size: 1.1em; text-align: center"},m)]))])}function tf(){return q("div",{"class":"de-cfg-unvis",id:"de-cfg-info"},[C('<span style="width: 179px;"><b>'+Uc[j]+f.version+"</b><br><br>"+
Vc[j]+(g.na?"Mozilla config":Ca?"Opera ScriptStorage":"Local Storage")+"<br>"+Wc[j]+ca.view+"<br>"+Xc[j]+ca.op+"<br>"+Yc[j]+ca.reply+"</span>"),C('<span style="padding-left: 7px; border-left: 1px solid grey;">'+sb.split("\n").join("<br>")+"<br>"+Rb[j]+sc+"ms</span>"),q("div",{style:"display: table;"},[C('<span style="display: table-cell; width: 100%;"><a href="//www.freedollchan.org/scripts/" target="_blank">http://www.freedollchan.org/scripts</a></span>'),U(L(Zc[j],Tb[j],function(){var a,b=new xb(f),
c=sb.split("\n");c[c.length-1]=Rb[j]+sc+"ms";delete b.nameValue;delete b.passwValue;delete b.signatValue;delete b.lastScrUpd;for(a in b)b[a]===Ha[a]&&delete b[a];I(Tb[j]+':<br /><textarea readonly rows="20" cols="75">'+Sa({version:Ha.version,location:""+window.location,nav:g,cfg:b,spells:ya,perf:c},"")+"</textarea>","help-debug",n)}),{style:"display: table-cell;"})])])}function mf(a){a.appendChild(q("div",{"class":e.t},[t("div",{id:"de-cfg-head",text:"Dollchan Extension Tools"},m),q("div",{id:"de-cfg-bar"},
[Ja("filters"),Ja("posts"),Ja("links"),Ja("form"),Ja("common"),Ja("info")]),uf(),q("div",{id:"de-cfg-btns"},[q("span",{style:"float: right;"},[ba("language",n,function(){Q("language",j=this.selectedIndex);v(p("de-main"));v(p("de-css"));v(p("de-css-dynamic"));me();de();na("cfg",n)}),F(g.oa,L($c[j],ad[j],function(){kc("DESU_GlobalCfg")?(N("DESU_Config_"+e.e,""),window.location.reload()):I(bd[j],"err-noglobalcfg",n)})),F(g.oa,L(Da[j],cd[j],function(){N("DESU_GlobalCfg",JSON.stringify(f));na("cfg",i)})),
L(ob[j],pb[j],function(){H(U(P("textarea",this.parentNode.parentNode),{value:Sa(f,"")}).parentNode)}),L(dd[j],ed[j],function(){confirm(fd[j])&&(N("DESU_Config_"+e.e,JSON.stringify(Yd(n))),N("DESU_Stat_"+e.e,""),N("DESU_Favorites",""),N("DESU_Threads_"+e.e,""),Ua(""),window.location.reload())})]),t("br",{style:"clear: both;"},m),q("div",{style:"display: none;"},[t("textarea",{rows:10,cols:49},m),L(Da[j],qb[j],function(){N("DESU_Config_"+e.e,this.previousSibling.value.trim().replace(/\t|\n/g,""));window.location.reload()})])])]));
w("de-cfg-tab",a).click()}function ne(a,b){return a.appendChild(q("div",{"class":"de-content-block"},[t("input",{type:"checkbox"},{click:function(){var a=this.checked;B(this.parentNode.querySelectorAll(".de-entry > div > input"),function(b){b.checked=a});a=m}}),b]))}function nf(a){var b,c,d;B(V("de-post-hid",A),function(b){if(!b.k){var c=b.cloneNode(i);c.removeAttribute("id");c.style.display="";c.h=i;c.Gb=b;c.ka=c.querySelector(".de-btn-hide, .de-btn-lock");c.ka.parentNode.className="de-ppanel";c.ka.onmouseover=
c.ka.onmouseout=m;c.ka.onclick=function(){var a=Z(this);ab(a,a.h=!a.h)};(d||(d=a.appendChild(q("div",{"class":"de-content-block"},[C("<b>"+gd[j]+":</b>")])))).appendChild(q("div",{"class":"de-entry"},[c]))}});d?ea(a,[L(Ub[j],"",function(){B(this.parentNode.querySelectorAll(".de-entry > [de-post]"),function(a){ab(a,a.h=!a.h)});this.value=this.value==Vb[j]?Ub[j]:Vb[j]}),L(Da[j],"",function(){B(this.parentNode.querySelectorAll(".de-entry > [de-post]"),function(a){a.h||Ka(a.Gb,n)});Wa()})]):a.appendChild(C("<b>"+
hd[j]+"</b>"));ea(a,[C("<hr />"),C("<b>"+(Aa(J)?id[j]:jd[j]+":")+"</b>")]);if(!Aa(J))for(b in J)for(c in d=ne(a,C("<b>"+b+"</b>")),J[b])d.appendChild(q("div",{"class":"de-entry",info:b+";"+c},[q("div",{"class":e.t},[t("input",{type:"checkbox"},m),C('<a href="'+xa(e.host,b,c)+'" target="_blank">№'+c+"</a>"),W(" - "+J[b][c])])]));ea(a,[C("<hr />"),L(ob[j],pb[j],function(){H(U(P("textarea",this.parentNode),{value:Sa(J,"")}).parentNode)}),L(Wb[j],Xb[j],function(){B(this.parentNode.querySelectorAll(".de-entry[info]"),
function(a){var b=a.getAttribute("info").split(";"),c=b[0],b=b[1];P("input",a).checked&&(G[b]?Ka(G[b],n):delete J[c][b],Aa(J[c])&&delete J[c])});N("DESU_Threads_"+e.e,JSON.stringify(J));Wa()}),q("div",{style:"display: none;"},[t("textarea",{rows:9,cols:70},m),L(Da[j],qb[j],function(){N("DESU_Threads_"+e.e,this.previousSibling.value.trim().replace(/\t|\n/,""));window.location.reload()})])])}function of(a){var b,c,d,k;for(b in E)for(c in E[b])for(d in k=ne(a,C('<a href="http://'+b+ub(b,c,0)+'">'+b+
"/"+c+"</a>")),E[b][c])k.appendChild(q("div",{"class":"de-entry",info:b+";"+c+";"+d},[q("div",{"class":e.t},[C('<input type="checkbox" />'),t("span",{"class":"de-btn-expthr"},{click:wf}),C('<a href="'+xa(b,c,d)+'">№'+d+"</a>"),C('<span class="de-fav-title"> - '+E[b][c][d].txt+"</span>"),C('<span class="de-fav-inf-page"></span>'),C('<span class="de-fav-inf-posts">[<span class="de-fav-inf-old">'+E[b][c][d].cnt+"</span>]</span>")])]));a.firstChild||a.appendChild(C("<b>"+kd[j]+"</b>"));ea(a,[l.createElement("hr"),
L(ob[j],pb[j],function(){H(U(P("textarea",this.parentNode),{value:Sa(E,"")}).parentNode)}),L(ld[j],md[j],function(){B(V("de-entry",l),function(a){var b,c=a.getAttribute("info").split(";");c[0]===e.host&&(b=U(w("de-fav-inf-posts",a).firstElementChild,{"class":"de-wait",text:""}),pa(m,c[1],c[2],i,function(a,d,k){a=k?k:a.length+1;b.textContent=a;!k&&a>E[c[0]][c[1]][c[2]].Sa?(b.className="de-fav-inf-new",E[c[0]][c[1]][c[2]].Sa=a,N("DESU_Favorites",JSON.stringify(E))):b.className="de-fav-inf-old";b=c=
m}))})}),L(Yb[j],nd[j],function(){var a=6,b=0;for(I(ua[j],"load-pages",i);a--;)oe(C("<div></div>"),a,function(a,c){B(V("de-entry",l),function(d){var k=d.getAttribute("info").split(";");k[0]!==e.host||k[1]!==x||(d=w("de-fav-inf-page",d),RegExp("(?:№|No.|>)\\s*"+k[2]+"\\s*<").test(a.innerHTML)?d.innerHTML="@"+c:5===b&&!d.textContent.contains("@")&&(d.innerHTML="@?"))});5===b&&qa(p("de-alert-load-pages"));b++;a=c=m})}),L(nb[j],od[j],function(){B(V("de-entry",l),function(a){var b=a.getAttribute("info").split(";");
g.b&&b[0]!==e.host||pa(xa(b[0],b[1],b[2]),m,m,n,function(a,c,d){d&&(mc(b[0],b[1],b[2]),Xa(JSON.stringify(E)));b=m})})}),L(Wb[j],Xb[j],function(){B(V("de-entry",l),function(a){var b=a.getAttribute("info").split(";");P("input",a).checked&&mc(b[0],b[1],b[2])});Xa(JSON.stringify(E))}),q("div",{style:"display: none;"},[t("textarea",{rows:9,cols:70},m),L(Da[j],qb[j],function(){Xa(this.previousSibling.value.trim().replace(/\n|\r/,""))})])])}function qa(a){a&&(a.Ra=m,f.animation?(g.S(a,v),g.q(a,"de-close")):
v(a))}function I(a,b,c){var d=p("de-alert-"+b),k="de-alert-msg"+(c?" de-wait":""),r=c?"":"\u00d7 ";d?(U(P("div",d),{"class":k}).innerHTML=a.trim(),P("span",d).textContent=r,clearTimeout(d.Ra),f.animation&&(g.S(d,function(a){g.Q(a,"de-blink")}),g.q(d,"de-blink"))):(d=p("de-alert").appendChild(q("div",{"class":e.t,id:"de-alert-"+b},[t("span",{"class":"de-alert-btn",text:r},{click:function(){qa(this.parentNode)}}),C('<div class="'+k+'">'+a.trim()+"</div>")])),f.animation&&(g.S(d,function(a){g.Q(a,"de-open")}),
g.q(d,"de-open")));f.closePopups&&!c&&!b.contains("help")&&(d.Ra=setTimeout(qa,4E3,d))}function La(a,b,c){var d,k=Z(a);f.attachPanel&&b?(d="fixed",b="de-btn-refresh"===a.id||"de-btn-audio-off"===a.id?"bottom: 25":"top: "+(a.getBoundingClientRect().top+a.offsetHeight-(g.c?0.5:0))):(d="absolute",b="top: "+(ma(a).top+a.offsetHeight-(g.c?0.5:0)));l.body.appendChild(R(C('<div class="'+e.t+'" id="de-select" style="position: '+d+"; "+("de-btn-src"===a.className?"left: "+ma(a).left:"right: "+(l.body.clientWidth-
ma(a).left-a.offsetWidth))+"px; "+b+'px;" onmouseout="de_delSelection(event)">'+c+"</div>"),{mouseover:function(){k&&bb(k,n)}}));return p("de-select").getElementsByTagName("a")}function vf(a){B(La(a.target,i,'<div style="display: inline-block; border-right: 1px solid grey;"><a href="#">'+"#b/,#b/itt,#exp ,#exph ,#img ,#imgn ,#name ,#noimg,#notxt,#num ".split(",").join('</a><a href="#">')+'</a></div><div style="display: inline-block;"><a href="#">'+"#op,#outrep,#rep ,#sage,#skip ,#theme ,#tmax ,#trip,#video ".split(",").join('</a><a href="#">')+
"</a></div>"),function(a){a.onclick=function(a){var b=this.textContent;y(a);"#b/"===b?b="#"+x+"/ ":"#b/itt"===b&&(b="#"+x+"/"+(u?u+" ":" "));Ra(p("de-spell-edit"),b)}})}function xf(a){if(f.menuHiddBtn&&(f.filterThrds||!a.k)){var b=La(a.B.firstChild,n,'<a href="#">'+pd[j].join('</a><a href="#">')+"</a>");b[1].onclick=function(b){y(b);cb(0===a.r.length?"#noimg":"#img ="+Vd(a)+"@"+hc(a).join("x"))};b[2].onclick=function(b){y(b);cb(0===a.r.length?"#noimg":"#ihash "+pe(a))};b[3].onclick=function(b){y(b);
yf(a)};(b=b[0]).onclick=function(a){y(a);cb(Ma)};b.onmouseover=function(){Ma=ec().trim()}}}function zf(a){B(La(a.B.querySelector("span:nth-child(3)"),n,'<a href="#">'+qd[j].join('</a><a href="#">')+"</a>"),function(b){b.onclick=function(b){y(b);db(a,parseInt(this.textContent,10),m)}})}function kf(){B(La(p("de-btn-refresh"),i,'<a href="#">'+rd[j].join('</a><a href="#">')+"</a>"),function(a){a.onclick=function(a){y(a);qe(Ea.indexOf.call(this.parentNode.children,this)+1)}})}function lf(){"de-btn-audio-off"===
this.id&&B(La(p("de-btn-audio-off"),i,'<a href="#">'+sd[j].join('</a><a href="#">')+"</a>"),function(a){a.onclick=function(a){y(a);a=Ea.indexOf.call(this.parentNode.children,this);Oa=0===a?3E4:1===a?6E4:2===a?12E4:3E5;ie();p("de-btn-audio-off").id="de-btn-audio-on";v(this.parentNode)}})}function Af(a){var b=a.nextSibling.href+'" target="_blank">'+td[j],c=l.body.getAttribute("de-image-search"),d="";c&&(c=c.split(";"),c.forEach(function(a){a=a.split(",");d+='<a class="de-src'+a[0]+(!a[1]?'" onclick="de_cImgSearch(event, \''+
a[0]+'\')" href="#" de-url="':'" href="'+a[1])+b+a[0]+"</a>"}));La(a,n,'<a class="de-src-iqdb" href="//iqdb.org/?url='+b+'IQDB</a><a class="de-src-tineye" href="//tineye.com/search/?url='+b+'TinEye</a><a class="de-src-google" href="//google.ru/searchbyimage?image_url='+b+'Google</a><a class="de-src-saucenao" href="//saucenao.com/search.php?url='+b+"SauceNAO</a>"+d);d=m}function Bf(){function a(){try{d=c(z,0>=d?0:d-1,-1,i,n),f=i}catch(a){}}function b(){if(d!==z.length-1)try{d=c(z,d+1,1,z[d+1].k||z[d+
1].getBoundingClientRect().top>window.innerHeight/2-z[d+1].clientHeight/2,n),f=i}catch(a){}}function c(a,b,c,d,k){for(var e=b;a[e].h||a[e].H.h;)e+=c;a=a[e];if(e!==b||d)window.scrollTo(0,k?ma(a).top:ma(a).top-window.innerHeight/2+a.clientHeight/2);(b=w("de-selected",l))&&g.Q(b,"de-selected");a.k&&(a=a.H);g.q(a,"de-selected");return e}var d,k=0,r=n,f=i,Ga=i;window.onscroll=function(){r?r=n:Ga=f=i};l.addEventListener("keydown",function(o){var h=o.target.tagName,j=o.keyCode;if("TEXTAREA"===h||"INPUT"===
h&&"text"===o.target.type)27===j&&o.target.blur();else if(!o.ctrlKey&&!o.altKey&&!(o.shiftKey||74!==j&&75!==j&&77!==j&&78!==j&&86!==j&&116!==j))if(116===j)u||(y(o),qe(1));else{y(o);o.stopPropagation();if(Ga){if(f)a:{for(var o=z,h=0,l=window.pageYOffset;h<o.length;h++)if(ma(o[h]).top>l){o=h-1;break a}o=ja}else o=z.indexOf(fa[k]);d=o}if(!u&&f)if((z[d]||{}).k)k=h=fa.indexOf(z[d]);else if(Ga){for(h=0>=d?0:d;0<h&&!z[h].k;h--);k=h=fa.indexOf(z[h])}else h=k;else h=k;f=Ga=n;if(86===j)u?tc(z[d]):g.c?GM_openInTab(xa(e.host,
x,fa[h].a),n,i):window.open(xa(e.host,x,fa[h].a),"_blank");else if(r=i,75===j)if(u)a();else try{k=c(fa,0>=k?0:k-1,-1,i,i),Ga=i}catch(p){}else if(74===j)if(u)b();else{if(k!==fa.length-1)try{k=c(fa,k+1,1,i,i),Ga=i}catch(q){}}else!u&&77===j?a():!u&&78===j&&b()}},i)}function re(a,b){if(e.C||e.ha)return a.replace(/\?[^?]+$|$/,(e.X?"?board="+x+"&":"?")+Math.random());0<b&&(a=a.replace(/mainpage|res\d+/ig,"res"+b));return a.replace(/dummy=[\d\.]*/,"dummy="+Math.random())}function eb(a){var b=h.W?p("recaptcha_image")||
h.W:T(h.O+"//img",h.j);e.i||h.W?(a=l.createEvent("MouseEvents"),a.initEvent("click",i,i),b.dispatchEvent(a)):(a=re(b.getAttribute("src"),a),b.src="",b.src=a)}function se(){var a=f.sageReply;p("de-sagebtn").innerHTML="&nbsp;"+(a?'<span class="de-btn-sage"></span><b style="color: red;">SAGE</b>':"<i>(no&nbsp;sage)</i>");"text"===h.J.type?h.J.value=a?"sage":e.d?"noko":"":h.J.checked=a;e.A&&Wd("email",a?"sage":"",1E5)}function rc(){var a=l.querySelector('input[info="nameValue"]');a&&Q("nameValue",a.value);
h.name.value=f.userName?f.nameValue:""}function ke(){var a=l.querySelector('input[info="passwValue"]');a&&Q("passwValue",a.value);(h.yb||{}).value=h.P.value=f.passwValue}function Cf(){function a(){ac(l.body,{mousemove:b,mouseup:a});Q("textaWidth",parseInt(h.g.style.width,10));Q("textaHeight",parseInt(h.g.style.height,10))}function b(a){var b=ma(h.g);h.g.style.width=a.pageX-b.left+"px";h.g.style.height=a.pageY-b.top+"px"}K(h.g,t("div",{id:"de-txt-resizer"},{mousedown:function(c){y(c);R(l.body,{mousemove:b,
mouseup:a})}}))}function uc(a){B(a.querySelectorAll('input[type="file"]'),function(a){R(a,{change:te})})}function ue(a){B(a.querySelectorAll(".de-file-util"),v);B(a.querySelectorAll('input[type="file"]'),function(a){a.V=m})}function te(){this.Bb?this.V&&(this.V=m,v(this.nextSibling)):(this.Bb=i,K(this,U(L(nb[j],m,function(a){y(a);a=this.parentNode;ue(a);R(h.file=Sd('input[type="file"]',Td(a,a.innerHTML)),{change:te})}),{"class":"de-file-util de-file-del"})));e.Ha&&(v(w("de-file-rar",this.parentNode)),
/^image\/(?:png|jpeg)$/.test(this.files[0].type)&&K(this,U(L(wd[j],m,function(a){y(a);var a=p("de-file-rar")||l.body.appendChild(t("input",{id:"de-file-rar",type:"file",style:"display: none"},m)),b=this.parentNode.querySelector('input[type="file"]'),c=this;a.onchange=function(){v(c);var a=this.files[0],k=new FileReader,e=C('<span class="de-file-util" style="margin: 0 5px;"><span class="de-wait"></span>'+xd[j]+"</span>");K(b,e);k.onload=function(){if(b.nextSibling===e){U(e,{style:"font-weight: bold; margin: 0 5px; cursor: default;",
title:b.files[0].name+" + "+a.name,text:"rarJPEG"});b.V=this.result}e=b=a=m};k.readAsArrayBuffer(a);c=m};a.click()}),{"class":"de-file-util de-file-rar"})));uc(T(h.O,this))}function ve(a,b,c){h.form.style.display="inline-block";h.form.style.textAlign="left";g.b?Cf():R(h.g,{mouseup:function(){Q("textaWidth",parseInt(this.style.width,10));Q("textaHeight",parseInt(this.style.height,10))}});qc();h.g.style.cssText="width: "+f.textaWidth+"px; height: "+f.textaHeight+"px;";R(h.g,{keypress:function(a){var b=
a.charCode||a.keyCode;if((33===b||34===b)&&0===a.which)a.target.blur(),window.focus()}});R(h.fa,{click:function(){var a=h.g.value,b=f.signatValue;f.hideBySpell&&S.Fa[0]&&(a=we(S.Fa,a));f.userSignat&&b&&(a+="\n"+b);if(h.G&&"Dollchan Extension Tools"===(w("filetitle",G[h.G])||{}).textContent&&!/`\n`\-{50}`/.test(a))a+="\n\n`--------------------------------------------------`\n`"+window.navigator.userAgent+"`\n`v"+f.version+"`\n`--------------------------------------------------`";h.g.value=a;f.checkReply&&
I(Qb[j],"upload",i);f.favOnReply&&h.G&&ce(G[h.G],w("de-btn-fav",G[h.G].B));h.G?ca.reply=+ca.reply+1:ca.op=+ca.op+1;N("DESU_Stat_"+e.e,JSON.stringify(ca));if(h.I&&(a=h.I.value)&&(a=a.match(fb())))h.I.value="http://www.youtube.com/watch?v="+a[1];h.F&&(H(p("de-qarea")),K(p("de-togglereply"),p("de-pform")))}});B(h.form.querySelectorAll('input[type="text"], input[type="file"]'),function(a){a.size=30});f.noGoto&&h.ma&&H(h.ma);f.noPassword&&h.P&&H(T(h.O,h.P));R(window,{load:function(){f.userName&&h.name&&
setTimeout(rc,1E3);h.P&&setTimeout(ke,1E3)}});h.W&&(U(h.fa,{onclick:"Recaptcha.focus_response_field = function() {}"}),(c=p("recaptcha_image"))&&U(c,{onclick:"Recaptcha.reload()",style:"width: 300px; cursor: pointer;"}));if(h.j&&(e.A&&setTimeout(function(){eb(0);h.j.onclick=m},50),h.j.autocomplete="off",h.j.onfocus=m,h.j.onkeypress=function(a){if(f.captchaLang&&a.which!==0){var b,c=a.charCode||a.keyCode,e=String.fromCharCode(c).toLowerCase();if(f.captchaLang===1){if(c<1040||c>1279||(b="йцукенгшщзхъфывапролджэячсмитьбюё".indexOf(e))===
-1)return;e="qwertyuiop[]asdfghjkl;'zxcvbnm,.`"[b]}else{if(c<33||c>122||(b="qwertyuiop[]asdfghjkl;'zxcvbnm,.`".indexOf(e))===-1)return;e="йцукенгшщзхъфывапролджэячсмитьбюё"[b]}y(a);Ra(a.target,e)}},!e.i&&!h.W)){a=e.C?Sd("a, img",T(h.O,h.j)):T(h.O+"//img",h.j);b=t("img",{alt:ua[j],title:yd[j],style:"display: block; border: none; cursor: pointer;"},
{click:function(){eb(u||0)}});if(a)a.parentNode.replaceChild(b,a);else{for(;h.j.nextSibling;)v(h.j.nextSibling);K(h.j,b)}setTimeout(function(b){b.src=re(e.X?"/faptcha.php?board="+x:e.Ya?"/securimage/securimage_show.php?"+Math.random():e.C?"/"+x.substr(0,x.indexOf("/")+1)+"captcha.php?"+Math.random():a?a.src:"/"+x+"/captcha.pl?key=mainpage&amp;dummy="+Math.random(),u||0)},50,b)}f.addSageBtn&&h.J&&(b=t("span",{id:"de-sagebtn"},{click:function(a){a.stopPropagation();y(a);yb("sageReply");se()}}),c=T("ancestor::label",
h.J)||h.J,c.nextElementSibling||c.previousElementSibling?(H(c),K(c,b)):(H(T(h.O,h.J)),K(h.name||h.fa,b)),setTimeout(se,0));f.checkReply&&(g.ab?(h.form.onsubmit=function(a){y(a);vc(new zb(h.form,h.fa),xe)},A.onsubmit=y,B(A.querySelectorAll('input[type="submit"]'),function(a){a.onclick=function(a){y(a);Ba();I(Zb[j],"deleting",i);vc(new zb(A,this),ye)}}),e.Ha=!e.A&&!e.d):(ea(p("de-main"),[C('<iframe id="de-iframe-pform" name="de-iframe-pform" src="about:blank"/>'),C('<iframe id="de-iframe-dform" name="de-iframe-dform" src="about:blank"/>')]),
U(h.form,{target:"de-iframe-pform"}).onsubmit=m,U(A,{target:"de-iframe-dform"}).onsubmit=function(){Ba();I(Zb[j],"deleting",i)}));h.file&&uc(T(h.O,h.file));e.K&&((c=p("posttypeindicator"))&&v(c.parentNode),h.j.style.cssText="display: block; float: left; margin-top: 1em;")}function ze(a){if(!a.body.firstChild||a.querySelector(e.qa))return n;var b="";B(a.querySelectorAll(e.i?".post-error, h2":e.C?'h1, h2, div[style*="1.25em"]':e.d?"#errmsg":e.f?".message_text":e.m?"pre":'h1, h2, font[size="5"]'),function(a){b+=
a.innerHTML+"\n"});(b=b.replace(/<br.*/i,""))||(b=rb[j]+"\n"+a.body.innerHTML);return/successful|uploaded|updating|обновл|удален[о\.]/i.test(b)?n:b}function Ae(){qa(p("de-alert-upload"));2===f.updThread&&ra(m,0)}function xe(a,b){var c;if(a){h.F&&(H(c=p("de-qarea")),c.appendChild(p("de-pform")));if(e.i&&/подтвердите, что вы человек/.test(a)||
h.j&&/captch|капч|подтверж/i.test(a))h.j.value="",h.j.focus(),eb(h.G);I(a,"upload",n)}else(h.g.value="",h.file&&(c=T(h.O,h.file),ue(c),c=Td(c,c.innerHTML),h.file=c.querySelector('input[type="file"]'),uc(c)),h.I&&(h.I.value=""),c=h.G)?(Ba(),u?Ab(n,Ae):db(G[c],5,Ae),h.j&&(h.j.value="",eb(c))):window.location=!e.d?b:P("meta",dc).content.match(/http:\/\/[^"]+/)[0]}function Be(){var a=p("de-alert-deleting");a&&(qa(a),I(zd[j],"deleted",n))}function ye(a){var b=
[];a?I(Ad[j]+a,"deleting",n):(B(A.querySelectorAll("[de-post] input:checked"),!u?function(a){a=Z(a).H.a;-1===b.indexOf(a)&&b.push(a)}:function(a){a.checked=n}),u?Ab(n,Be):b.forEach(function(a){db(G[a],5,Be)}));b=m}function vc(a,b){if(!a.error)if(0<a.wa)setTimeout(vc,200,a,b);else{var c={"Content-type":"multipart/form-data; boundary="+a.ja};g.c&&(c.Referer=""+l.location);a.data.push("--"+a.ja+"--\r\n");GM_xmlhttpRequest({method:"POST",headers:c,data:g.ia(a.data,m),url:g.ya(a.url),onreadystatechange:function(a){4===
a.readyState&&(200===a.status?(b(ze(g.mb(a.responseText)),a.finalUrl),b=m):I(0===a.status?la[j]:"HTTP ["+a.status+"] "+a.statusText,"upload",n))}})}}function Df(a,b,c){function d(b){return a[b+3]<<24|a[b+2]<<16|a[b+1]<<8|a[b]}function k(b){return a[b+1]<<8|a[b]}var e,f,g,o,h,j=0,l=0,p=0;"MM"===String.fromCharCode(a[b],a[b+1])&&(k=function(b){return a[b]<<8|a[b+1]},d=function(b){return a[b]<<24|a[b+1]<<16|a[b+2]<<8|a[b+3]});if(42!==k(b+2))return a=m,[0,0,1,0,1];e=d(b+4);if(e>c)return a=m,[0,0,1,0,
1];h=k(e+=b);for(f=0;f<h;f++)if(g=e+2+12*f,o=k(g),!(282!==o&&283!==o&&296!==o))if(296===o)p=k(g+8)-1;else{g=d(g+8);if(g>c)return a=m,[0,0,1,0,1];g+=b;282===o?j=+(d(g)/d(g+4)).toFixed(0):l=+(d(g)/d(g+4)).toFixed(0)}j=0===j?l:j;l=0===l?j:l;a=m;return[p,j>>8,j&255,l>>8,l&255]}function Ef(a,b){var c=0,d=0,k=new Uint8Array(a),e=k.length,D=0,g=!!f.removeEXIF,o=n;if(!f.postSameImg&&!g&&!b)return[a];if(255===k[0]&&216===k[1]){for(;c<e-1;)a:{if(255===k[c]){if(g&&(225===k[c+1]&&69===k[c+4]&&!o?o=Df(k,c+10,
(k[c+2]<<8)+k[c+3]):224===k[c+1]&&70===k[c+7]&&!o&&(o=[k[c+11],k[c+12],k[c+13],k[c+14]]),14===k[c+1]>>4||254===k[c+1])){c+=2+(k[c+2]<<8)+k[c+3];break a}if(216===k[c+1])D++;else if(217===k[c+1]&&0===--D){k[d]=k[c];break}}d!==c&&(k[d]=k[c]);c++;d++}d+=2;c+=2;if(d!==c){if(k[d-1]=k[c-1],!b&&75<e-d)for(;c<e;k[d++]=k[c++]);}else if(d===e||!b&&75<e-d)return[a];if(g){c=D=new Uint8Array(e=d+18);c[0]=255;c[1]=216;c[2]=255;c[3]=224;c[4]=0;c[5]=16;c[6]=74;c[7]=70;c[8]=73;c[9]=70;c[10]=0;c[11]=1;c[12]=1;c[18]=
0;c[19]=0;c[13]=o[0];c[14]=o[1];c[15]=o[2];c[16]=o[3];c[17]=o[4];c=2;for(d=20;d<e;c++,d++)D[d]=k[c];return[D]}}else if(137===k[0]&&80===k[1]){for(;d<e-7&&!(73===k[d]&&69===k[d+1]&&78===k[d+2]&&68===k[d+3]);d++);d+=8;if(d===e||!b&&75<e-d)return[a]}else return m;return[new Uint8Array(a,d)]}function zb(a,b){this.ja="---------------------------"+Math.round(1E11*Math.random());this.data=[];this.wa=0;this.error=n;this.url=a.action;B(a.querySelectorAll('input:not([type="submit"]), textarea, select'),this.append.bind(this));
this.append(b)}function tc(a){var b=a.H.a,c=p("de-qarea");h.G=b;if(h.F){if(e.la(a).nextElementSibling===c){H(c);Ba();return}}else h.F=i,c.appendChild(p("de-pform")),H(p("de-togglereply")),!u&&!e.C&&!e.i&&(v(h.form.querySelector('#thr_id, input[name="parent"]')),Y(h.form.firstChild,C('<input type="hidden" id="thr_id" value="'+b+'" name="'+(e.d||e.n?"resto":e.o?"thread":"parent")+'">')),aa&&(v(aa.querySelector('input[name="oek_parent"]')),Y(aa.firstChild,C('<input type="hidden" value="'+b+'" name="oek_parent">'))));
K(e.la(a),c);c.style.display="";u||(Ce(b),f.noThrdForm&&(p("de-parea").style.display="none"));h.j&&!h.W&&!e.C&&eb(b);e.m&&"Comment"===h.g.value&&(h.g.value="");Ra(h.g,">>"+a.a+(Ma||"").replace(/(?:^|\n)(.)/gm,"\n> $1")+"\n");3===f.addPostForm&&U(P("a",p("de-qarea-target")),{href:xa(e.host,x,b),text:"#"+b})}function Ba(){if(h.F){var a=p("de-togglereply"),b=p("de-qarea");h.F=n;u||(Ce(0),v(p("thr_id")));H(a);b.style.display="none";K(p("de-parea"),b);K(a,p("de-pform"))}}function Ce(a){h.form.querySelector('#thr_id, input[name*="thread"]').value=
a;aa&&(aa.querySelector('input[name="oek_parent"], input[name="replyto"]').value=a);e.gb&&(h.form.querySelector('input[name="quickreply"]').value=a||"")}function fe(a){var b=p("de-parea");y(a);h.F?(b.style.display="",Ba()):H(b);cc(b)}function Ff(a){/Reply|Ответ/.test(a.target.textContent)||((a.stopPropagation(),y(a),!u&&f.noThrdForm&&!h.F&&(p("de-parea").style.display=""),a=Z(a.target).a,u&&1<f.addPostForm&&!h.F)?tc(G[a]):(e.m&&"Comment"===h.g.value&&(h.g.value=""),Ra(h.g,
">>"+a)))}function qc(){if(h.g){var a=e.C||e.A||e.f||e.m||e.D,b={bold:[e.m?"**":a?"b":"**","B"],italic:[e.m?"*":a?"i":"*","i"],under:[a?"u":"__","U"],strike:[e.D?"-":a?"s":e.X?"^^":"","S"],spoil:[e.D?"s":e.m?"%":a||e.d?"spoiler":"%%","%"],code:[e.D?"c":e.f?"aa":e.m?"pre":a?"code":"`","C"],quote:[,"&gt;"]},c=function(d){var k=h.g,r=p("de-btn-"+d),D=b[d][1];r||(r=t("span",{id:"de-btn-"+d,title:Bd[d][j]},m),"&gt;"!==D?r.onclick=function(c){var d,r,f=k.selectionStart,D=k.selectionEnd,g=k.scrollTop,h=
k.value.substring(f,D).split("\n"),j=h.length;d=b[this.id.substring(7)][0];y(c);a||e.d&&"spoiler"===d?(c="["+d+"]",d="[/"+d+"]"):c=d;for(;j--;){if(!c)for(r=h[j].trim().length;r--;)d+="^H";r=D+c.length+d.length;h[j].match(/^\s+/)&&(c=h[j].match(/^\s+/)[0]+c);h[j].match(/\s+$/)&&(d+=h[j].match(/\s+$/)[0]);h[j]=c+h[j].trim()+d}k.value=k.value.substr(0,f)+h.join("\n")+k.value.substr(D);k.setSelectionRange(r,r);k.focus();k.scrollTop=g}:(r.onmouseover=function(){Ma=ec()},r.onclick=function(a){var b=k.selectionStart,
c=k.selectionEnd;y(a);Ra(k,"> "+(b===c?Ma:k.value.substring(b,c)).replace(/\n/gm,"\n> "))}),p("de-txt-panel").appendChild(r));r.innerHTML=2===f.addTextBtns?("B"===D?"[ ":"")+'<a href="#">'+D+"</a>"+("&gt;"!==D?" / ":" ]"):3===f.addTextBtns?'<input type="button" value="'+D+'" style="font-weight: bold;" />':"";return c};K(f.txtBtnsLoc?p("de-txt-resizer")||h.g:e.m?w("popup",h.form):h.fa,U(p("de-txt-panel")||t("span",{id:"de-txt-panel"},m),{lang:!f.addTextBtns?"en":!f.txtBtnsLoc?"ru":""}));c("bold")("italic");
e.m||c("under")("strike");c("spoil")("code")("quote")}}function wc(a){var b,c=a.querySelector(e.jb),d='<span class="de-ppanel'+(a.k?"-op":"")+' de-ppanel-cnt" info="'+a.a+'"><span class="de-btn-hide" onclick="de_hideClick(this)" onmouseover="de_hideOver(this)" onmouseout="de_btnOut(event)"></span>'+(h.Hb||aa?'<span class="de-btn-rep" onclick="de_qReplyClick(this)" onmouseover="de_qReplyOver(this)"></span>':"");a.k&&(b=e.host,u||(d+='<span class="de-btn-expthr" onclick="de_expandClick(this)" onmouseover="de_expandOver(this)" onmouseout="de_btnOut(event)"></span>'),
E[b]&&E[b][x]&&E[b][x][a.a]?(d+='<span class="de-btn-fav-sel" onclick="de_favorClick(this)"></span>',E[b][x][a.a].Sa=a.H.M+1):d+='<span class="de-btn-fav" onclick="de_favorClick(this)"></span>');g.aa(c,d+(a.ea?'<span class="de-btn-sage" title="SAGE" onclick="de_sageClick(this)"></span>':"")+"</span>");a.B=c.nextSibling;h.L&&f.insertNum&&((e.ha||e.K&&u)&&B(c.getElementsByTagName("a"),function(a){a.onclick=m}),e.w||(c.onclick=Ff))}function Gf(){gc('function de_removeSel() {\t\t\tvar el = document.getElementById("de-select");\t\t\tif(el) {\t\t\t\tel.parentNode.removeChild(el);\t\t\t}\t\t}\t\tfunction de_delSelection(e) {\t\t\tif(e.relatedTarget && !document.evaluate("ancestor-or-self::div[@id=\'de-select\']", e.relatedTarget, null, 3, null).booleanValue) {\t\t\t\tde_removeSel();\t\t\t}\t\t}\t\tfunction de_btnOut(e) {\t\t\tclearTimeout(e.target.de_overDelay);\t\t\tde_delSelection(e);\t\t}\t\tfunction de_btnOver(el, data) {\t\t\tel.de_overDelay = setTimeout(function(msg) {\t\t\t\twindow.postMessage(msg, "*");\t\t\t}, '+
f.linksOver+', data);\t\t}\t\tfunction de_hideOver(el) {\t\t\tde_btnOver(el, "A" + el.parentNode.getAttribute("info"));\t\t}\t\tfunction de_imgSOver(el) {\t\t\tde_btnOver(el, "L" + el.getAttribute("de-id"));\t\t}\t\tfunction de_expandOver(el) {\t\t\tde_btnOver(el, "B" + el.parentNode.getAttribute("info"));\t\t}\t\tfunction de_hideClick(el) {\t\t\twindow.postMessage("D" + el.parentNode.getAttribute("info"), "*");\t\t}\t\tfunction de_qReplyClick(el) {\t\t\twindow.postMessage("F" + el.parentNode.getAttribute("info"), "*");\t\t}\t\tfunction de_qReplyOver(el) {\t\t\twindow.postMessage("C" + el.parentNode.getAttribute("info"), "*");\t\t}\t\tfunction de_expandClick(el) {\t\t\twindow.postMessage("E" + el.parentNode.getAttribute("info"), "*");\t\t}\t\tfunction de_favorClick(el) {\t\t\twindow.postMessage("G" + el.parentNode.getAttribute("info"), "*");\t\t}\t\tfunction de_sageClick(el) {\t\t\twindow.postMessage("H" + el.parentNode.getAttribute("info"), "*");\t\t}\t\tfunction de_cImgSearch(e, name) {\t\t\te.preventDefault();\t\t\twindow.postMessage("_" + name + ";" + e.target.getAttribute("de-url"), "*");\t\t\tde_removeSel();\t\t}');
R(window,{message:function(a){var b=a.data.substring(1);switch(a.data[0]){case "A":xf(G[+b]);break;case "B":zf(G[+b]);break;case "C":Ma=ec();break;case "D":a=G[+b];Ka(a,!a.h);Wa();break;case "E":db(G[+b],1,m);break;case "F":tc(G[+b]);break;case "G":a=G[+b];ce(a,w("de-btn-fav",a)||w("de-btn-fav-sel",a));break;case "H":cb("#sage");break;case "I":v(p("de-fav-wait"));p("de-iframe-fav").style.height=b+"px";break;case "J":a=b.split("$#$");"de-iframe-pform"===a[0]?xe(a[1],a[2]):ye(a[1]);p(a[0]).src="about:blank";
break;case "L":Af(A.querySelector('.de-btn-src[de-id="'+b+'"]'))}}});g.ba||gc('(function() {\t\t"use strict";\t\twindow.addEventListener("message", function(e) {\t\t\tvar id = e.data[0],\t\t\t\tdata = e.data.substring(1);\t\t\tif(id === "K") {\t\t\t\tvar mReqs = data === "all" ? 4 : 1, i = mReqs, rjw'+(f.findRarJPEG?'= []; while(i--) rjw.push(new Worker("'+window.URL.createObjectURL(g.ia(["self.onmessage = "+Hf],m))+'"));':";")+"preloadImages(data, mReqs, rjw);\t\t\t\treturn;\t\t\t}\t\t});\t\tvar $x = function(path, root) {\t\t\t\treturn document.evaluate(path, root, null, 8, null).singleNodeValue;\t\t\t},\t\t\ttoBlob = "+
(""+g.ia)+",\t\t\tgetPostImages = "+(""+Fa)+",\t\t\tgetPicWrap = "+(""+e.Xa)+";\t\tfunction preloadImages(pNum, mReqs, rjw) {\t\t\tvar len, el, cReq = 0, i = 0, arr = [],\t\t\t\tbwrk = mReqs === 4 ? [0, 0, 0, 0] : [0],\t\t\t\tloadFunc = function(idx) {\t\t\t\t\tif(idx >= arr.length) {\t\t\t\t\t\tif(cReq === 0) {\t\t\t\t\t\t\tmReqs = cReq = i = arr = loadFunc = null;\t\t\t\t\t\t}\t\t\t\t\t\treturn;\t\t\t\t\t}\t\t\t\t\tvar xhr, url, type, eImg = "+!!f.noImgSpoil+",\t\t\t\t\t\ta = arr[idx];\t\t\t\t\tif(!a || !(url = a.href)) {\t\t\t\t\t\tloadFunc(i++);\t\t\t\t\t\treturn;\t\t\t\t\t}\t\t\t\t\tif(/.gif$/i.test(url)) {\t\t\t\t\t\teImg |= "+
!!f.showGIFs+';\t\t\t\t\t\ttype = "image/gif";\t\t\t\t\t} else if(/.jpe?g$/i.test(url)) {\t\t\t\t\t\ttype = "image/jpeg";\t\t\t\t\t} else if(/.png$/i.test(url)) {\t\t\t\t\t\ttype = "image/png";\t\t\t\t\t} else {\t\t\t\t\t\tloadFunc(i++);\t\t\t\t\t\treturn;\t\t\t\t\t}\t\t\t\t\tif(cReq === mReqs) {\t\t\t\t\t\tsetTimeout(loadFunc, 500, idx);\t\t\t\t\t\treturn;\t\t\t\t\t}\t\t\t\t\tcReq++;\t\t\t\t\txhr = new XMLHttpRequest();\t\t\t\t\txhr.open("GET", url, true);\t\t\t\t\txhr.responseType = "arraybuffer";\t\t\t\t\txhr.onload = function() {\t\t\t\t\t\tif(this.status == 200) {\t\t\t\t\t\t\ta.download = url.substring(url.lastIndexOf("/") + 1);\t\t\t\t\t\t\tvar href = a.href = window.'+
(g.p?"webkit":"")+'URL.createObjectURL(toBlob([new Uint8Array(this.response)], type));\t\t\t\t\t\t\tif(eImg) {\t\t\t\t\t\t\t\ta.getElementsByTagName("img")[0].src = href;\t\t\t\t\t\t\t}'+(f.findRarJPEG?"parseRJ(a);":"")+"cReq--; loadFunc(i++); a = eImg = url = type = null;\t\t\t\t\t\t}\t\t\t\t\t};\t\t\t\t\txhr.send(null);\t\t\t\t}"+(f.findRarJPEG?",\t\t\t\tparseRJ = function(link) {\t\t\t\t\tvar wI = bwrk.indexOf(0), w;\t\t\t\t\tif(wI === -1) {\t\t\t\t\t\tsetTimeout(parseRJ, 500, link);\t\t\t\t\t\treturn;\t\t\t\t\t}\t\t\t\t\tw = rjw[wI];\t\t\t\t\tbwrk[wI] = 1;\t\t\t\t\tw.onmessage = function(e) {\t\t\t\t\t\tif(e.data) {\t\t\t\t\t\t\tgetPicWrap(link).querySelector('"+
e.hb+'\').className += " de-archive";\t\t\t\t\t\t}\t\t\t\t\t\tbwrk[wI] = 0;\t\t\t\t\t\tlink = wI = null;\t\t\t\t\t};\t\t\t\t\tw.onerror = function(e) {\t\t\t\t\t\tconsole.error("RARJPEG ERROR, line: " + e.lineno + " - " + e.message);\t\t\t\t\t\tbwrk[wI] = 0;\t\t\t\t\t\tlink = wI = null;\t\t\t\t\t};\t\t\t\t\tw.postMessage(link.href);\t\t\t\t};':";")+'el = getPostImages(pNum === "all" ? document : document.querySelector("[de-post=\'" + pNum + "\']"));\t\t\tfor(i = 0, len = el.length; i < len; i++) {\t\t\t\tarr.push($x("ancestor::a[1]", el[i]));\t\t\t}\t\t\tfor(i = 0; i < mReqs; i++) {\t\t\t\tloadFunc(i);\t\t\t}\t\t}})()')}
function oa(a,b,c,d,e){oa.Qa(a)?this.disabled=i:(this.lb=a.replace(/(?:[sihdny]\?){2,}/g,function(a){return"(?:"+a.replace(/\?/g,"")+")?"}).replace(/\-/g,"[^<]").replace(/\+/g,"[^0-9]").replace(/([sihdny]+)/g,"($1)").replace(/[sihdny]/g,"\\d").replace(/m|w/g,"([a-zA-Zа-яА-Я]+)"),this.pattern=a.replace(/[\?\-\+]+/g,"").replace(/([a-z])\1+/g,"$1"),this.xb=parseInt(b,10),this.rb=Cd[c],this.qb=Dd[c],this.pb=Ed[c],d&&e&&ic(d)===+e&&(this.Za=i,this.da=d.substring(1),this.za=!!+d[0]))}
function If(a,b){GM_xmlhttpRequest({method:"GET",url:"https://www.youtube.com/watch?v="+a,onload:function(a){var d,e,r,f,g=[];d="%2C";var o="%26",h="%3D";if(e=a.responseText.match(/\"url_encoded_fmt_stream_map\":\s*\"([^\"]+)\"/)){e=e[1];e.contains(",")&&(d=",",o=e.contains("&")?"&":"\\u0026",h="=");a=0;d=e.split(d);for(e=d.length;a<e;a++)r=d[a].split(o),5>r.length||(f=r[0].split(h),2>f.length||(f=unescape(unescape(f[1])).replace(/\\\//g,"/").replace(/\\u0026/g,"&"),r=r[4].split(h),2>r.length||0===
f.toLowerCase().indexOf("http")&&(g[r[1]]=f)));b(g)}else b(n);b=m}})}function De(a,b,c){var d=' width="'+f.YTubeWidth+'" height="'+f.YTubeHeigh+'" />';a.innerHTML=1===f.YTubeType?'<iframe type="text/html" src="https://www.youtube.com/embed/'+b+(f.YTubeHD?"?hd=1&":"?")+"start="+c+'&html5=1" frameborder="0"'+d:'<embed type="application/x-shockwave-flash" src="https://www.youtube.com/v/'+b+(f.YTubeHD?"?hd=1&":"?")+"start="+c+'" wmode="transparent"'+d}function xc(a,b){var c=b[1],d=(b[2]?3600*b[2]:0)+
(b[3]?60*b[3]:0)+(b[4]?+b[4]:0);2!==f.YTubeType?De(a,c,d):If(c,function(b){(b=b?!f.YTubeHD?b[43]:b[45]||b[44]||b[43]:n)?(a.innerHTML='<video poster="https://i.ytimg.com/vi/'+c+'/0.jpg" controls="controls" preload="none" src="'+b+(g.c&&14>g.c?"&"+Math.random():"")+'" width="'+f.YTubeWidth+'" height="'+f.YTubeHeigh+'"></video>',0!==d&&(a.firstChild.Tb=function(){this.currentTime=d;d=m})):De(a,c,d)})}function yc(a,b){a.innerHTML='<a href="https://www.youtube.com/watch?v='+b[1]+'" target="_blank"><img src="https://i.ytimg.com/vi/'+
b[1]+'/0.jpg" width="360" height="270" /></a>';3===f.addYouTube&&(a.firstChild.onclick=function(a){y(a);xc(this.parentNode,b)})}function fb(){return/^https?:\/\/(?:www\.)?youtu(?:be\.com\/(?:watch\?.*?v=|v\/|embed\/)|\.be\/)([^&#?]+).*?(?:t(?:ime)?=(?:(\d+)h)?(?:(\d+)m)?(?:(\d+)s)?)?$/}function Ee(a){var b=this.href.match(fb()),c=w("de-ytube-obj",Z(this));y(a);da('*[contains(@src,"'+b[1]+'")]|video[contains(@poster,"'+b[1]+'")]',c)?c.innerHTML="":2<f.addYouTube&&!da('a[contains(@href,"'+b[1]+'")]',
c)?yc(c,b):xc(c,b)}function Bb(a){f.addYouTube&&(B((a||A).querySelectorAll("embed"),function(b){var c,d;if(d=b.src.match(fb())){c="https://www.youtube.com/watch?v="+d[1];if(d[4]||d[3]||d[2])c+="#t="+(d[2]?d[2]+"h":"")+(d[3]?d[3]+"m":"")+(d[4]?d[4]+"s":"");d=a||Z(b);(d.l||d.querySelector(e.z)).appendChild(C('<p class="de-ytube-ext"><a href="'+c+'">'+c+"</a></p>"));v(b.parentNode)}}),B((a||A).querySelectorAll('a[href*="youtu"]'),function(b){var c,d,k,r,D=b.href.match(fb());D&&(b.href=b.href.replace(/^http:/,
"https:"),c=a||Z(b),w("de-ytube-obj",c)||(d=t("div",{"class":"de-ytube-obj"},m),2<f.addYouTube?yc(d,D):2===f.addYouTube&&xc(d,D),k=c.l||c.querySelector(e.z),e.f?(k=k.parentNode,r=k.previousElementSibling,Y(r.hasAttribute("style")?r:k,d)):Y(k,d)),b.className="de-ytube-link",b.onclick=Ee,g.b&&12>g.b||!f.YTubeTitles?b.textContent=b.textContent.replace(/^http:/,"https:"):GM_xmlhttpRequest({method:"GET",url:"https://gdata.youtube.com/feeds/api/videos/"+D[1]+"?alt=json&fields=title/text(),media:group/media:keywords",
onload:function(a){try{var d=JSON.parse(a.responseText).entry.title.$t;b.textContent=d;if(f.hideBySpell)for(var e,a=0;e=S.I[a];a++)if(va(e).test(d)){gb(c,"#video "+e);c.Ma=i;clearTimeout(Fe);Fe=setTimeout(Ia,500);return}b=c=m}catch(k){}}}))}))}function Ge(){f.YTubeTitles&&B(A.querySelectorAll('a[href*="youtu"]'),function(a){for(var b,c=0,d=a.textContent;b=S.I[c++];)if(va(b).test(d)){a=Z(a);gb(a,"#video "+b);a.Ma=i;break}})}function Cb(a){f.addMP3&&B((a||A).querySelectorAll('a[href*=".mp3"]'),function(b){if("_blank"===
b.target||"nofollow"===b.rel){var c=a||Z(b),d=w("de-mp3",c);d||(d=t("div",{"class":"de-mp3"},m),Y(c.l||c.querySelector(e.z),d));da('.//object[contains(@FlashVars,"'+b.href+'")]',d)||(d.innerHTML+='<object data="//junglebook2007.narod.ru/audio/player.swf" type="application/x-shockwave-flash" wmode="transparent" width="220" height="16" FlashVars="playerID=1&amp;bg=0x808080&amp;leftbg=0xB3B3B3&amp;lefticon=0x000000&amp;rightbg=0x808080&amp;rightbghover=0x999999&amp;rightcon=0x000000&amp;righticonhover=0xffffff&amp;text=0xffffff&amp;slider=0x222222&amp;track=0xf5f5dc&amp;border=0x666666&amp;loader=0x7fc7ff&amp;loop=yes&amp;autostart=no&amp;soundFile='+
b.href+'" /><br>')}})}function Jf(a){function b(){ac(l.body,{mousemove:c,mouseup:b})}function c(b){a.style.left=b.clientX-a.ub+"px";a.style.top=b.clientY-a.vb+"px";a.bb=i}a.onmousedown=function(d){y(d);a.ub=d.clientX-parseInt(a.style.left,10);a.vb=d.clientY-parseInt(a.style.top,10);R(l.body,{mousemove:c,mouseup:b})}}function Kf(a){var b=a.clientX,c=a.clientY,d=parseInt(this.style.left,10),e=parseInt(this.style.top,10),f=parseFloat(this.style.width||this.width),D=parseFloat(this.style.height||this.height),
h=g.c?-a.detail:a.wheelDelta,o=f*(0<h?1.25:0.8),h=D*(0<h?1.25:0.8);y(a);this.style.width=o+"px";this.style.height=h+"px";this.style.left=parseInt(b-o/f*(b-d),10)+"px";this.style.top=parseInt(c-h/D*(c-e),10)+"px"}function He(a,b,c){var d="",e="",r=+b[0],b=+b[1],D=l.body.clientWidth,h=window.innerHeight,o=w("de-img-full",a);if(!(o&&c||!o&&c===n))if(1===f.expandImgs&&!da('img[contains(@style,"fixed")]',a)&&H(P("img",a)),o)o.bb?o.bb=n:(H(o),setTimeout(v,0,o));else if(1===f.expandImgs?D-=ma(a).left+25:
v(w("de-img-center",l)),r&&b&&(d=r<D?r:D,e=d*b/r,2===f.expandImgs&&e>h&&(e=h,d=e*r/b)),o=a.appendChild(C('<img class="de-img-full" src="'+a.href+'" alt="'+a.href+'" width="'+d+'" height="'+e+'"/>')),2===f.expandImgs)g.q(o,"de-img-center"),o.style.cssText="left: "+(D-d)/2+"px; top: "+(h-e)/2+"px;",o.addEventListener(g.c?"DOMMouseScroll":"mousewheel",Kf,n),Jf(o)}function Ie(a){a.onclick=function(a){f.expandImgs&&1!==a.button&&(y(a),He(this,this.firstChild.title.split("x"),m))}}function Db(a){if(f.addImgs)for(var b,
c=0,d=a.querySelectorAll(e.z+' a[href*=".jpg"], '+e.z+' a[href*=".png"], '+e.z+' a[href*=".gif"]'),k=d.length;c<k;c++){b=d[c];if("SMALL"===b.parentNode.tagName)break;a=b.cloneNode(n);a.target="_blank";H(a);a.appendChild(t("img",{"class":"de-img-pre",src:a.href,alt:a.href},{load:function(){var a,b;H(this.parentNode);a=this.width;b=this.height;this.title=a+"x"+b;200>=a&&200>=b||(a/=b,this.width=1>a?200*a:200,this.height=1>a?200:200/a)}}));Ie(a);Y(b,a)}}function Eb(a){if(f.imgSrcBtns)for(var b=a.a||
"",a=a.querySelectorAll(e.hb),c=a.length-1,d;0<=c;c--)d=a[c],/google\.|tineye\.com|iqdb\.org/.test(d.href)?v(d):d.firstElementChild||g.$a(d,'<span de-id="'+b+c+'" class="de-btn-src" onmouseover="de_imgSOver(this)" onmouseout="de_btnOut(event)"></span>')}function Je(a,b){/\.jpe?g|\.png|.\gif|^blob:/i.test(a.href)&&He(a,hc(e.Xa(a)),b)}function oc(a,b){B(a.r,function(a){Je(T("ancestor::a[1]",a),b)})}function Fb(a){B(a.r,function(a){var c=T("ancestor::a[1]",a);c&&(a.onclick=m,e.Ua&&(a.parentNode.onclick=
m),c.onclick=function(a){if(a.button!==1){y(a);Je(this,m)}})})}function Hf(a){var b,c,d;b=new XMLHttpRequest;b.open("GET",a.data,n);b.responseType="arraybuffer";b.send();a=new Uint8Array(b.response);d=a.length;if(255===a[0]&&216===a[1])for(c=b=0;b<d-1;b++){if(255===a[b])if(216===a[b+1])c++;else if(217===a[b+1]&&0===--c){b+=2;break}}else if(137===a[0]&&80===a[1])for(b=0;b<d-7;b++){if(73===a[b]&&69===a[b+1]&&78===a[b+2]&&68===a[b+3]){b+=8;break}}else{self.postMessage(n);return}if(b!==d&&60<d-b)for(d=
b+50;b<d;b++)if(55===a[b]&&122===a[b+1]||80===a[b]&&75===a[b+1]||82===a[b]&&97===a[b+1]){self.postMessage(i);return}self.postMessage(n)}function Ke(a){var b='<div class="de-refmap">'+a.u.join(", ").replace(/(\d+)/g,'<a href="#$1">&gt;&gt;$1</a>')+"</div>";try{g.aa(a.l,b)}catch(c){a.appendChild(C(b))}}function zc(a){var b=[];g.forEach(a,function(c){for(var d,e,f=this[c].l.getElementsByTagName("a"),g=f.length-1;0<=g;g--)if((d=f[g].textContent.match(/^>>(\d+)$/))&&(e=a[d[1]]))e.u?-1===e.u.indexOf(c)&&
e.u.push(c):(e.u=[c],b.push(e))});b.forEach(Ke);b=a=m}function Gb(a){if(a){a.parent?a.parent.U=m:sa=m;do{clearTimeout(a.Kb);var b=a;f.animation?(g.S(b,v),g.q(b,"de-pview-anim"),b.style[g.Z]="de-post-close-"+(b.Oa?"t":"b")+(b.Na?"l":"r")):v(b)}while(a=a.U)}}function bb(a,b){a&&(clearTimeout(mb),mb=setTimeout(Gb,f.linksOut,b?a:a.U))}function Ac(){this.style[g.Z]&&(g.Q(this,"de-pview-anim"),this.style.cssText=this.pa,this.pa=n,B(V("de-css-move",l.head),v),this.removeEventListener(g.Y,Ac,n))}function Le(a,
b,c){if(b.link!==a){b.link=a;var d,e;d=a.getBoundingClientRect();e=d.left+window.pageXOffset+a.offsetWidth/2;var r=d.top+window.pageYOffset,h=l.body.clientWidth,j=e<h/2,h=(j?h-e:e)-10,o="max-width:"+h+"px; left:"+(j?e:e-Math.min(parseInt(b.offsetWidth,10),h))+"px;";c?(h=b.style.cssText,b.style.cssText="opacity: 0; "+o):b.style.cssText=o;e=b.offsetHeight;d=e+d.top+a.offsetHeight<window.innerHeight||5>d.top-e;e=(d?r+a.offsetHeight:r-e)+"px";b.Na=j;b.Oa=d;!f.animation||!c?b.style.top=e:(a="de-movecss-"+
Math.round(1E3*Math.random()),l.head.appendChild(t("style",{"class":"de-css-move",type:"text/css",text:"@"+g.Ta+"keyframes "+a+" {to { "+o+" top:"+e+"; }}"},m)),b.pa?(b.style.cssText=b.pa,b.removeEventListener(g.Y,Ac,n)):b.style.cssText=h,b.pa=o+" top:"+e+";",b.addEventListener(g.Y,Ac,n),g.q(b,"de-pview-anim"),b.style[g.Z]=a)}}function Me(a,b){(w("de-pview-link",a)||{}).className="";(T('.//a[starts-with(text(),">>") and contains(text(),"'+b+'")]',a)||{}).className="de-pview-link"}function Hb(a,b,
c,d,k){clearTimeout(mb);var r;if(a){if(r=(k=a.ownerDocument===l)?a.cloneNode(i):Ib(a),r.setAttribute("de-post",m),r.className=e.t+" de-pview"+(a.La?" de-viewed":""),r.style.display="",e.R&&(r.firstElementChild.style.cssText="max-width: 100%; margin: 0;",v(w("doubledash",r))),r.a=b,B(r.querySelectorAll(".de-img-full, .de-ppanel, .de-ppanel-op"),v),k?(f.addYouTube&&(B(V("de-ytube-link",r),function(a){a.onclick=Ee}),3===f.addYouTube&&B(V("de-ytube-obj",r),function(a){yc(a,a.firstChild.href.match(fb()))})),
f.addImgs&&B(V("de-img-pre",r),function(a){Ie(a.parentNode)}),f.imgSrcBtns&&B(V("de-btn-src",r),function(a){a.setAttribute("de-id","pv"+a.getAttribute("de-id"))})):(Cb(r),Bb(r),Db(r),Eb(r)),B(r.r=Fa(r),function(a){a.style.display=""}),f.expandImgs&&Fb(r),2===f.linksNavig&&Me(r,c.a),hb(r),f.markViewed)r.Kb=setTimeout(function(a,b){if(!a.La){g.q(a,"de-viewed");a.La=i}var c=(sessionStorage["de-viewed"]||"").split(",");c.push(b);sessionStorage["de-viewed"]=c},2E3,a,b)}else k||(Ob[b]=i),r=C('<div class="'+
e.t+' de-pview-info de-pview">'+(k||$b[j])+"</div>");A.appendChild(r);Le(d,r,n);r.onmouseover=function(){bb(this,n)};r.onmouseout=function(){bb(sa,i)};r.fb=i;sa&&c.fb?(Gb(c.U),r.parent=c,c.U=r):(Gb(sa),sa=r);f.animation&&(g.S(r,function(a){g.Q(r,"de-pview-anim");a.style[g.Z]=""}),g.q(r,"de-pview-anim"),r.style[g.Z]="de-post-open-"+(r.Oa?"t":"b")+(r.Na?"l":"r"));return r}function Ne(a,b,c){if(!ta[a])return m;var d=ta[a][b];if(a===x||!d||d.ob)return d;b=tb(a)+Bc+c+(e.sa?".html":vb);a=d.getElementsByTagName("a");
for(c=a.length-1;0<=c;c--)/^>>\d+$/.test(a[c].textContent)&&(a[c].href=b);d.ob=i;return d}function Lf(a){var b=a.pathname.match(/^\/?(.*?)\/?(?:res|thread-|index|\d+|$)/)[1],c=(a.pathname.match(/[^\/]+\/[^\d]*(\d+)/)||[,0])[1],d=(a.textContent.match(/\d+$/)||[c])[0],k=G[d]||Ne(b,d,c),r=Z(a),g=r.fb?r.U:sa;if(!f.noNavigHidd||!k||!k.h)Ob[d]?Hb(m,d,r,a,$b[j]):g&&g.a===d?(bb(g,n),Gb(g.U),Le(a,g,i),Me(g,r.a)):k?Hb(k,d,r,a,m):(g=Hb(m,d,r,a,'<span class="de-wait">'+ua[j]+"</span>"),ta[b]=[],pa(m,b,c,i,function(k,
f,h){if(!h){var j=0,l=k.length;f.k=i;f.l=f.querySelector(e.z);for(ta[b][c]=f;j<l;j++)f=k[j],f.l=f.querySelector(e.z),ta[b][e.$(f)]=f;zc(ta[b]);g&&g.parentNode&&Hb(Ne(b,d,c),d,r,a,h)}b=d=c=r=g=m}))}function Mf(){2<this.textContent.length&&(this.Fb=setTimeout(Lf,f.linksOver,this))}function Nf(){clearTimeout(this.Fb);bb(sa,i)}function hb(a){if(f.linksNavig)for(var b=l.evaluate('.//a[starts-with(text(),">>")]',a,m,4,m);a=b.iterateNext();)a.onmouseover=Mf,a.onmouseout=Nf}function pa(a,b,c,d,k){GM_xmlhttpRequest({method:"GET",
url:g.ya(a||tb(b)+Bc+c+(e.sa?".html":vb)),onreadystatechange:function(a){if(4===a.readyState){if(200===a.status){var b=g.mb(a.responseText);!h.L&&aa&&(h=Oe(l.importNode(b.querySelector(e.ib),i)),Y(aa,h.form));d?Pe(b.querySelector(e.qa),b,function(a){k(e.Aa(a),e.Wa(a,b),m)}):k(m,b,m)}else k(m,m,0===a.status?la[j]:"HTTP ["+a.status+"] "+a.statusText);k=d=b=m}}})}function Qe(a,b){GM_xmlhttpRequest({method:"GET",url:g.ya(a),onreadystatechange:function(a){if(4===a.readyState)if(304===a.status)qa(p("de-alert-newposts"));
else{try{b(a.status,a.statusText,JSON.parse(a.responseText))}catch(d){b(1,d.toString(),m)}b=m}}})}function Ib(a){return Cc(l.importNode(a,i))}function Re(a){f.expandImgs&&Fb(a);a.h||Se(a);var b,c,d=[];c=a.l.getElementsByTagName("a");for(var e=c.length-1;0<=e;e--)(b=c[e].textContent.match(/^>>(\d+)$/))&&-1===d.indexOf(b=b[1])&&d.push(b);b=a.a;for(e=d.length-1;0<=e;e--)if(c=G[d[e]])c.u?-1===c.u.indexOf(b)&&c.u.push(b):c.u=[b],v(w("de-refmap",c)),Ke(c),hb(w("de-refmap",c)),f.hideRefPsts&&c.h&&gb(a,"reference to >>"+
d[e]);hb(a);Cb(a);Bb(a);Db(a);Ya&&oc(a,m)}function Jb(a,b,c,d){var k;Dc(b,c,a,d);wc(b);f.expandPosts&&!u&&Ec(b);Re(b);Eb(b);ib&&0!==d?(d=ib.cloneNode(i),(k=e.Aa(d)[0])?k.parentNode.replaceChild(b,k):d=b):d=b;a.appendChild(d);f.preLoadImgs&&window.postMessage("K"+c,"*");e.o&&a.appendChild(l.createElement("br"));return+!b.h}function Te(a){e.N&&(a.innerHTML=Fc(a.innerHTML),a.r=Fa(a));B(a.querySelectorAll(".de-ytube-obj"),v);Re(a)}function Ue(a,b){function c(b,c){if(d.a===c){v(a);var f=d.l.querySelector(".de-ytube-ext");
d.l.parentNode.replaceChild(l.importNode(b.querySelector(e.z),i),d.l);d.l=d.querySelector(e.z);f&&d.l.appendChild(f);Te(d);a=d=m;throw m;}}var d=Z(a);e.i?(v(a.nextSibling),v(a.previousSibling),v(a),d.l.replaceChild(d.querySelector(".alternate > div"),d.l.firstElementChild),b&&Te(d)):pa(m,x,d.H.a,i,function(b,f,g){if(!g)try{c(f,e.Ba(f)),B(b,function(a){c(a,e.$(a))})}catch(h){}a=d=m})}function Ec(a){if(!a.h&&(a=a.querySelector(e.f?'p[id^="post_truncated"]':e.i?".abbrev > span":".abbrev, .abbr, .omittedposts, .shortened"))&&
/long|full comment|gek\u00fcrzt|слишком|длинн|мног|полная версия/i.test(a.textContent))1===f.expandPosts?Ue(a,n):P("a",a).onclick=function(a){y(a);Ue(this,i)}}function db(a,b,c){c||I(ua[j],"load-thr",i);pa(m,x,a.a,i,function(d,k,f){var h,l,o=a.H,q=d.length;if(f)I(f,"load-thr",n);else{Ba();v(p("de-select"));l=o.Pb||o.M-Ud(o)+1;o.innerHTML="";(f=Ib(k)).k=i;Jb(o,
f,e.Ba(k),0);f.ga=(w(e.Pa,f)||{}).textContent||wa(f).substring(0,70).replace(/\s+/g," ");fa[fa.indexOf(a)]=f;g.aa(f.B,'<span>&nbsp;[<a href="'+xa(e.host,x,f.a)+'">'+Fd[j]+"</a>]</span>");1===b||b>=q?k=0:(k=q-b,o.Pb=b+1,o.appendChild(t("div",{"class":"de-omitted",text:Gd[j]+k},m)));for(h=[f];k<q;k++)Jb(o,f=Ib(d[k]),e.$(d[k]),k+1),h.push(f);if(5<b||1===b)o.appendChild(C('<span>[<a href="#">'+Hd[j]+"</a>]</span>")).onclick=function(b){y(b);db(a,5,m);a=m};Ea.splice.apply(z,[z.indexOf(a),l].concat(h));
o.M=q+1;qa(p("de-alert-load-thr"))}cc(a);c&&c();b=c=m})}function wf(){var a=this.parentNode.parentNode,b=P("iframe",a),c=a.getAttribute("info").split(";")[2],d=w("de-content",l);v(p("de-fav-wait"));b?(v(b),d.style.overflowY="auto"):(c=G[c])&&!c.h?cc(c):(v(p("de-iframe-fav")),w("de-content",l).style.overflowY="scroll",ea(a,[C('<iframe name="de-iframe-fav" id="de-iframe-fav" src="'+P("a",a).href+'" scrolling="no" style="border: none; width: '+(l.body.clientWidth-55)+'px; height: 1px;" />'),C('<div id="de-fav-wait" class="de-wait" style="font-size: 1.1em; text-align: center">'+
ua[j]+"</div>")]))}function oe(a,b,c){pa(ub(e.host,x,b),m,m,n,function(d,k){for(var f,d=l.importNode(k.querySelector(e.qa),i);f=d.firstChild;)a.appendChild(f);c(Cc(a),b);c=a=b=m})}function qe(a){I(ua[j],"load-pages",i);f.preLoadImgs&&B(A.querySelectorAll('a[href^="blob:"]'),function(a){window.URL.revokeObjectURL(a.href)});var b=-1,c=A,d=Array(a),e=1;A.innerHTML="";z=[];for(ta={};++b<a;)1<a&&(c=t("div",{id:"de-page"+b},m),ea(A,[t("center",{text:b+" "+Yb[j],style:"font-size: 2em;"},m),l.createElement("hr"),
c])),oe(c,b,function(b,c){d[c]=b;if(e===a){d.forEach(function(a){Ve(a);We(a)});z.forEach(wc);z.forEach(Fb);z.forEach(Ec);Cb(m);Bb(m);Db(A);Eb(A);zc(G);hb(A);$d();Xe();Ya&&z.forEach(function(a){oc(a,m)});qa(p("de-alert-load-pages"));window.postMessage("Kall","*");e=d=m}else e++})}function Gc(a){u&&3!==f.updThread&&(l.querySelector('a[id^="de-btn-upd"]').id="de-btn-upd-"+a)}function ge(){Gc("off");clearInterval(Za);Za=ja}function ie(){Qa||(Qa=t("audio",{preload:"auto",src:"https://raw.github.com/SthephanShinkufag/Dollchan-Extension-Tools/master/signal.ogg"},
m));Pa=!Pa}function Ye(){ka?kb=n:(Qa.play(),setTimeout(Ye,Oa),kb=i)}function Of(a){if(0===window.webkitNotifications.checkPermission()){var b=window.webkitNotifications.createNotification("/favicon.ico",Na,Id[j].replace(/%m/g,a));b.ondisplay=function(){setTimeout(function(){b.cancel();b=m},8E3)};b.onclick=function(){window.focus&&window.focus();this.cancel()};b.show()}}function ra(a,b){if(a)a!==la[j]?(I(Jd[j]+u+"): \n"+a,"newposts",n),l.title="{"+a.match(/(?:\[)(\d+)(?:\])/)[1]+"} "+l.title,ge()):
(I(la[j],"newposts",n),Gc("warn"));else if(qa(p("de-alert-newposts")),3!==f.updThread){Gc("on");if(1===f.updThread){if(ka)return;b+=+(l.title.match(/^\[(\d+)\]/)||[,0])[1]}f.favIcoBlink&&za&&(clearInterval(lb),0<b&&(lb=setInterval(function(){var a=da('.//link[@href="'+za+'"]',l.head)?"data:image/x-icon;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQEAYAAABPYyMiAAAABmJLR0T///////8JWPfcAAAACXBIWXMAAABIAAAASABGyWs+AAAAF0lEQVRIx2NgGAWjYBSMglEwCkbBSAcACBAAAeaR9cIAAAAASUVORK5CYII=":za;B(l.head.querySelectorAll('link[rel="shortcut icon"]'),
v);l.head.appendChild(t("link",{href:a,rel:"shortcut icon"},m))},800)));l.title=(0<b?" ["+b+"] ":"")+Na;g.p&&f.desktNotif&&0<b&&Of(b);Pa&&!kb&&0<b&&(Oa?Ye():Qa.play())}}function Pf(){R(l.querySelector('input[type="button"]'),{click:function(){Wd("de-rating",p("rating").value,1E12)}})}function Qf(a,b){var c,d=a.src,e=a.thumb,f=a.thumb_width,g=a.thumb_height,h=a.size,j=a.rating;a:{for(var p=l.cookie.split("; "),q=p.length;q--;)if(c=p[q].split("="),c[0]===escape("de-rating")){c=unescape(c[1]);break a}c=
n}p=c||"r-15";"b"===x||"rf"===x?c=e.substring(e.lastIndexOf("/")+1):(c=d.substring(d.lastIndexOf("/")+1),17<c.length&&(c=c.substring(0,17)+"..."));e="r-18g"===j&&"r-18g"!==p?"images/r-18g.png":"r-18"===j&&("r-18g"!==p||"r-18"!==p)?"images/r-18.png":"r-15"===j&&"sfw"===p?"images/r-15.png":"illegal"===j?"images/illegal.png":a.thumb;e!==a.thumb&&(g=f=200);return C('<div class="file"><div class="fileinfo">Файл: <a href="/'+d+'" target="_blank">'+c+"</a><br /><em>"+a.thumb.substring(a.thumb.lastIndexOf(".")+
1)+", "+(1024>h?h+" B":1048576>h?(h/1024).toFixed(2)+" KB":1073741824>h?(h/1048576).toFixed(2)+" MB":(h/1073741824).toFixed(2)+" GB")+", "+a.metadata.width+"x"+a.metadata.height+'</em><br /><a class="edit_ icon" href="/utils/image/edit/'+a.file_id+"/"+b+'"><img title="edit" alt="edit" src="/images/blank.png" /></a></div><a href="/'+d+'" target="_blank"><img class="thumb" src="/'+e+'" width="'+f+'" height="'+g+'" /></a></div>')}function Ze(a,b){if(e.Ga&&!a.Db){var c=b.querySelector(e.Ga);c&&(a.querySelector(e.Ga)||
a.l.appendChild(l.importNode(c,i)),a.Db=i)}}function $e(a){if(!a.wb){var b=sessionStorage["de-deleted"];sessionStorage["de-deleted"]=(b?b+",":"")+a.count;a.wb=i;g.Q(a.B,"de-ppanel-cnt");g.q(a.B,"de-ppanel-del")}}function Ab(a,b){a&&I(ua[j],"newposts",i);e.i?Qe("//dobrochan.ru/api/thread/"+x+"/"+u+"/new.json?message_html&new_format&last_post="+z[z.length-1].a,function(a,d,k){if(200!==a||k.error)ra(0===a?la[j]:d||k.message,m);else{var f,a=0,g=(k.result||{}).posts,h=w("de-thread",A);if(g&&0<g.length){k=
0;for(d=g.length;k<d;k++){f=g[k];var o=ja,o=f.display_id,l=f.files,p=l.length,q=t("td",{id:"reply"+o,"class":"reply","de-post":o},m);q.innerHTML='<a name="i'+o+'"></a><label><a class="delete icon"><input type="checkbox" id="delbox_'+o+'" class="delete_checkbox" value="'+f.post_id+'" id="'+o+'" /></a><span class="postername">'+f.name+"</span> "+e.Ab.Va(f.date)+' </label><span class="reflink"><a onclick="Highlight(0, '+o+')" href="/'+x+"/res/"+u+".xhtml#i"+o+'">No.'+o+"</a></span><br />";for(o=0;o<
p;o++)q.appendChild(Qf(l[o],f.post_id));ea(q,[F(1<p,t("div",{style:"clear: both;"},m)),C('<div class="postbody">'+f.message_html+"</div>"),t("div",{"class":"abbrev"},m)]);f=Cc(q);a+=Jb(h,f,g[k].display_id,h.M+k);z.push(f)}h.M+=g.length}ra(m,a)}b&&b();b=m}):pa(m,x,u,i,function(a,d,k){if(k)ra(k,m);else{var f,g,h,j,l=0,q=z.length,u=a.length,t=w("de-thread",A);Ze(z[0],d);d=1;for(f=0;d<q||f<u;d++,f++)g=z[d],(h=a[f])?(j=e.$(h),g?g.a!==j?($e(g),f--):Ze(g,h):(l+=Jb(t,g=Ib(h),j,d),z.push(g))):$e(g);ra(k,l);
t.M=q;Ia();p("de-panel-info").firstChild.textContent=d+"/"+Fa(A).length}b&&b();b=m})}function he(){1===f.updThread?Za=setInterval(function(){Ab(n,m)},1E3*f.updThrDelay):2===f.updThread&&(Za=setInterval(function(){e.i?Qe("//dobrochan.ru/api/thread/"+x+"/"+u+".json?new_format",function(a,b,c){200!==a||c.error?ra(0===a?la[j]:b||c.message,m):ra(m,c.result.posts_count-z.length)}):pa(m,x,u,i,function(a,b,c){ra(c,a.length-z.length+1)})},1E3*f.updThrDelay))}function af(a){f.hideRefPsts&&a.u&&(a.u.forEach(function(b){var c=
G[b];c&&!O[b]&&Kb(c,"reference to >>"+a.a)}),a=m)}function Hc(a){f.hideRefPsts&&a.u&&a.u.forEach(function(a){var c=G[a];c&&!O[a]&&(0!==X[c.count]&&jb(c,n,m),Hc(c))})}function Se(a){if(!f.filterThrds&&a.k)X[a.count]=1;else{var b=Ic(wa(a))||f.hideBySpell&&Lb(a);b?(X[a.count]=0,Kb(a,b)):X[a.count]=1}}function Xe(){for(var a,b,c,d=z.length-1;0<=d;d--)c=X[d],a=z[d],O[b=a.a]?(a.k&&!(J[x]&&J[x][b]!==ja)?(delete O[b],N("DESU_Posts_"+e.e+"_"+x,JSON.stringify(O))):0===O[b][0]?Ka(a,i):a.B.firstChild.className=
"de-btn-lock",c===ja&&(X[d]=Ic(wa(a))||f.hideBySpell&&Lb(a)?0:1)):(a.k&&(J[x]&&J[x][b]!==ja?X[d]=c="0":"0"===c&&(c=m)),"0"===c?Kb(a,m):"1"!==c&&Se(a))}function ab(a,b){b?g.q(a,"de-post-hid"):g.Q(a,"de-post-hid")}function Jc(a,b){b&&a.B.appendChild(t("a",{"class":"de-post-note de-abtn",text:" autohide: "+b+" ",href:"#"},{click:function(a){y(a);v(this)}}))}function jb(a,b,c){var d,k,g=a.H;ab(a,a.h=b);if(a.k){if(g.style.display=b?"none":"",g.h=b,d=p("de-thr-hid-"+(k=a.a)),!b&&d&&(v(d),be(a,1)),b&&!d)d=
C('<div class="'+e.t+' de-thr-hid" id="de-thr-hid-'+k+'">'+Kd[j]+' <a href="#">№'+k+"</a><i> ("+(c?"autohide: "+c:a.ga.replace(/</g,"&lt;").replace(/>/g,"&gt;"))+")</i></div>"),P("a",d).onclick=function(b){y(b);Ka(a,!a.h);Wa()},Y(g,d),be(a,0)}else f.delHiddPost?e.la(a).style.display=b?"none":"":((d=w("de-post-note",a))?b?c&&(d.innerText=" autohide: "+c+" "):v(d):b&&Jc(a,c),d=a.querySelector(e.jb),d.onmouseover=b&&function(){ab(Z(this),n)},d.onmouseout=b&&function(){ab(Z(this),i)}),f.strikeHidd&&
setTimeout(B,0,A.querySelectorAll('a[href*="#'+a.a+'"]'),function(a){a.className=b&&"de-ref-hid"})}function Kb(a,b){jb(a,i,b);af(a)}function gb(a,b){!a.Ea&&!O[a.a]&&(a.h?(v(w("de-post-note",a)),Jc(a,b)):(X[a.count]=0,Kb(a,b)))}function Kc(a){if(!O[a.a]){var b=Ic(wa(a));b?gb(a,b):(X[a.count]=1,jb(a,n,m),Hc(a),v(w("de-post-note",a)))}}function Ka(a,b){var c=a.a;jb(a,b,m);a.B.firstChild.className="de-btn-lock";b?af(a):Hc(a);O[c]||(O[c]=Array(2));O[c][0]=+!b;O[c][1]=Date.now()}function bf(a){return a.replace(/\s+/g,
" ").replace(/[^a-zа-яё ]/ig,"").substring(0,800).split(" ")}function yf(a){var b,c,d,e=wa(a);e?(b=bf(e),d=a.a,c=a.h,z.forEach(function(a){var e=d,k=c,f=b,g,h=bf(wa(a)),j=h.length,l=f.length,p=l,q=l,u=0;if(!(j<0.4*p||j>3*p)){for(;l--;)if(6<p&&3>f[l].length)q--;else for(g=j;g--;)(h[g]===f[l]||f[l].match(/>>\d+/)&&h[g].match(/>>\d+/))&&u++;u<0.4*q||j>3*q||(v(w("de-post-note",a)),k?(0!==X[a.count]&&jb(a,n,m),O[l=a.a]&&delete O[l]):(Ka(a,i),Jc(a,"similar to >>"+e)))}}),Wa()):cb("#notxt");
c=d=b=m}function pe(a){var b,c,d=a.r[0];if(d.hash)return d.hash;c=p("de-canvas")||l.body.appendChild(t("canvas",{id:"de-canvas",style:"display: none;"},m));a=c.width=d.width;b=c.height=d.height;c=c.getContext("2d");c.drawImage(d,0,0);c=c.getImageData(0,0,a,b).data;var e,f,g,h,j,q;j=a*b;var u=256/3,s=0;for(f=e=0;e<j;e++,f+=4)c[e]=0.3*c[f]+0.59*c[f+1]+0.11*c[f+2];for(e=0;8>e;e++)for(f=0;8>f;f++){j=e/7*(b-1);g=Math.min(j|0,b-2);q=j-g;j=f/7*(a-1);h=Math.min(j|0,a-2);j-=h;s=(s<<4)+Math.min(128*((c[g*a+
h]*(1-j)*(1-q)+c[g*a+h+1]*j*(1-q)+c[(g+1)*a+h+1]*j*q+c[(g+1)*a+h]*(1-j)*q)/u|0),255);if(g=s&4026531840)s^=g>>>24;s&=~g}return d.hash=s}function cf(){return{ta:[],exp:[],xa:[],Ca:[],r:[],Da:[],name:[],ra:[],Ja:[],ea:n,eb:n,cb:n,Ka:n}}function Xd(){var a,b,c,d,e;Mb=cf();Lc=cf();S={N:[],Ia:[],a:[],Fa:[],I:[]};for(a=0;b=ya[a++];){e=Mb;b=b.toString();if(/^#(?:[^\s]+\/)?(?:\d+)? /.test(b))if(c=b.match(/^#([^\/]+)\//),d=b.match(/(\d+)\s/),u&&c&&d&&c[1]===x&&d[1]===u||u&&!c&&d&&d[1]===u||c&&!d&&c[1]===x)b=
b.replace(/^#[^\s]+ /,"");else continue;if(/^#op /.test(b))if(u)continue;else e=Lc,b=b.substr(4);if(/^#/.test(b)){c=b.split(" ")[0];b=b.replace(/^#[^\s]+ /,"");if(u&&("#skip"===c||"#num"===c)){b=b.split(", ");for(d=b.length;d--;)b[d].contains("-")||(b[d]+="-"+b[d]),"#num"===c?S.a.push(b[d]):S.Ia.push(b[d])}"#rep"===c?S.N.push(b):"#exp"===c?e.exp.push(va(b)):"#exph"===c?e.xa.push(va(b)):"#ihash"===c?e.Ca.push(+b):"#img"===c?e.r.push(b):"#imgn"===c?e.Da.push(va(b)):"#name"===c?e.name.push(b):"#theme"===
c?e.ra.push(va(b)):"#tmax"===c?e.Ja.push(b):"#sage"===c?e.ea=i:"#notxt"===c?e.eb=i:"#noimg"===c?e.cb=i:"#trip"===c?e.Ka=i:"#outrep"===c?S.Fa.push(b):"#video"===c&&S.I.push(b)}else e.ta.push(b)}}function we(a,b){for(var c,d=a.length;d--;)c=va(a[d]),b=b.replace(c,a[d].substr(c.toString().length+1));return b}function Mc(a,b){var c,d,f,g,h,j,o,l;b.Ea=n;if(S.Ia[0]&&u){c=b.count+1;for(d=0;f=S.Ia[d++];)if(f=f.split("-"),c>=+f[0]&&c<=+f[1])return b.Ea=i,n}if(a.ta[0]||a.ra[0])h=(h=w("replytitle",b)||w("filetitle",
b))?h.textContent.toLowerCase():"";j=wa(b);if(a.ta[0]){d=0;for(c=j.toLowerCase();f=a.ta[d++];)if(g=f,f=f.toLowerCase(),c.contains(f)||h.contains(f))return g}if(a.ra[0])for(d=0;f=a.ra[d++];)if(f.test(h))return"#theme "+f.toString();if(a.exp[0]){d=0;for(c=j;f=a.exp[d++];)if(f.test(c))return"#exp "+f.toString()}if(a.xa[0]){d=0;for(c=b.innerHTML;f=a.xa[d++];)if(f.test(c))return"#exph "+f.toString()}if(a.name[0]||a.Ka)o=w("commentpostername",b)||w("postername",b),l=w("postertrip",b);if(a.Ka&&l)return"#trip";
if(a.name[0]){o=o?o.textContent:"";l=l?l.textContent:"";for(d=0;f=a.name[d++];)if(g=f,f=f.split(/!+/),f[0]&&o.contains(f[0])||f[1]&&l.contains(f[1]))return"#name "+g}if(0<b.r.length){if(a.Ca[0]){d=0;for(c=pe(b);f=a.Ca[d++];)if(f===c)return"#ihash "+f}if(a.r[0]){g=hc(b);c=+g[0];g=+g[1];h=Vd(b);for(d=0;f=a.r[d++];){a:{o=c;l=g;var p=h,q=f;if(q){var s=ja,t=ja,s=ja,t=q.split("@"),v=t[0][0],s=t[0].substr(1).split("-");s[1]||(s[1]=s[0]);if(s[0])if("<"===v&&p<+s[0]||">"===v&&p>+s[0]||"="===v&&p>=+s[0]&&p<=
+s[1]){if(!t[1]){o="image "+q;break a}}else{o=n;break a}if(t[1]&&(s=t[1].split(/[x\u00d7]/),t=s[0].split("-"),s=s[1].split("-"),t[1]||(t[1]=t[0]),s[1]||(s[1]=s[0]),"<"===v&&o<+t[0]&&l<+s[0]||">"===v&&o>+t[0]&&l>+s[0]||"="===v&&o>=+t[0]&&o<=+t[1]&&l>=+s[0]&&l<=+s[1])){o="image "+q;break a}}o=n}if(o)return"#img "+f}}if(a.Da[0]&&(c=w(e.T,b))){d=0;for(c=c.textContent;f=a.Da[d++];)if(f.test(c))return"#imgn "+f}}if(S.a[0]){d=0;for(c=b.count+1;f=S.a[d++];)if(g=f,f=f.split("-"),c>=+f[0]&&c<=+f[1])return"#num "+
g}if(a.Ja[0]){d=0;for(c=j.replace(/\n/g,"").length;f=a.Ja[d++];)if(c>=f)return"#tmax "+f}return a.ea&&b.ea?"#sage":a.eb&&!j?"#no text":a.cb&&0===b.r.length?"#no image":n}function Lb(a){return!u&&a.k?Mc(Lc,a)||Mc(Mb,a):Mc(Mb,a)}function df(a){if(f.filterThrds||!a.k){var b=Lb(a);b?gb(a,b.substring(0,70)):a.h&&a.Ea&&Kc(a)}}function ef(a){for(var a=a.split("\n"),b,c,d=a.length,e=/#exp |#exph |#rep |#outrep |#imgn |#video |#theme /;d--;)if(b=a[d],c=b.match(e))try{va(b.substr(b.indexOf(c)))}catch(f){return b}return n}
function Nc(){z.forEach(function(a){a.Ma===i?(Kc(a),a.Ma=n):Lb(a)&&Kc(a)})}function pc(){var a=p("de-spell-edit"),a=a.value=a.value.replace(/[\r\n]+/g,"\n").replace(/^\n|\n$/g,""),b=ef(a);b||!a?(a?I(rb[j]+" "+b,"err-spell",n):(Nc(),Ia(),Ua("")),l.querySelector('input[info="hideBySpell"]').checked=n,Q("hideBySpell",0)):(Nc(),Ua(a),f.hideBySpell&&(z.forEach(df),Ge()),Ia())}function cb(a){var b,c=p("de-spell-edit"),d=c&&c.value.replace(/[\r\n]+/g,"\n").replace(/^\n|\n$/g,"");if(d){if(b=ef(d)){I(rb[j]+
" "+b,"err-spell",n);return}}else ya||jc(),d=ya.join("\n");d=("\n"+d).contains("\n"+a)?("\n"+d).split("\n"+a).join("").replace(/^\n|\n$/g,""):!d?a:d+"\n"+a;c&&(c.value=d,c.previousSibling.firstChild.checked=!!d);Nc();Ua(d);d?(Q("hideBySpell",1),z.forEach(df),Ge()):Q("hideBySpell",0);Ia()}function Ic(a){if(!f.hideByWipe)return n;var b,c,d,e,g,h,j,l;if(f.wipeSameLin&&(b=a.replace(/>/g,"").split(/\s*\n\s*/),5<(c=b.length))){b.sort();d=0;for(g=c/4;d<c;){h=b[d];for(e=0;b[d++]===h;)e++;if(4<e&&e>g&&h)return'same lines: "'+
h.substr(0,20)+'" x'+e}}if(f.wipeSameWrd&&(b=a.replace(/[\s\.\?\!,>]+/g," ").toUpperCase().split(" "),3<(c=b.length))){b.sort();d=0;g=c/4;for(l=j=0;d<c;j++){h=b[d];for(e=0;b[d++]===h;)e++;if(25<c&&(e>l&&2<h.length&&(l=e),l>=g))return'same words: "'+h.substr(0,20)+'" x'+l}h=j/c;if(0.25>h)return"uniq words: "+(100*h).toFixed(0)+"%"}if(f.wipeLongWrd&&(b=a.replace(/https*:\/\/.*?(\s|$)/g,"").replace(/[\s\.\?!,>:;-]+/g," ").split(" "),50<b[0].length||1<(c=b.length)&&10<b.join("").length/c))return"long words";
if(f.wipeCAPS&&(b=a.replace(/[\s\.\?!;,-]+/g," ").trim().split(" "),4<(c=b.length))){for(j=e=g=d=0;d<c;d++)h=b[d],5>(h.match(/[a-zа-я]/ig)||[]).length||(2<(h.match(/[A-ZА-Я]/g)||[]).length&&j++,h===h.toUpperCase()&&e++,g++);if(0.3<=e/g&&4<g)return"CAPSLOCK: "+100*(e/b.length)+"%";if(0.3<=j/g&&8<g)return"cAsE words: "+100*(j/b.length)+"%"}return f.wipeSpecial&&(b=a.replace(/\s+/g,""),30<(c=b.length)&&0.4<(h=b.replace(/[0-9a-zа-я\.\?!,]/ig,"").length/c))?"specsymbols: "+
Math.round(100*h)+"%":f.wipeNumbers&&(b=a.replace(/\s+/g," ").replace(/>>\d+|https*:\/\/.*?(?: |$)/g,""),30<(c=b.length)&&0.4<(h=(c-b.replace(/\d/g,"").length)/c))?"numbers: "+Math.round(100*h)+"%":n}function ee(){return!f.scriptStyle?"fr":1===f.scriptStyle?"en":"de"}function me(){function a(a,b){d+=a+':before { content: ""; padding: 0 16px 0 0; margin: 0 4px; background: url('+b+") no-repeat center; }"}function b(a,b){d+=a+" { background: url(data:image/gif;base64,"+b+") no-repeat center !important; }"}
H(A);var c,d="",d=d+('#de-content-cfg > div { float: left; border-radius: 10px 10px 0 0; width: auto; min-width: 0; padding: 0; margin: 5px 20px; overflow: hidden; }\t\t#de-cfg-info > span { display: inline-block; vertical-align: top; }\t\t#de-cfg-head { padding: 4px; border-radius: 10px 10px 0 0; color: #fff; text-align: center; font: bold 14px arial; cursor: default; }\t\t#de-cfg-head:lang(en), #de-panel:lang(en) { background: linear-gradient(to bottom, #4b90df, #3d77be 5px, #376cb0 7px, #295591 13px, rgba(0,0,0,0) 13px), linear-gradient(to bottom, rgba(0,0,0,0) 12px, #183d77 13px, #1f4485 18px, #264c90 20px, #325f9e 25px); }\t\t#de-cfg-head:lang(de), #de-panel:lang(de) { background: #777; }\t\t#de-cfg-head:lang(fr), #de-panel:lang(fr) { background: linear-gradient(to bottom, #7b849b, #616b86 2px, #3a414f 13px, rgba(0,0,0,0) 13px), linear-gradient(to bottom, rgba(0,0,0,0) 12px, #121212 13px, #1f2740 25px); }\t\t.de-cfg-body { width: 371px; min-height: 347px; padding: 11px 7px 7px; margin-top: -1px; font: 13px sans-serif; }\t\t.de-cfg-body input[type="text"] { width: auto; }\t\t.de-cfg-body input[value=">"] { width: 20px; }\t\t.de-blockinp { display: block; }\t\t.de-cfg-body, #de-cfg-btns { border: 1px solid #183d77; border-top: none; }\t\t.de-cfg-body:lang(de), #de-cfg-btns:lang(de) { border-color: #444; }\t\t#de-cfg-btns { padding: 7px 2px 2px; }\t\t#de-cfg-bar { height: 25px; width: 100%; display: table; background-color: #1f2740; margin: 0; padding: 0; }\t\t#de-cfg-bar:lang(en) { background-color: #325f9e; }\t\t#de-cfg-bar:lang(de) { background-color: #777; }\t\t.de-cfg-tab { padding: 4px 6px; border-radius: 4px 4px 0 0; font: bold 14px arial; text-align: center; cursor: default; }\t\t.de-cfg-tab-back { display: table-cell !important; float: none !important; min-width: 0; padding: 0 !important; box-shadow: none !important; border: 1px solid #183d77 !important; border-radius: 4px 4px 0 0; opacity: 1; }\t\t.de-cfg-tab-back:lang(de) { border-color: #444 !important; }\t\t.de-cfg-tab-back:lang(fr) { border-color: #121421 !important; }\t\t.de-cfg-tab-back[selected="true"] { border-bottom: none !important; }\t\t.de-cfg-tab-back[selected="false"] > .de-cfg-tab { background-color: rgba(0,0,0,.2); }\t\t.de-cfg-tab-back[selected="false"] > .de-cfg-tab:lang(en), .de-cfg-tab-back[selected="false"] > .de-cfg-tab:lang(fr) { background: linear-gradient(to bottom, rgba(132,132,132,.35) 0%, rgba(79,79,79,.35) 50%, rgba(40,40,40,.35) 50%, rgba(80,80,80,.35) 100%) !important; }\t\t.de-cfg-tab-back[selected="false"] > .de-cfg-tab:hover { background-color: rgba(99,99,99,.2); }\t\t.de-cfg-tab-back[selected="false"] > .de-cfg-tab:hover:lang(en), .de-cfg-tab-back[selected="false"] > .de-cfg-tab:hover:lang(fr)  { background: linear-gradient(to top, rgba(132,132,132,.35) 0%, rgba(79,79,79,.35) 50%, rgba(40,40,40,.35) 50%, rgba(80,80,80,.35) 100%) !important; }\t\t.de-cfg-tab::'+
(g.c?"-moz-":"")+"selection { background: transparent; }\t\t#de-spell-panel { float: right; }\t\t#de-spell-panel > a { padding: 0 7px; text-align: center; }\t\t#de-cfg-wipe { display: table; padding-left: 25px; }\t\t#de-cfg-wipe > div { display: table-row; }\t\t#de-cfg-wipe > div > label { display: table-cell; }\t\t.de-cfg-unvis { display: none; }"),d=d+"#de-btn-logo { margin-right: 3px; }\t\t#de-panel { height: 25px; z-index: 9999; border-radius: 15px 0 0 0; cursor: default;}\t\t#de-panel-btns { display: inline-block; padding: 0 2px; margin: 0; height: 25px; border-left: 1px solid #8fbbed; }\t\t#de-panel-btns:lang(de), #de-panel-info:lang(de) { border-color: #ccc; }\t\t#de-panel-btns:lang(fr), #de-panel-info:lang(fr) { border-color: #616b86; }\t\t#de-panel-btns > li { margin: 0 1px; padding: 0; }\t\t#de-panel-btns > li, #de-panel-btns > li > a, #de-btn-logo { display: inline-block; width: 25px; height: 25px; }\t\t#de-panel-btns:lang(en) > li, #de-panel-btns:lang(fr) > li  { transition: all 0.3s ease; }\t\t#de-panel-btns:lang(en) > li:hover, #de-panel-btns:lang(fr) > li:hover { background-color: rgba(255,255,255,.15); box-shadow: 0 0 3px rgba(143,187,237,.5); }\t\t#de-panel-btns:lang(de) > li > a { border-radius: 5px; }\t\t#de-panel-btns:lang(de) > li > a:hover { width: 21px; height: 21px; border: 2px solid #444; }\t\t#de-panel-info { display: inline-block; vertical-align: top; padding: 0 6px; height: 25px; border-left: 1px solid #8fbbed; color: #fff; font: 18px serif; }";
c="R0lGODlhGQAZAIAAAPDw8P///yH5BAEAAAEALAAAAAAZABkAQA";b("#de-btn-logo",c+"I5jI+pywEPWoIIRomz3tN6K30ixZXM+HCgtjpk1rbmTNc0erHvLOt4vvj1KqnD8FQ0HIPCpbIJtB0KADs=");b("#de-btn-settings",c+"JAjI+pa+API0Mv1Ymz3hYuiQHHFYjcOZmlM3Jkw4aeAn7R/aL6zuu5VpH8aMJaKtZR2ZBEZnMJLM5kIqnP2csUAAA7");b("#de-btn-hidden",c+"I5jI+pa+CeHmRHgmCp3rxvO3WhMnomUqIXl2UmuLJSNJ/2jed4Tad96JLBbsEXLPbhFRc8lU8HTRQAADs=");b("#de-btn-favor",c+"IzjI+py+AMjZs02ovzobzb1wDaeIkkwp3dpLEoeMbynJmzG6fYysNh3+IFWbqPb3OkKRUFADs=");b("#de-btn-refresh",
c+"JAjI+pe+AfHmRGLkuz3rzN+1HS2JWbhWlpVIXJ+roxSpr2jedOBIu0rKjxhEFgawcCqJBFZlPJIA6d0ZH01MtRCgA7");b("#de-btn-goback",c+"IrjI+pmwAMm4u02gud3lzjD4biJgbd6VVPybbua61lGqIoY98ZPcvwD4QUAAA7");b("#de-btn-gonext",c+"IrjI+pywjQonuy2iuf3lzjD4Zis0Xd6YnQyLbua61tSqJnbXcqHVLwD0QUAAA7");b("#de-btn-goup",c+"IsjI+pm+DvmDRw2ouzrbq9DmKcBpVfN4ZpyLYuCbgmaK7iydpw1OqZf+O9LgUAOw==");b("#de-btn-godown",c+"ItjI+pu+DA4ps02osznrq9DnZceIxkYILUd7bue6WhrLInLdokHq96tnI5YJoCADs=");b("#de-btn-newthr",c+"IyjI+pG+APQYMsWsuy3rzeLy2g05XcGJqqgmJiS63yTHtgLaPTY8Np4uO9gj0YbqM7bgoAOw==");
b("#de-btn-expimg",c+"I9jI+pGwDn4GPL2Wep3rxXFEFel42mBE6kcYXqFqYnVc72jTPtS/KNr5OJOJMdq4diAXWvS065NNVwseehAAA7");b("#de-btn-maskimg",c+"JQjI+pGwD3TGxtJgezrKz7DzLYRlKj4qTqmoYuysbtgk02ZCG1Rkk53gvafq+i8QiSxTozIY7IcZJOl9PNBx1de1Sdldeslq7dJ9gsUq6QnwIAOw==");e.K&&b("#de-btn-catalog",c+"I2jI+pa+DhAHyRNYpltbz7j1Rixo0aCaaJOZ2SxbIwKTMxqub6zuu32wP9WsHPcFMs0XDJ5qEAADs=");b("#de-btn-audio-off",c+"I7jI+pq+DO1psvQHOj3rxTik1dCIzmSZqfmGXIWlkiB6L2jedhPqOfCitVYolgKcUwyoQuSe3WwzV1kQIAOw==");b("#de-btn-audio-on",c+"JHjI+pq+AewJHs2WdoZLz7X11WRkEgNoHqimadOG7uAqOm+Y6atvb+D0TgfjHS6RIp8YQ1pbHRfA4n0eSTI7JqP8Wtahr0FAAAOw==");
c="Dw8P///wAAACH5BAEAAAIALAAAAAAZABkAQAJElI+pe2EBoxOTNYmr3bz7OwHiCDzQh6bq06QSCUhcZMCmNrfrzvf+XsF1MpjhCSainBg0AbKkFCJko6g0MSGyftwuowAAOw==";b("#de-btn-upd-on","R0lGODlhGQAZAJEAADL/Mv"+c);b("#de-btn-upd-off","R0lGODlhGQAZAJEAAP8yMv"+c);b("#de-btn-upd-warn","R0lGODlhGQAZAJEAAP/0Qf"+c);d+=".de-ppanel, .de-ppanel-op { margin-left: 4px; }\t\t.de-btn-hide, .de-btn-lock, .de-btn-rep, .de-btn-expthr, .de-btn-fav, .de-btn-fav-sel, .de-btn-sage, .de-btn-src { display: inline-block; margin: 0 4px -2px 0 !important; cursor: pointer; ";
f.postBtnsTxt?d+="color: "+getComputedStyle(P("a",l)).getPropertyValue("color")+'; font-size:14px; }\t\t\t.de-btn-hide:after { content: "\u00d7"; }\t\t\t.de-post-hid .de-btn-hide:after { content: "+"; }\t\t\t.de-btn-lock:after { content: "\u25a0"; }\t\t\t.de-btn-rep:after { content: "R"; }\t\t\t.de-btn-expthr:after { content: "E"; }\t\t\t.de-btn-fav:after { content: "F"; }\t\t\t.de-btn-fav-sel:after { content: "[F]"; }\t\t\t.de-btn-sage:after { content: "Sage!"; }\t\t\t.de-btn-src:after { content: "[Sauce]"; }':
(d+="padding: 0 14px 14px 0; }",c="R0lGODlhDgAOAKIAAPDw8KCgoICAgEtLS////wAAAAAAAAAAACH5BAEAAAQALAAAAAAOAA4AQAM",b(".de-btn-hide",c+"8SLLcS2MNQGsUMYi6uB5BKI5hFgojel5YBbDDNcmvpJLkcgLq1jcuSgPmgkUmlJgFAyqNmoEBJEatxggJADs="),b(".de-post-hid .de-btn-hide",c+"5SLLcS2ONCcCMIoYdRBVcN4Qkp4ULmWVV20ZTM1SYBJbqvXmA3jk8IMzlgtVYFtkoNCENIJdolJAAADs="),b(".de-btn-lock",c+"zSLLcS2MNQGsUMQRRq9CYJo5iRp6Y1FHXcGFuzJjnuIjOBzYr0LS9FnAlrJEGkJhSSUgAADs="),b(".de-btn-rep",c+"4SLLcS2MNQGsUMQRRwdLbAI5kpn1kKHUWdk3AcDFmOqKcJ5AOq0srX0QWpBAlIo3MNoDInlAZIQEAOw=="),
b(".de-btn-expthr",c+"7SLLcS6MNACKLIQjKgcjCkI2DOAbYuHlnKFHWUl5dnKpfm2vd7iyUXywEk1gmnYrMlEEyUZCSdFoiJAAAOw=="),b(".de-btn-fav",c+"5SLLcS2MNQGsUl1XgRvhg+EWhQAllNG0WplLXqqIlDS7lWZvsJkm92Au2Aqg8gQFyhBxAlNCokpAAADs="),b(".de-btn-fav-sel","R0lGODlhDgAOAKIAAP/hAKCgoICAgEtLS////wAAAAAAAAAAACH5BAEAAAQALAAAAAAOAA4AQAM5SLLcS2MNQGsUl1XgRvhg+EWhQAllNG0WplLXqqIlDS7lWZvsJkm92Au2Aqg8gQFyhBxAlNCokpAAADs="),b(".de-btn-sage","R0lGODlhDgAOAJEAAPDw8EtLS////wAAACH5BAEAAAIALAAAAAAOAA4AQAIZVI55duDvFIKy2vluoJfrD4Yi5lWRwmhCAQA7"),
b(".de-btn-src",c+"9SLLcS0MMQMesUoQg6PKbtFnDaI0a53VAml2ARcVSFC0WY6ecyy+hFajnWDVssyQtB5NhTs1mYAAhWa2EBAA7"));a(".de-src-google","//google.ru/favicon.ico");a(".de-src-tineye","//tineye.com/favicon.ico");a(".de-src-iqdb","//iqdb.org/favicon.ico");a(".de-src-saucenao","//saucenao.com/favicon.ico");u&&(d+='.de-thread { counter-reset: i 1; }\t\t.de-ppanel.de-ppanel-cnt:after { counter-increment: i 1; content: counter(i, decimal); vertical-align: 1px; color: #4f7942; font: italic bold 13px serif; cursor: default; }\t\t.de-ppanel-del:after { content: "'+
Ld[j]+'"; color: #727579; font: italic bold 13px serif; cursor: default; }');d+="#de-txt-panel { display: block; height: 23px; font-weight: bold; cursor: pointer; }\t\t#de-txt-panel > span:empty { display: inline-block; width: 27px; height: 23px }\t\t#de-txt-panel:lang(en) { display: none; }\t\t#de-txt-panel:lang(ru) { float: right; }";c="R0lGODlhFwAWAJEAAPDw8GRkZAAAAP///yH5BAEAAAMALAAAAAAXABYAQAJ";b("#de-btn-bold:empty",c+"T3IKpq4YAoZgR0KqqnfzipIUikFWc6ZHBwbQtG4zyonW2Vkb2iYOo8Ps8ZLOV69gYEkU5yQ7YUzqhzmgsOLXWnlRIc9PleX06rnbJ/KITDqTLUAAAOw==");
b("#de-btn-italic:empty",c+"K3IKpq4YAYxRCSmUhzTfx3z3c9iEHg6JnAJYYSFpvRlXcLNUg3srBmgr+RL0MzxILsYpGzyepfEIjR43t5kResUQmtdpKOIQpQwEAOw==");b("#de-btn-under:empty",c+"V3IKpq4YAoRARzAoV3hzoDnoJNlGSWSEHw7JrEHILiVp1NlZXtKe5XiptPrFh4NVKHh9FI5NX60WIJ6ATZoVeaVnf8xSU4r7NMRYcFk6pzYRD2TIUAAA7");b("#de-btn-strike:empty",c+"S3IKpq4YAoRBR0qqqnVeD7IUaKHIecjCqmgbiu3jcfCbAjOfTZ0fmVnu8YIHW6lgUDkOkCo7Z8+2AmCiVqHTSgi6pZlrN3nJQ8TISO4cdyJWhAAA7");b("#de-btn-spoil:empty","R0lGODlhFwAWAJEAAPDw8GRkZP///wAAACH5BAEAAAIALAAAAAAXABYAQAJBlIKpq4YAmHwxwYtzVrprXk0LhBziGZiBx44hur4kTIGsZ99fSk+mjrMAd7XerEg7xnpLIVM5JMaiFxc14WBiBQUAOw==");
b("#de-btn-code:empty",c+"O3IKpq4YAoZgR0KpqnFxokH2iFm7eGCEHw7JrgI6L2F1YotloKek6iIvJAq+WkfgQinjKVLBS45CePSXzt6RaTjHmNjpNNm9aq6p4XBgKADs=");b("#de-btn-quote:empty",c+"L3IKpq4YAYxRUSKguvRzkDkZfWFlicDCqmgYhuGjVO74zlnQlnL98uwqiHr5ODbDxHSE7Y490wxF90eUkepoysRxrMVaUJBzClaEAADs=");g.ua&&(d+="@keyframes de-open {\t\t\t\t0% { transform: translateY(-1500px); }\t\t\t\t40% { transform: translateY(30px); }\t\t\t\t70% { transform: translateY(-10px); }\t\t\t\t100% { transform: translateY(0); }\t\t\t}\t\t\t@keyframes de-close {\t\t\t\t0% { transform: translateY(0); }\t\t\t\t20% { transform: translateY(20px); }\t\t\t\t100% { transform: translateY(-4000px); }\t\t\t}\t\t\t@keyframes de-blink {\t\t\t\t0%, 100% { transform: translateX(0); }\t\t\t\t10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }\t\t\t\t20%, 40%, 60%, 80% { transform: translateX(10px); }\t\t\t}\t\t\t@keyframes de-cfg-open { from { transform: translate(0,50%) scaleY(0); opacity: 0; } }\t\t\t@keyframes de-cfg-close { to { transform: translate(0,50%) scaleY(0); opacity: 0; } }\t\t\t@keyframes de-post-open-tl { from { transform: translate(-50%,-50%) scale(0); opacity: 0; } }\t\t\t@keyframes de-post-open-bl { from { transform: translate(-50%,50%) scale(0); opacity: 0; } }\t\t\t@keyframes de-post-open-tr { from { transform: translate(50%,-50%) scale(0); opacity: 0; } }\t\t\t@keyframes de-post-open-br { from { transform: translate(50%,50%) scale(0); opacity: 0; } }\t\t\t@keyframes de-post-close-tl { to { transform: translate(-50%,-50%) scale(0); opacity: 0; } }\t\t\t@keyframes de-post-close-bl { to { transform: translate(-50%,50%) scale(0); opacity: 0; } }\t\t\t@keyframes de-post-close-tr { to { transform: translate(50%,-50%) scale(0); opacity: 0; } }\t\t\t@keyframes de-post-close-br { to { transform: translate(50%,50%) scale(0); opacity: 0; } }\t\t\t.de-pview-anim { animation-duration: .2s; animation-timing-function: ease-in-out; animation-fill-mode: both; }\t\t\t.de-open { animation: de-open .7s ease-out both; }\t\t\t.de-close { animation: de-close .7s ease-in both; }\t\t\t.de-blink { animation: de-blink .7s ease-in-out both; }\t\t\t.de-cfg-open { animation: de-cfg-open .2s ease-out backwards; }\t\t\t.de-cfg-close { animation: de-cfg-close .2s ease-in both; }");
a(".de-ytube-link","//youtube.com/favicon.ico");d+=".de-img-pre, .de-img-full { display: block; margin: "+(e.f?0:"2px 10px")+"; border: none; outline: none; cursor: pointer; }\t\t.de-img-full { float: left; }\t\t.de-img-center { position: fixed; z-index: 9999; border: 1px solid black; }\t\t.de-mp3, .de-ytube-obj { margin: 5px 20px; }\t\ttd > a + .de-ytube-obj { display: inline-block; }";a(".de-wait","data:image/gif;base64,R0lGODlhEAAQALMMAKqooJGOhp2bk7e1rZ2bkre1rJCPhqqon8PBudDOxXd1bISCef///wAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFAAAMACwAAAAAEAAQAAAET5DJyYyhmAZ7sxQEs1nMsmACGJKmSaVEOLXnK1PuBADepCiMg/DQ+/2GRI8RKOxJfpTCIJNIYArS6aRajWYZCASDa41Ow+Fx2YMWOyfpTAQAIfkEBQAADAAsAAAAABAAEAAABE6QyckEoZgKe7MEQMUxhoEd6FFdQWlOqTq15SlT9VQM3rQsjMKO5/n9hANixgjc9SQ/CgKRUSgw0ynFapVmGYkEg3v1gsPibg8tfk7CnggAIfkEBQAADAAsAAAAABAAEAAABE2QycnOoZjaA/IsRWV1goCBoMiUJTW8A0XMBPZmM4Ug3hQEjN2uZygahDyP0RBMEpmTRCKzWGCkUkq1SsFOFQrG1tr9gsPc3jnco4A9EQAh+QQFAAAMACwAAAAAEAAQAAAETpDJyUqhmFqbJ0LMIA7McWDfF5LmAVApOLUvLFMmlSTdJAiM3a73+wl5HYKSEET2lBSFIhMIYKRSimFriGIZiwWD2/WCw+Jt7xxeU9qZCAAh+QQFAAAMACwAAAAAEAAQAAAETZDJyRCimFqbZ0rVxgwF9n3hSJbeSQ2rCWIkpSjddBzMfee7nQ/XCfJ+OQYAQFksMgQBxumkEKLSCfVpMDCugqyW2w18xZmuwZycdDsRACH5BAUAAAwALAAAAAAQABAAAARNkMnJUqKYWpunUtXGIAj2feFIlt5JrWybkdSydNNQMLaND7pC79YBFnY+HENHMRgyhwPGaQhQotGm00oQMLBSLYPQ9QIASrLAq5x0OxEAIfkEBQAADAAsAAAAABAAEAAABE2QycmUopham+da1cYkCfZ94UiW3kmtbJuRlGF0E4Iwto3rut6tA9wFAjiJjkIgZAYDTLNJgUIpgqyAcTgwCuACJssAdL3gpLmbpLAzEQA7");
d+=".de-abtn { text-decoration: none !important; outline: none; }\t\t#de-alert { position: fixed; right: 0; top: 0; z-index: 9999; font: 14px arial; cursor: default; }\t\t#de-alert > div { float: right; clear: both; width: auto; min-width: 0pt; padding: 10px; margin: 1px; border: 1px solid grey; white-space: pre-wrap; }\t\t.de-alert-btn { display: inline-block; vertical-align: top; font-size: 150%; color: green; cursor: pointer; }\t\t.de-alert-msg { display: inline-block; margin-top: .25em; }\t\t.de-content { text-align: left; }\t\t.de-content textarea { display: block; margin: 2px 0; font: 12px courier new; "+
(g.b?"":"resize: none !important; ")+'}\t\t.de-content-block > a { color: inherit; font-weight: bold; }\t\t#de-content-fav, #de-content-hid { font-size: 16px; padding: 10px; border: 1px solid gray; }\t\t.de-entry { margin: 2px 0; }\t\t.de-entry > :first-child { float: none !important; }\t\t.de-entry > div > a { text-decoration: none; }\t\t.de-fav-inf-posts, .de-fav-inf-page { float: right; margin-right: 5px; font: bold 16px serif; }\t\t.de-fav-inf-old { color: #4f7942; }\t\t.de-fav-inf-new { color: blue; }\t\t.de-fav-title { margin-right: 15px; }\t\t.de-omitted { color: grey; font-style: italic; }\t\t.de-post-note { color: inherit; font: italic bold 12px serif; }\t\t.de-ref-hid { text-decoration: line-through !important; }\t\t.de-refmap { margin: 10px 4px 4px 4px; font-size: 70%; font-style: italic; }\t\t.de-refmap:before { content: "'+
Md[j]+' "; }\t\t.de-refmap > a { text-decoration: none; }\t\t#de-sagebtn { margin-right: 7px; cursor: pointer; }\t\t#de-select { padding: 0 !important; margin: 0 !important; width: auto; min-width: 0; z-index: 9999; border: 1px solid grey;}\t\t#de-select a { display: block; padding: 3px 10px; color: inherit; text-decoration: none; font: 13px arial; white-space: nowrap; }\t\t#de-select a:hover { background-color: #222; color: #fff; }\t\t.de-selected { '+(g.b?"border-left: 4px solid red; border-right: 4px solid red; }":
"box-shadow: 6px 0 2px -2px red, -6px 0 2px -2px red; }")+'\t\t#de-txt-resizer { display: inline-block !important; float: none !important; padding: 5px; margin: 0 0 -6px -12px; border-bottom: 2px solid #555; border-right: 2px solid #444; cursor: se-resize; }\t\t.de-viewed { color: #888 !important; }\t\t.de-pview { position: absolute; width: auto; min-width: 0; z-index: 9999; border: 1px solid grey; margin: 0 !important; display: block !important; }\t\t.de-pview-info { padding: 3px 6px !important; }\t\t.de-pview-link { font-weight: bold; }\t\t.de-archive:after { content: ""; padding: 0 16px 3px 0; margin: 0 4px; background: url(data:image/gif;base64,R0lGODlhEAAQALMAAF82SsxdwQMEP6+zzRA872NmZQesBylPHYBBHP///wAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAkALAAAAAAQABAAQARTMMlJaxqjiL2L51sGjCOCkGiBGWyLtC0KmPIoqUOg78i+ZwOCUOgpDIW3g3KJWC4t0ElBRqtdMr6AKRsA1qYy3JGgMR4xGpAAoRYkVDDWKx6NRgAAOw==) no-repeat center; }\t\t#de-iframe-pform, #de-iframe-dform, small[id^="rfmap"], div[id^="preview"], div[id^="pstprev"], body > hr, .theader, .postarea { display: none !important; }';
e.C?d+="#newposts_get, .extrabtns, .ui-resizable-handle { display: none !important; }\t\t\t.ui-wrapper { display: inline-block; width: auto !important; height: auto !important; padding: 0 !important; }":e.D&&(d+='#de-pform > div, .mentioned, form > div[style="text-align: center;"], form > div[style="text-align: center;"] + hr { display: none !important; }');e.f?d+='.de-post-hid > div:not(.postheader), img[id^="translate_button"], img[src$="button-expand.gif"], img[src$="button-close.gif"], body > center > hr, h2, form > div:first-of-type > hr'+
($a?', div[id^="disclaimer"]':"")+' { display: none !important; }\t\t\tdiv[id^="Wz"] { z-index: 10000 !important; }\t\t\t.de-thr-hid { margin-bottom: '+(!u?"7":"2")+"px; }\t\t\t.file_reply + .de-ytube-obj, .file_thread + .de-ytube-obj { margin: 5px 20px 5px 5px; float: left; }\t\t\t.de-ytube-obj + div { clear: left; }":e.d?d+=".de-spoiler { color: #000; background-color: #000; }\t\t\t.de-post-hid > .file, .de-post-hid > blockquote, #mpostform, .navLinks, .postingMode { display: none !important; }":
e.o?d+="form, form table { margin: 0; }\t\t\t.de-post-hid > .intro ~ *, .post-hover { display: none !important; }":e.m?d+=".de-post-hid > .replyheader ~ *, .opqrbtn, .qrbtn, .ignorebtn, .hidethread, noscript, #content > hr { display: none !important; }\t\t\t.de-thr-hid { margin: 1em 0; }":(d+=".de-post-hid > .de-ppanel ~ * { display: none !important; }",e.A?d+=".ABU_refmap, .postpanel, #CommentToolbar, #usrFlds + tbody > tr:first-child, #postform > div:nth-child(2), #BottomNormalReply, body > center { display: none !important; }\t\t\t\t#de-txt-panel { font-size: 16px !important; }\t\t\t\t.de-abtn { transition: none; }":
e.K?d+='#postform nobr, .replieslist, #captcha_status, .de-thread span[style="float: right;"] { display: none !important; }\t\t\t\t.ui-wrapper { position: static !important; margin: 0 !important; overflow: visible !important; }\t\t\t\t.ui-resizable { display: inline !important; }':e.i?d+="#hideinfotd, .reply_, .delete > img, .popup { display: none; }\t\t\t\t.delete { background: none; }\t\t\t\t.delete_checkbox { position: static !important; }\t\t\t\t.file + .de-ytube-obj { float: left; margin: 5px 20px 5px 5px; }\t\t\t\t.de-ytube-obj + div { clear: left; }":
e.R?d+=".reply { background-color: "+getComputedStyle(l.body).getPropertyValue("background-color")+"; }":e.n?d+=".de-content, .de-cfg-body { font-family: arial; }\t\t\t\t.ftbl { width: auto; margin: 0; }\t\t\t\t.reply { background: #f0e0d6; }":e.w?d+=".de-ppanel, .de-ppanel-op { float: left; margin-top: 0.45em; }\t\t\t\ta + .threadlinktext { position: relative; top: 17px; }\t\t\t\t.postthreadlinks, .pagethreadlinks, .pwpostblock { display: none; }\t\t\t\t.de-btn-src { padding: 0px 10px 10px 0px !important; background-size: cover !important; }":
e.ha?d+="br.clear { display: none !important; }":e.gb&&(d+="#bodywrap3 > hr, .blotter { display: none !important; }"));$a&&(d+="body > :not("+(e.w?".threadz":"form")+") { display: none; }");16>g.c&&(d=d.replace(/(transition|keyframes|transform|animation|linear-gradient)/g,g.Ta+"$1"),g.b||(d=d.replace(/\(to bottom/g,"(top").replace(/\(to top/g,"(bottom")));ea(l.head,[t("style",{id:"de-css",type:"text/css",text:d},m),t("style",{id:"de-css-dynamic",type:"text/css"},m)]);d=b=a=m;ha();H(A)}function ha(){var a=
".de-content { "+(!f.attachPanel?"width: 100%;":"position: fixed; right: 0; bottom: 25px; z-index: 9999; max-height: 95%; overflow-x: visible; overflow-y: auto;")+" }\t\t#de-panel { "+(!f.attachPanel?"float: right; clear: both":"position: fixed; right: 0; bottom: 0;")+" }",a=3===f.addPostForm?a+"#de-qarea { position: fixed; right: 0; bottom: 25px; z-index: 9990; padding: 3px; border: 1px solid gray; }\t\t\t#de-qarea-target { font-weight: bold; }\t\t\t#de-qarea-close { float: right; color: green; font: bold 20px arial; cursor: pointer; }":
a+"#de-qarea { float: none; clear: left; width: 100%; padding: 3px 0 3px 3px; margin: 2px 0; }";f.panelCounter||(a+="#de-panel-info { display: none; }");f.expandPanel||(a+="#de-panel-btns, #de-panel-info { display: none; }");f.maskImgs&&(a+='.de-img-pre, .de-ytube-obj, img[src*="spoiler"], img[src*="thumb"] { opacity: 0.07 !important; }\t\t\t.de-img-pre:hover, .de-ytube-obj:hover, img[src*="spoiler"]:hover, img[src*="thumb"]:hover { opacity: 1 !important; }');f.delHiddPost&&(a+=".de-thr-hid, .de-thr-hid + div + br, .de-thr-hid + div + br + hr { display: none; }");
f.noPostNames&&(a+=".commentpostername, .postername, .postertrip { display: none; }");f.noSpoilers&&(a+=".spoiler, .de-spoiler { background: #888 !important; color: #ccc !important; }");f.noPostScrl&&(a+="blockquote, blockquote > p, .code_part { max-height: 100% !important; overflow: visible !important; }");f.noBoardRule&&(a+=(e.n?".chui":".rules, #rules, #rules_row")+" { display: none; }");e.A&&f.addYouTube&&(a+='div[id^="post_video"] { display: none !important; }');p("de-css-dynamic").textContent=
a}function le(a,b){var c=f.scrUpdIntrv;if(!a){switch(c){case 0:c=1728E5;break;case 1:c=3456E5;break;case 2:c=12096E5;break;case 3:c=24192E5;break;default:c=5184E6}if(Date.now()-+f.lastScrUpd<c)return}GM_xmlhttpRequest({method:"GET",url:"https://raw.github.com/SthephanShinkufag/Dollchan-Extension-Tools/master/Dollchan_Extension_Tools.meta.js",headers:{"Content-Type":"text/plain"},onreadystatechange:function(c){if(4===c.readyState)if(200===c.status){var c=c.responseText.match(/@version\s+([0-9.]+)/)[1].split("."),
e=f.version.split("."),g=e.length>c.length?e.length:c.length,h=0,l=n;if(c){for(f.lastScrUpd=Date.now();h<g;){if((+c[h]||0)>(+e[h]||0)){l=i;break}else if((+c[h]||0)<(+e[h]||0))break;h++}l?b('<a style="color: blue; font-weight: bold;" href="https://raw.github.com/SthephanShinkufag/Dollchan-Extension-Tools/master/Dollchan_Extension_Tools.user.js">'+Nd[j]+"</a>"):a&&b(Od[j])}else a&&b('<div style="color: red; font-weigth: bold;">'+la[j]+"</div>")}else a&&b('<div style="color: red; font-weigth: bold;">'+
la[j]+"</div>")}})}function Rf(){if(/^(?:about|chrome|opera|res)/i.test(window.location))return n;if(!window.localStorage||!("object"===typeof localStorage&&window.sessionStorage))return GM_log("WEBSTORAGE ERROR: please, enable webstorage!"),n;Sf();switch(window.name){case "de-iframe-pform":case "de-iframe-dform":return gc(('window.top.postMessage("J'+window.name+"$#$"+ze(l)+"$#$"+window.location+'", "*");').replace(/\n|\r/g,"\\n")),n;case "de-iframe-fav":var a=setInterval(function(){v(p("de-fav-script"));
l.head.appendChild(t("script",{id:"de-fav-script",type:"text/javascript",text:'window.top.postMessage("I'+(l.body.offsetHeight+5)+'", "*");'},m))},1500);R(window,{load:function(){setTimeout(function(){clearInterval(a);a=m},3E4)}});$a=i;h={}}if(e.i&&"/settings"===window.location.pathname)return Pf(),n;if(!A||p("de-panel"))return n;Tf();return-1!==(Ta("DESU_Exclude")||"").indexOf(e.e)?n:i}function Tf(){var a=window.navigator.userAgent;g={c:+(a.match(/mozilla.*? rv:(\d+)/i)||[,0])[1],b:window.opera?
+window.opera.version():0,p:+(a.match(/WebKit\/([\d.]+)/i)||[,0])[1]};g.va=g.p&&!/chrome/i.test(a);g.na=g.c&&"function"===typeof GM_setValue;g.oa=g.na||!!Ca;g.Ta=g.p?"-webkit-":g.b?12.5>g.b?"-o-":"":16>g.c?"-moz-":"";if(!g.b||12<=g.b)g.ua=i,g.Z=g.p?"webkitAnimationName":g.b?"OAnimationName":16>g.c?"MozAnimationName":"animationName",g.Y=g.p?"webkitAnimationEnd":g.b&&12.5>g.b?"oAnimationEnd":"animationend",g.S=function(a,c){a.addEventListener(g.Y,function k(){this.removeEventListener(g.Y,k,n);c(this);
c=m},n)};g.Ob=g.p?"webkitvisibilitychange":"mozvisibilitychange";14<g.c||536.1<=g.p?g.ia=function(a,c){return c?new Blob(a,{type:c}):new Blob(a)}:5<g.c?g.ia=function(a,c){var d,e,f,g,h,j,l=new window.Sb;d=0;for(f=a.length;d<f;d++)if(j=a[d],j.buffer)if(j.length!==j.buffer.byteLength){h=new Uint8Array(g=j.length);for(e=0;e<g;e++)h[e]=j[e];l.append(h.buffer)}else l.append(j.buffer);else l.append(j);return c?l.getBlob(c):l.getBlob()}:g.ba=i;g.ab=!g.va&&!g.ba;g.aa=g.c&&8>g.c?function(a,c){K(a,C(c))}:function(a,
c){a.insertAdjacentHTML("afterend",c)};g.$a=g.c&&8>g.c?function(a,c){Y(a,C(c))}:function(a,c){a.insertAdjacentHTML("beforebegin",c)};g.forEach=g.p||g.c?function(a,c){Object.keys(a).forEach(c,a)}:function(a,c){for(var d in a)a.hasOwnProperty(d)&&c.call(a,d)};g.ya=g.va?function(a){return"/"===a[1]?"http:"+a:"/"===a[0]?"http://"+e.host+a:a}:function(a){return a};g.p&&(window.URL=window.webkitURL);g.q=g.b&&11.5>g.b?function(a,c){a.className=a.className+(" "+c)}:function(a,c){a.classList.add(c)};g.Q=g.b&&
11.5>g.b?function(a,c){a.className=a.className.replace(RegExp("(?:^| )"+c,"g"),"")}:function(a,c){a.classList.remove(c)};g.mb=12<=g.c?function(a){return(new DOMParser).parseFromString(a,"text/html")}:function(a){var c=l.implementation.createHTMLDocument("");c.documentElement.innerHTML=a;return c}}function Oe(a){if(!a||e.A&&w("locked",a))return{};var b=e.R?"li":"tr",c=".//"+b+'[not(contains(@style,"none"))]//input[not(@type="hidden") and ',d=a.querySelector("#recaptcha_response_field");return{L:i,
F:n,Hb:!e.o||!!u,G:u,form:a,O:"ancestor::"+b+"[1]",W:d,j:a.querySelector('input[name*="aptcha"]:not([name="recaptcha_challenge_field"])')||d,g:a.querySelector(b+':not([style*="none"]) textarea:not([style*="display:none"])'),fa:a.querySelector(b+' input[type="submit"]'),file:a.querySelector(b+' input[type="file"]'),P:a.querySelector(b+' input[type="password"]'),yb:A.querySelector('input[type="password"]'),ma:T('.//tr[@id="trgetback"]|.//input[@type="radio" or @name="gotothread"]/ancestor::tr[1]',a),
name:T(c+'(@name="field1" or @name="name" or @name="internal_n" or @name="nya1" or @name="akane")]',a),J:T(c+(e.X?'@name="sage"]':'(@name="field2" or @name="em" or @name="sage" or @name="email" or @name="nabiki" or @name="dont_bump")]'),a),I:a.querySelector(b+' input[name="video"], '+b+' input[name="embed"]')}}function Sf(){var a=window.location.hostname.match(/(?:(?:[^.]+\.)(?=org\.|net\.|com\.))?[^.]+\.[^.]+$|^\d+\.\d+\.\d+\.\d+$|localhost/)[0];e={C:da('.//script[contains(@src,"kusaba")]',l),i:da('.//script[contains(@src,"hanabira")]',
l),o:da('.//form[@name="postcontrols"]',l),A:!!p("LakeSettings")};switch(a){case "krautchan.net":e.f=i;break;case "2chan.net":e.n=i;break;case "britfa.gs":e.w=i;break;case "4chan.org":e.d=i;break;case "420chan.org":e.m=i}e.qa=e.w?".threadz":e.i||e.f?'form[action*="delete"]':e.o?'form[name="postcontrols"]':e.n?"form:nth-of-type(2)":'#delform, form[name="delform"]';if(A=l.querySelector(e.qa)){e.e=a;e.host=window.location.hostname;e.Qb=da('.//script[contains(@src,"wakaba")]|.//form[contains(@action,"wakaba.pl")]',
l);e.ha=da('.//form[contains(@action,"imgboard.php?delete")]',l);switch(a){case "0chan.ru":e.K=i;break;case "7chan.org":e.R=i;break;case "410chan.ru":e.X=i;break;case "hiddenchan.i2p":e.Ya=i;break;case "2--ch.ru":e.sa=i;break;case "dfwk.ru":e.Ua=i;break;case "ponychan.net":e.gb=i;break;case "mlpg.co":case "mlpchan.net":e.D=i}e.Mb=e.i||e.ha||e.sa||"02ch.net"===a;e.t=e.f?"postreply":e.o?"post reply":"reply";e.sb=e.C?"postnode":e.d?"op":e.D?"opMain":"oppost";e.tb=e.f?"thread_body":"thread";e.Jb=l.querySelector('div[id*="_info"][style*="float"]')?
'div[id^="t"]:not([style])':e.m?'[id*="thread"]':'[id^="thread"]'+(e.R?":not(#thread_controls)":"");e.kb=e.n||e.o&&!e.D?'input[type="checkbox"]':e.Qb&&!e.A||e.w?"a[name]":n;e.jb=e.d?".postInfo > :last-child":e.o?".intro > :last-child":e.f?".postnumber":e.n?".del":".reflink";e.z=e.i?".postbody":e.o?".body":e.R?".message":"blockquote";e.T=e.d?"fileText":e.f||e.o||e.i||e.w?"fileinfo":"filesize";e.hb=e.w?".fileinfo":e.f?".filename > a":(e.n?"":"."+e.T)+' a[href$=".jpg"]'+(e.K?":first-child,":",")+(e.n?
"":"."+e.T)+' a[href$=".png"]'+(e.K?":first-child,":",")+(e.n?"":"."+e.T)+' a[href$=".gif"]'+(e.K?":first-child":"");e.ib=e.n?"form:nth-of-type(1)":e.d||e.o?'form[name="post"]':"#postform";e.Pa=e.f?"postsubject":e.o||e.d?"subject":e.i?"replytitle":"filetitle";e.Ib=e.n?'font[color="#707070"]':e.f?".omittedinfo":e.i?".abbrev":e.d?".summary.desktop":".omittedposts";e.Ga=e.f?".ban_mark":e.d?'strong[style="color: red;"]':n;e.Xa=e.i?function(a){a.previousElementSibling||(a=a.parentNode);return a.parentNode}:
e.f?function(a){return a.parentNode}:Z;e.Aa=e.n?function(a){return a.querySelectorAll("td:nth-child(2)")}:e.o?function(a){return V("reply",a)}:function(a){return V(e.t,a)};e.Wa=e.w?function(a,c){var d,e=U(c.createElement("div"),{style:"clear: left;"}),f=w("originalpost",a);for(K(w("postmenu",f),e);"TABLE"!==(d=a.firstChild).tagName;)K(e,d),e=d;e=c.createElement("div");for(Y(a.firstChild,e);d=f.firstChild;)e.appendChild(d);v(P("table",a));return e}:function(a,c){var d,f,g;if(f=w(e.sb,a))return f;f=
c.createElement("div");for(g=a.querySelector(e.ca+', div[id^="repl"]');(d=a.firstChild)!==g;)f.appendChild(d);a.childElementCount?Y(a.firstChild,f):a.appendChild(f);return f};e.Ba=e.C&&!e.R||e.ha?function(a){return a.querySelector('input[type="checkbox"]').value}:e.kb?function(a){return a.querySelector(e.kb).name.match(/\d+/)[0]}:e.f?function(a){return a.parentNode.previousElementSibling.name}:function(a){return a.parentNode.id.match("\\d+"+(e.m?"$":""))[0]};e.$=e.n?function(a){return P("input",a).name}:
function(a){return a.id.match(/\d+/)[0]};e.zb=e.d?function(a){return!!w("id_Heaven",a)}:e.f?function(a){return!!w("sage",a)}:e.X?function(a){return da('.//span[@class="filetitle" and contains(text(),"'+unescape("%u21E9")+'")]',a)}:function(a){return(a=a.querySelector('a[href^="mailto:"], a[href="sage"]'))&&/sage/i.test(a.href)}}}function Dc(a,b,c,d){a.H=c;a.count=d;a.l=a.querySelector(e.z);a.r=Fa(a);a.ea=e.zb(a);a.setAttribute("de-post",b);G[a.a=b]=a}function Pe(a,b,c){var d,f,g=n,h=V(e.tb,a);B(a.getElementsByTagName("script"),
v);if(2>z.length&&(e.ca=e.d||e.D?w("replyContainer",a):e.sa?"table:not(.postfiles)":e.w?'div[id^="replies"] > table':!e.o&&(e.n||a.querySelector("td."+e.t))?"table":n,e.la=e.d||e.D?function(a){return a.parentNode}:e.ca?function(a){return a.k?a:T("ancestor::table[1]",a)}:function(a){return a},e.ca&&(ib=e.d||e.D?e.ca:a.querySelector(e.ca))&&b!==l))ib=l.importNode(ib,i);if(0===h.length&&(h=a.querySelectorAll(e.Jb),0===h.length))for(d=P("hr",a).parentNode.firstChild;;){for(h=b.createElement("div");d&&
(f=d.nextSibling)&&"HR"!==f.tagName;)h.appendChild(d),d=f;g?K(g,h):Y(a.firstChild,h);if(!d||!f)return;h.childElementCount&&c(h);g=f;d=f.nextSibling}B(h,c)}function Ve(a){try{Pe(a,l,function(a){if(e.m||e.o)K(a,a.lastChild),v(w("clear",a));var b,f=e.Wa(a,l),h=Ea.slice.call(e.Aa(a)),j=h.length;Dc(f,a.a=e.Ba(f),a,0);f.k=i;f.ga=(w(e.Pa,f)||{}).textContent||wa(f).substring(0,70);for(b=0;b<j;b++)Dc(h[b],e.$(h[b]),a,b+1);z.push(f);fa.push(f);z=z.concat(h);g.q(a,"de-thread");a.M=j+Ud(a)})}catch(b){return GM_log("DELFORM ERROR:\n"+
(g.p?b.stack:b.name+": "+b.message+"\n"+(g.c?b.stack.replace(/^([^@]*).*\/(.+)$/gm,function(a,b,e){return"    at "+(b?b+" ("+e+")":e)}):b.stack))),n}a.removeAttribute("id");return i}function Fc(a){Nb&&(a=Nb.Cb(a).Va(a));if(e.d||e.f)a=a.replace(/(^|>|\s|&gt;)(https*:\/\/.*?)(?=$|<|\s)/ig,'$1<a href="$2">$2</a>');e.d&&f.noSpoilers&&(a=a.replace(/"spoiler">/g,'"de-spoiler">'));f.hideBySpell&&S.N[0]&&(a=we(S.N,a));f.crossLinks&&(a=a.replace(RegExp(">https?:\\/\\/[^\\/]*"+e.e+"\\/([a-z0-9]+)\\/(?:res\\/|thread-)(\\d+)(?:[^#<]+)?(?:#i?(\\d+))?<",
"g"),function(a,c,d,e){return">&gt;&gt;/"+c+"/"+(e||d)+"<"}));return a}function Cc(a){e.N&&(a.innerHTML=Fc(a.innerHTML));return a}function Uf(){g.$a(A,Fc(A.outerHTML||(new XMLSerializer).serializeToString(A)));A.style.display="none";A.id="de-dform-old";A=A.previousSibling;R(window,{load:function(){v(p("de-dform-old"))}})}function We(a){if(e.A){var b;if(u&&(a=w("de-thread",a).nextSibling)){for(;b=a.nextSibling;)v(a),a=b;g.aa(a,"<hr />")}}else if(e.w)for(var a=V("reflink",a),c=a.length-1;0<=c;c--)b=
a[c].firstChild,b.onclick=m,b.href=xa(e.host,x,b.textContent),b.target="_blank"}function ff(){ka=i;f.favIcoBlink&&za&&(clearInterval(lb),B(l.head.querySelectorAll('link[rel="shortcut icon"]'),v),l.head.appendChild(t("link",{href:za,rel:"shortcut icon"},m)));1===f.updThread&&setTimeout(function(){l.title=Na},200)}function Vf(){h=Oe(l.querySelector(e.ib));aa=l.querySelector('form[name="oeform"], form[action*="paint"]');u?(f.rePageTitle?(Na="/"+x+" - "+G[u].ga,l.title=Na):Na=l.title,10<g.c||g.p?(l.addEventListener(g.Ob,
function(){l.Eb||l.Rb?ka=n:ff()}),ka=!(l.Eb||l.Rb)):(window.onblur=function(){ka=n},window.onfocus=ff,ka=n,R(window,{mousemove:function b(){ka=i;ac(window,{mousemove:b})}})),he(),(2===f.updThread||3===f.updThread)&&K(w("de-thread",l),R(C('<span>[<a href="#">'+Pd[j]+"</a>]</span>"),{click:function(b){y(b);Ab(i,function(){ra(m,0)})}}))):setTimeout(window.scrollTo,20,0,0);f.updScript&&le(n,function(b){I(b,"updavail",n)})}function gf(){var a=fc=Date.now();if(Rf()){bc=l.createElement("div");hf();var b=
(window.location.pathname||"").match(/^(?:\/?(.*?)\/?)?(res\/|thread-)?(\d+|index|wakaba)?(\.(?:[xme]*html?|php))?$/);x=b[1]||(e.Ua?"df":"");Bc=e.f?"thread-":"res/";u=b[2]?b[3]:n;nc=b[3]&&!u?+b[3]||0:0;vb=b[4]||(e.n?".htm":e.m?".php":e.d?"":".html");za=(l.querySelector('head link[rel="shortcut icon"]')||{}).href;M("initBoard");f=kc("DESU_Config_"+e.e)||Yd(g.oa);f.version=Ha.version;g.b&&11.6>g.b&&2>f.scriptStyle&&(f.scriptStyle=2);g.ba&&(f.preLoadImgs=0);g.ua||(f.animations=0);if(e.d||e.A)f.findRarJPEG=
0;g.c||(Ha.favIcoBlink=0);g.p||(f.desktNotif=0);g.b&&12>g.b&&(f.YTubeTitles=0);g.b&&(f.updScript=0);f.saveSage||(f.sageReply=0);f.passwValue||(f.passwValue=Math.round(1E15*Math.random()).toString(32));N("DESU_Config_"+e.e,JSON.stringify(f));j=f.language;ca=wb("DESU_Stat_"+e.e,{view:0,op:0,reply:0});u&&(ca.view=+ca.view+1);N("DESU_Stat_"+e.e,JSON.stringify(ca));f.correctTime&&(Nb=new oa(f.timePattern,f.timeOffset,j,sessionStorage.timeRPattern,sessionStorage.timeRPHash));e.i&&(e.Ab=new oa("yyyy-nn-dd-hh-ii-ss",
f.timeOffset||0,f.correctTime?j:1,"1_d _m _y (_w) _h:_i ",152203056));f.hideBySpell&&jc();e.N=e.d||e.f||Nb||S&&S.N[0]||f.crossLinks;M("readCfg");e.N&&(Uf(),M("replaceDelform"));Ve(A)&&(M("parseDelform"),lc(),M("readFavorites"),f.keybNavig&&(Bf(),M("initKeyNavig")),We(A),$a||(Vf(),M("initPage"),de(),M("addPanel"),b=q("div",{id:"de-parea",style:"text-align: center;"},[q("div",{id:"de-togglereply",style:"display: none;"},[W("["),t("a",{text:ud[j],href:"#","class":"de-abtn"},{click:fe}),W("]")]),q("div",
{id:"de-pform"},[h.form,aa]),l.createElement("hr")]),u&&1===f.addPostForm?K(e.d?P("hr",A):A,b):Y(A,b),(u&&1<f.addPostForm||!u&&f.noThrdForm)&&H(b),g.aa(b,'<div id="de-qarea" class="'+e.t+'" style="display: none;"></div>'),3===f.addPostForm&&ea(p("de-qarea"),[C('<span id="de-qarea-target">'+vd[j]+' <a class="de-abtn"></a></span>'),t("span",{id:"de-qarea-close",text:"\u00d7"},{click:Ba})]),h.L?ve(m,m,m):aa&&pa(m,x,z[0].a,n,ve),M("initPostform")),Gf(),f.preLoadImgs&&window.postMessage("Kall","*"),z.forEach(wc),
Xa(JSON.stringify(E)),M("addPostButtons"),f.expandImgs&&(z.forEach(Fb),M("eventPostImg")),f.expandPosts&&!u&&(z.forEach(Ec),M("expandPost")),f.addMP3&&(Cb(m),M("addLinkMP3")),f.addYouTube&&(Bb(m),M("addLinkTube")),f.addImgs&&(Db(A),M("addLinkImg")),f.imgSrcBtns&&(Eb(A),M("addImgSearch")),2===f.linksNavig&&(zc(G),M("genRefMap")),f.linksNavig&&(hb(A),M("eventRefLink")),$d(),f.markViewed&&jf(),Xe(),Ia(),M("readPosts"),me(),M("scriptCSS"),sc=Date.now()-a)}}var Ha={version:"12.9.19.0",language:0,hideBySpell:0,
hideByWipe:1,wipeSameLin:1,wipeSameWrd:1,wipeLongWrd:1,wipeSpecial:0,wipeCAPS:0,wipeNumbers:1,filterThrds:1,menuHiddBtn:1,hideRefPsts:0,delHiddPost:0,updThread:1,updThrDelay:60,favIcoBlink:1,desktNotif:0,expandPosts:2,expandImgs:2,maskImgs:0,preLoadImgs:0,findRarJPEG:0,showGIFs:0,noImgSpoil:0,postBtnsTxt:0,imgSrcBtns:1,noSpoilers:1,noPostNames:0,noPostScrl:1,keybNavig:0,correctTime:0,timeOffset:"",timePattern:"",linksNavig:2,linksOver:100,linksOut:1500,markViewed:0,strikeHidd:0,noNavigHidd:0,crossLinks:0,
insertNum:1,addMP3:1,addImgs:1,addYouTube:3,YTubeType:0,YTubeWidth:360,YTubeHeigh:270,YTubeHD:0,YTubeTitles:0,addPostForm:2,noThrdForm:1,favOnReply:1,checkReply:1,postSameImg:1,removeEXIF:1,removeFName:0,addSageBtn:1,saveSage:1,sageReply:0,captchaLang:1,addTextBtns:1,txtBtnsLoc:0,passwValue:"",userName:0,nameValue:"",userSignat:0,signatValue:"",noBoardRule:1,noGoto:1,noPassword:1,scriptStyle:0,expandPanel:0,attachPanel:1,panelCounter:1,rePageTitle:1,animation:1,closePopups:0,updScript:1,scrUpdIntrv:1,
lastScrUpd:0,textaWidth:500,textaHeight:160};ga={hideBySpell:["Заклинания: ","Magic spells: "],hideByWipe:["Анти-вайп детекторы ","Anti-wipe detectors "],wipeSameLin:["Повтор строк","Same lines"],wipeSameWrd:["Повтор слов","Same words"],wipeLongWrd:["Длинные слова",
"Long words"],wipeSpecial:["Спецсимволы","Special symbols"],wipeCAPS:["КАПС/реГисТР","CAPS/cAsE"],wipeNumbers:["Числа","Numbers"],filterThrds:["Применять фильтры к тредам","Apply filters to threads"],menuHiddBtn:["Дополнительное меню кнопок скрытия ",
"Additional menu of hide buttons"],hideRefPsts:["Скрывать ответы на скрытые посты*","Hide replies to hidden posts*"],delHiddPost:["Удалять скрытые посты","Delete hidden posts"],updThread:{s:[["Откл.","Авто","Счет+клик",
"По клику"],["Disable","Auto","Count+click","On click"]],v:["подгрузка постов в треде ","loading posts in thread "]},updThrDelay:[" (сек)*"," (sec)*"],favIcoBlink:["мигать фавиконом при новых постах*",
"Favicon blinking on new posts*"],desktNotif:["Уведомления на рабочем столе","Desktop notifications"],expandPosts:{s:[["Откл.","Авто","По клику"],["Disable","Auto","On click"]],v:["загрузка сокращенных постов*",
"upload of shorted posts*"]},expandImgs:{s:[["Откл.","В посте","По центру"],["Disable","In post","By center"]],v:["раскрывать изображения ","expand images "]},preLoadImgs:["Предварительно загружать изображения*",
"Pre-load images*"],findRarJPEG:["Распознавать rarJPEG'и в изображениях*","Detect rarJPEGs in images*"],showGIFs:["Анимировать GIFы в постах*","Animate GIFs in posts*"],noImgSpoil:["Раскрывать изображения-спойлеры*",
"Open spoiler-images*"],postBtnsTxt:["Кнопки постов в виде текста*","Show post buttons as text*"],imgSrcBtns:["Добавлять кнопки для поиска изображений*","Add image search buttons*"],noSpoilers:["Открывать спойлеры",
"Open spoilers"],noPostNames:["Скрывать имена в постах","Hide names in posts"],noPostScrl:["Без скролла в постах","No scroll in posts"],keybNavig:["Навигация с помощью клавиатуры* ",
"Navigation with keyboard* "],correctTime:["Корректировать время в постах* ","Correct time in posts* "],timeOffset:[" Разница во времени"," Time difference"],timePattern:["Шаблон замены","Replace pattern"],linksNavig:{s:[["Откл.",
"Без карты","С картой"],["Disable","No map","With map"]],v:["навигация по >>ссылкам* ","navigation by >>links* "]},linksOver:[" задержка появления (мс)"," delay appearance (ms)"],linksOut:[" задержка пропадания (мс)",
" delay disappearance (ms)"],markViewed:["Отмечать просмотренные посты*","Mark viewed posts*"],strikeHidd:["Зачеркивать >>ссылки на скрытые посты","Strike >>links to hidden posts"],noNavigHidd:["Не отображать превью для скрытых постов",
"Don't show previews for hidden posts"],crossLinks:["Преобразовывать http:// в >>/b/ссылки*","Replace http:// with >>/b/links*"],insertNum:["Вставлять >>ссылку по клику на №поста*","Insert >>link on №postnumber click*"],addMP3:["Добавлять плейер к mp3-ссылкам* ",
"Add player to mp3-links* "],addImgs:["Загружать изображения к .jpg-, .png-, .gif-ссылкам*","Load images to .jpg-, .png-, .gif-links*"],addYouTube:{s:[["Ничего","Плейер по клику","Авто плейер","Превью+плейер",
"Только превью"],["Nothing","On click player","Auto player","Preview+player","Only preview"]],v:["к YouTube-ссылкам* ","to YouTube-links* "]},YTubeType:{s:[["Flash","HTML5 iframe","HTML5 video"],["Flash","HTML5 iframe","HTML5 video"]],v:[" "," "]},YTubeHD:["HD ","HD "],YTubeTitles:["Загружать названия к YouTube-ссылкам*",
"Load titles into YouTube-links*"],addPostForm:{s:[["Сверху","Внизу","В постах","Отдельная"],["At top","At bottom","Inline","Hanging"]],v:["форма ответа в треде* ","reply form in thread* "]},noThrdForm:["Прятать форму создания треда",
"Hide thread creating form"],favOnReply:["Добавлять тред в избранное при ответе","Add thread to favorites on reply"],checkReply:["Постить ответ без перезагрузки*","Posting reply without reload*"],postSameImg:["Возможность отправки одинаковых изображений",
"Ability to post same images"],removeEXIF:["Удалять EXIF-данные из JPEG-изображений","Remove EXIF-data from JPEG-images"],removeFName:["Удалять имя из отправляемых файлов","Remove name from uploaded files"],addSageBtn:["Sage вместо поля E-mail* ",
"Sage button instead of E-mail field* "],saveSage:["запоминать сажу","remember sage"],captchaLang:{s:[["Откл.","Eng","Rus"],["Disable","Eng","Rus"]],v:["язык ввода капчи","language input in captcha"]},addTextBtns:{s:[["Откл.","Графич.","Упрощ.","Стандарт."],
["Disable","As images","As text","Standard"]],v:["кнопки форматирования текста ","text format buttons "]},txtBtnsLoc:["внизу","at bottom"],userPassw:[" Постоянный пароль"," Fixed password"],userName:["Постоянное имя",
"Fixed name"],userSignat:["Постоянная подпись","Fixed signature"],noBoardRule:["правила ","rules "],noGoto:["поле goto ","goto field "],noPassword:["пароль","password"],excludeList:["Список адресов, запрещающих скрипт:",
"Address list, that excludes script"],scriptStyle:{s:[["Glass black","Glass blue","Solid grey"],["Glass black","Glass blue","Solid grey"]],v:[" стиль скрипта"," script style"]},attachPanel:["Прикрепить главную панель ","Attach main panel "],panelCounter:["Счетчик постов/изображений в треде",
"Posts/images counter in thread"],rePageTitle:["Название треда в заголовке вкладки*","Thread name in page title*"],animation:["Включить анимацию в скрипте","Enable animation in script"],closePopups:["Автоматически закрывать уведомления",
"Close popups automatically"],updScript:["Включить авто-проверку на обновления","Enable Auto Update-сheck"],scrUpdIntrv:{s:[["Каждый день","Каждые 2 дня","Каждую неделю","Каждые 2 недели",
"Каждый месяц"],["Every day","Every 2 days","Every week","Every 2 week","Every month"]],v:["Интервал проверки","Check interval"]},language:{s:[["Ru","En"],["Ru","En"]],v:["",""]}};Bd={bold:["Жирный","Bold"],italic:["Наклонный","Italic"],under:["Подчеркнутый",
"Underlined"],strike:["Зачеркнутый","Strike"],spoil:["Спойлер","Spoiler"],code:["Код","Code"],quote:["Цитировать выделенное","Quote selected"]};Oc={filters:["Фильтры","Filters"],posts:["Посты","Posts"],links:["Ссылки",
"Links"],form:["Форма","Form"],common:["Общее","Common"],info:["Инфо","Info"]};Pb={settings:["Настройки","Settings"],hidden:["Скрытое","Hidden"],favor:["Избранное","Favorites"],refresh:["Обновить","Refresh"],goback:["Назад","Go back"],gonext:["Следующая",
"Next"],goup:["Наверх","To the top"],godown:["В конец","To the bottom"],newthr:["Создать тред","New thread"],expimg:["Раскрыть картинки","Expand images"],maskimg:["Маскировать картинки","Mask images"],"upd-on":["Автообновление треда",
"Thread autoupdate"],"audio-off":["Звуковое оповещение о новых постах","Sound notification about new posts"],catalog:["Каталог","Catalog"],counter:["Постов/Изображений в треде","Posts/Images in thread"]};
pd=[["Скрывать выделенное","Скрывать изображение","Скрыв. схожие изобр.","Скрыть схожий текст"],["Hide selected text","Hide same images","Hide similar images",
"Hide similar text"]];qd=[["5 постов","15 постов","30 постов","50 постов","100 постов"],["5 posts","15 posts","30 posts","50 posts","100 posts"]];rd=[["1 страница","2 страницы","3 страницы","4 страницы",
"5 страниц"],["1 page","2 pages","3 pages","4 pages","5 pages"]];sd=[["Каждые 30 сек.","Каждую минуту","Каждые 2 мин.","Каждые 5 мин."],["Every 30 sec.","Every minute","Every 2 min.","Every 5 min."]];Pc=["Добавить","Add"];Qc=["Применить",
"Apply"];nb=["Очистить","Clear"];yd=["Обновить","Refresh"];$c=["Загрузить","Load"];Da=["Сохранить","Save"];ob=["Правка","Edit"];dd=["Сброс","Reset"];Wb=["Удалить","Remove"];ld=["Инфо","Info"];Vb=["Отмена",
"Undo"];ua=["Загрузка...","Loading..."];Qb=["Проверка...","Checking..."];Zb=["Удаление...","Deleting..."];rb=["Ошибка:","Error:"];la=["Ошибка подключения","Connection failed"];Jd=["Тред недоступен (№",
"Thread is unavailable (№"];zd=["Пост(ы) удален(ы)!","Post(s) deleted!"];Ad=["Не могу удалить пост(ы):\n","Can't delete post(s):\n"];Qd=["Неправильные настройки времени","Invalid time settings"];bd=["Глобальные настройки не найдены",
"Global config not found"];$b=["Пост не найден","Post not found"];Tc=["Проверить сейчас","Check now"];Nd=["Доступно обновление!","Update available!"];Od=["У вас стоит самая последняя версия!",
"You have latest version!"];Id=["В треде %m непрочитанных сообщений.","There are %m unreaded messages in thread."];Uc=["Версия: ","Version: "];Vc=["Хранение: ","Storage: "];Wc=["Тредов просмотрено: ","Threads viewed: "];
Xc=["Тредов создано: ","Threads created: "];Yc=["Постов: ","Posts: "];Rb=["Всего: ","Total: "];Sc=["Не отображать: ","Do not show: "];ad=["Загрузить глобальные настройки","Load global settings"];
cd=["Сохранить настройки как глобальные","Save settings as global"];ed=["Сбросить в настройки по умолчанию","Reset settings to defaults"];qb=["Сохранить внесенные изменения",
"Save your changes"];pb=["Правка в текстовом формате","Edit in text format"];md=["Обновить счетчики постов","Refresh posts counters"];nd=["Проверить актуальность тредов (до 5 страницы)",
"Check for threads actuality (up to 5 page)"];od=["Очистить записи недоступных тредов","Clear notes of inaccessible threads"];Xb=["Удалить выделенные записи","Remove selected notes"];gd=["Скрытые посты на странице",
"Hidden posts on page"];jd=["Скрытые треды","Hidden threads"];hd=["На этой странице нет скрытых постов...","No hidden posts on this page..."];id=["Нет скрытых тредов...","No hidden threads..."];Ub=["Раскрыть все",
"Expand all"];kd=["Нет избранных тредов...","Favorites is empty..."];Md=["Ответы:","Replies:"];Gd=["Пропущено ответов: ","Posts omitted: "];Hd=["Свернуть тред","Collapse thread"];Ld=["удалён","deleted"];Pd=["Получить новые посты",
"Get new posts"];Yb=["Страница","Page"];Kd=["Скрытый тред:","Hidden thread:"];ud=["Раскрыть форму","Expand form"];td=["Искать в ","Search in "];Fd=["Ответ","Reply"];vd=["Ответ в","Reply to"];xd=["Ждите","Wait"];wd=["+ rarJPEG",
"+ rarJPEG"];Rc=['На доске:\n"J" - тред ниже,\n"K" - тред выше,\n"N" - пост ниже,\n"M" - пост выше,\n"V" - вход в тред\n\nВ треде:\n"J" - пост ниже,\n"K" - пост выше,\n"V" - быстрый ответ',
'On board:\n"J" - thread below,\n"K" - thread above,\n"N" - post below,\n"M" - post above,\n"V" - enter a thread\n\nIn thread:\n"J" - post below,\n"K" - post above,\n"V" - quick reply'];Dd=["янв,фев,мар,апр,мая,июн,июл,авг,сен,окт,ноя,дек".split(","),"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(",")];Ed=["января,февраля,марта,апреля,мая,июня,июля,августа,сентября,октября,ноября,декабря".split(","),
"January,February,March,April,May,June,July,August,September,October,November,December".split(",")];Cd=["Вск,Пнд,Втр,Срд,Чтв,Птн,Сбт".split(","),"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(",")];fd=["Данное действие удалит все ваши настройки и закладки. Продолжить?",
"This will delete all your preferences and favourites. Continue?"];Rd=["Файл повреждён: ","File is corrupted: "];Zc=["Отладка","Debug"];Tb=["Информация для отладки","Information for debugging"];var l=window.document,Ea=Array.prototype,f,E,J,ca,G={},z=[],fa=[],X,O,g,e,x,Bc,u,nc,vb,Na,h,A,aa,bc,ib;Ob=[];
ta={};mb=sa=m;za="";lb=m;Pa=ka=n;Qa=m;kb=Oa=n;var Mb,Lc,S,ya,Va,fc,sc,sb="",Nb,Za,j,Fe,Ma="",$a,Ya;xb.prototype=Ha;zb.prototype.append=function(a){if("file"===a.type){if(0<a.files.length){var b=a.files[0].name;this.data.push("--"+this.ja+'\r\nContent-Disposition: form-data; name="'+a.name+'"; filename="'+(!f.removeFName?b:" "+b.substring(b.lastIndexOf(".")))+'"\r\nContent-type: '+a.files[0].type+"\r\n\r\n",m,"\r\n");this.Lb(a,this.data.length-2)}}else("checkbox"!==a.type||a.checked)&&this.data.push("--"+
this.ja+'\r\nContent-Disposition: form-data; name="'+a.name+'"\r\n\r\n'+a.value+"\r\n")};zb.prototype.Lb=function(a,b){var c=new FileReader,d=a.files[0],h=this;/^image\/(?:png|jpeg)$/.test(d.type)?(c.onload=function(){var l=Ef(this.result,!e.Ha||!!a.V);l?(a.V&&l.push(a.V),f.postSameImg&&l.push(""+Math.round(1E6*Math.random())),h.data[b]=g.ia(l,m),h.wa--):(h.error=i,I(Rd[j]+d.name,"upload",n));c=h=a=b=d=m},c.readAsArrayBuffer(d),this.wa++):this.data[b]=d};oa.Nb=function(a){if(a.checked&&(!/^[+-]\d{1,2}$/.test(f.timeOffset)||
oa.Qa(f.timePattern)))I(Qd[j],"err-correcttime",n),Q("correctTime",0),a.checked=n};oa.Qa=function(a){return!a.contains("i")||!a.contains("h")||!a.contains("d")||!a.contains("y")||!(a.contains("n")||a.contains("m"))||/[^\?\-\+sihdmwny]|mm|ww|\?\?|([ihdny]\?)\1+/.test(a)};oa.prototype.Cb=function(a){if(this.Za||this.disabled)return this;var b,c,d,e=1,f=0,h=a.match(RegExp(this.lb));if(!h)return this.disabled=i,this;this.da="";for(d=h[0];c=h[e++];){if("m"===(b=this.pattern[e-2]))this.za=3<c.length;a=
d.indexOf(c,f);this.da+=d.substring(f,a)+"_"+b;f=a+c.length}sessionStorage.timeRPHash=ic(sessionStorage.timeRPattern=(this.za?"1":"0")+this.da);this.Za=i;return this};oa.prototype.Va=function(a){function b(a){return 10>a?"0"+a:a}if(this.disabled)return a;var c=this.rb,d=this.za?this.pb:this.qb,e=this.pattern,f=this.da,h=this.xb,a=a.replace(RegExp(this.lb,"g"),function(){var a,g,j,l,p,q,s,t,u;for(a=1;8>a;a++)g=arguments[a],j=e[a-1],"s"===j?l=g:"i"===j?p=g:"h"===j?q=g:"d"===j?s=g:"n"===j?t=g-1:"y"===
j?u=g:"m"===j&&(t=/^янв|^jan/i.test(g)?0:/^фев|^feb/i.test(g)?1:/^мар|^mar/i.test(g)?2:/^апр|^apr/i.test(g)?3:/^май|^may/i.test(g)?4:/^июн|^jun/i.test(g)?5:/^июл|^jul/i.test(g)?6:/^авг|^aug/i.test(g)?7:/^сен|^sep/i.test(g)?8:/^окт|^oct/i.test(g)?9:/^ноя|^nov/i.test(g)?10:/^дек|^dec/i.test(g)&&11);a=new Date(2===u.length?
"20"+u:u,t,s,q,p,l||0);a.setHours(a.getHours()+h);return f.replace("_s",b(a.getSeconds())).replace("_i",b(a.getMinutes())).replace("_h",b(a.getHours())).replace("_d",b(a.getDate())).replace("_w",c[a.getDay()]).replace("_n",b(a.getMonth()+1)).replace("_m",d[a.getMonth()]).replace("_y",2===u.length?(""+a.getFullYear()).substring(2):a.getFullYear())}),c=d=e=f=h=b=m;return a};window.opera?R(l,{DOMContentLoaded:gf}):gf()})(window.opera&&window.opera.scriptStorage);
