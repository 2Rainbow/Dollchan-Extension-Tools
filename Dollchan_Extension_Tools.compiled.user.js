// ==UserScript==
// @name			Dollchan Extension Tools
// @version			12.9.24.0
// @namespace		http://www.freedollchan.org/scripts/*
// @author			Sthephan Shinkufag @ FreeDollChan
// @copyright		(C)2084, Bender Bending Rodriguez
// @description		Doing some profit for imageboards
// @icon			https://raw.github.com/SthephanShinkufag/Dollchan-Extension-Tools/stable/Icon.png
// @updateURL		https://raw.github.com/SthephanShinkufag/Dollchan-Extension-Tools/stable/Dollchan_Extension_Tools.meta.js
// @include			*
// ==/UserScript==
var i=void 0,m=!0,n=null,V=!1;
(function(Da){var Pa,Qa,Ra,lb,ka,Aa,mb,ua,nb,Pb,va,Rb,ha,Pc,Qc,Rc,ob,Sc,Tc,Uc,Sb,Vc,Wc,Xc,Yc,Zc,Tb,$c,Ub,ad,bd,cd,Ea,dd,pb,qb,ed,fd,gd,rb,hd,Vb,Wb,id,jd,kd,Xb,Yb,ld,md,nd,Zb,od,wa,pd,qd,rd,sd,td,ud,vd,wd,xd,yd,zd,$b,sb,Ad,Bd,la,Cd,Dd,Ed,Fd,ac,Gd,Hd,Id,Jd,Kd,Ld,Md,Nd,Od,Pd,Qd,Rd,Sd;function T(a,b){return l.evaluate(a,b,n,8,n).singleNodeValue}function ea(a,b){return l.evaluate(a,b,n,3,n).booleanValue}function Td(a,b){return b.querySelector(a)}function W(a,b){return g.c?b.getElementsByClassName(a):b.querySelectorAll("."+
a)}function w(a,b){return b.getElementsByClassName(a)[0]}function o(a){return l.getElementById(a)}function P(a,b){return b.getElementsByTagName(a)[0]}function A(a,b){Fa.forEach.call(a,b)}function Ud(a,b){var c=a.cloneNode(V);c.innerHTML=b;a.parentNode.replaceChild(c,a);return c}function U(a,b){for(var c in b)"text"===c?a.textContent=b[c]:"value"===c?a.value=b[c]:a.setAttribute(c,b[c]);return a}function R(a,b){for(var c in b)a.addEventListener(c,b[c],V);return a}function bc(a,b){for(var c in b)a.removeEventListener(c,
b[c],V)}function fa(a,b){for(var c=0,d=b.length;c<d;c++)b[c]&&a.appendChild(b[c])}function Z(a,b){a.parentNode.insertBefore(b,a)}function K(a,b){a.parentNode.insertBefore(b,a.nextSibling)}function C(a){cc.innerHTML=a;return cc.firstChild}function q(a,b,c){a=l.createElement(a);b&&U(a,b);c&&R(a,c);return a}function p(a,b,c){a=q(a,b,n);fa(a,c);return a}function X(a){return l.createTextNode(a)}function L(a,b,c){return q("input",{type:"button",value:a,title:b},{click:c})}function D(a,b){return a?b:n}function H(a){a.style.display=
"none"===a.style.display?"":"none"}function s(a){a&&a.parentNode.removeChild(a)}function ma(a){a=a.getBoundingClientRect();return{top:Math.round(a.top+window.pageYOffset),left:Math.round(a.left+window.pageXOffset)}}function dc(a){window.scrollTo(0,ma(a).top)}function x(a){a.preventDefault()}function Sa(a,b){var c=a.scrollTop,d=a.selectionStart;a.value=a.value.substr(0,d)+b+a.value.substr(a.selectionEnd);a.setSelectionRange(d+b.length,d+b.length);a.focus();a.scrollTop=c}function ec(){return(g.d?l.getSelection():
window.getSelection()).toString()}function xa(a){var a=a.match(/\/.*?[^\\]\/[ig]*/)[0],b=a.lastIndexOf("/");return RegExp(a.substr(1,b-1),a.substr(b+1))}function Ba(a){for(var b in a)if(a.hasOwnProperty(b))return V;return m}function M(a){var b=Date.now();tb+=a+": "+(b-fc)+"ms\n";fc=b}function kf(){e.Ya&&(window.setTimeout=function(a,b){"function"===typeof a&&a.apply(n,Fa.slice.call(arguments,2));return 1});String.prototype.contains||(String.prototype.contains=function(a){return this.indexOf(a)!==
-1});window.GM_log||(window.GM_log=function(a){console.error(a)});window.GM_xmlhttpRequest||(window.GM_xmlhttpRequest=function(a){var b,c=new window.XMLHttpRequest;if(a.onreadystatechange)c.onreadystatechange=function(){a.onreadystatechange(c)};c.onload=function(){if(a.onload)a.onload(c);c=a=n};c.open(a.method,a.url,m);c.setRequestHeader("Accept-Encoding","deflate, gzip, x-gzip");for(b in a.headers)c.setRequestHeader(b,a.headers[b]);c.send(n)})}function gc(a){l.head.appendChild(q("script",{type:"text/javascript",
text:a},n))}function $(a){return T("ancestor::*[@de-post]",a)}function Ga(a){return a.querySelectorAll('.thumb, img[src*="thumb"], img[src*="/spoiler"], img[src^="blob:"]')}function Vd(a){return(a=a.querySelector(e.Hb))&&(a=a.textContent)?+(a.match(/\d+/)||[0])[0]:0}function ya(a){return a.mb||(a.mb=a.l.innerHTML.replace(/<\/?(?:br|p|li)[^>]*?>/gi,"\n").replace(/<[^>]+?>/g,"").replace(/&gt;/g,">").replace(/&lt;/g,"<").trim())}function Wd(a){var a=w(e.T,a).textContent.match(/\d+[\.\d\smkк]*[bб]/i)[0],
b=parseFloat(a.match(/[\d\.]+/));/MB/.test(a)&&(b*=1E3);/\d\s*B/.test(a)&&(b=(b/1E3).toFixed(2));return+b}function hc(a){a=w(e.T,a);return e.z?(a=a.onclick.toString().split("', '"),[+a[3],+a[4]]):(a=a?a.textContent.match(/\d+[x\u00d7]\d+/):V)?a[0].split(/[x\u00d7]/):[n,n]}function ub(a){return"/"+a+(a?"/":"")}function na(a,b,c){return"//"+a+ub(b)+(/(?:^|\.)krautchan\.net$/.test(a)?"thread-":"res/")+c+(/(?:^|\.)(?:dobrochan\.(?:ru|org)|tenhou\.ru)$/.test(a)?".xhtml":/(?:^|\.)420chan\.org$/.test(a)?
".php":/(?:^|\.)2chan\.net$/.test(a)?".htm":".html")}function vb(a,b,c){return ub(b)+(0<c?c+wb:/(?:^|\.)(?:dobrochan\.(?:ru|org)|tenhou\.ru)$/.test(a)?"index.xhtml":"")}function Ta(a,b){var c,d,k=a instanceof Array;if(k){if(0==a.length)return"[]";c="["}else{if(Ba(a))return"{}";c="{"}d=0;g.forEach(a,function(a){var e=this[a],f=typeof e;"function"!==f&&("object"===f&&(f=e===n?"null":e instanceof Array?"array":e instanceof Date?"date":e instanceof RegExp?"regex":"object"),0<d&&(c+=","),c+="\n"+b+"    "+
(k?"":'"'+a+'": ')+("array"===f||"object"===f?Ta(e,b+"    "):"boolean"===f||"number"===f?e.toString():"string"===f?'"'+e.replace(/"/g,'\\"')+'"':f),d++)});return c+="\n"+b+(k?"]":"}")}function ic(a){for(var b,c=0,d=0,k=a.length;d<k;++d){c=(c<<4)+a.charCodeAt(d);if(b=c&4026531840)c^=b>>>24;c&=~b}return c}function Xd(a,b,c){l.cookie=escape(a)+"="+escape(b)+";expires="+(new Date(Date.now()+c)).toGMTString()+";path=/"}function Ua(a){return g.oa?GM_getValue(a):Da?Da.getItem(a):localStorage.getItem(a)}
function N(a,b){g.oa?GM_setValue(a,b):Da?Da.setItem(a,b):localStorage.setItem(a,b)}function xb(a,b){try{return JSON.parse(Ua(a))||b}catch(c){return b}}function Va(a){Wa=ic(a);za=a.split("\n");N("DESU_Spells_"+e.e,JSON.stringify([Wa,za]));Yd()}function jc(){var a,b=Ua("DESU_Spells_"+e.e);try{a=JSON.parse(b),Wa=a[0],za=a[1],Yd()}catch(c){Va(b||"")}}function yb(a){for(var b in a)this[b]=a[b]}function kc(a){try{var b=JSON.parse(Ua(a));if(b.version)return new yb(b)}catch(c){}return V}function Zd(a){a=
a&&kc("DESU_GlobalCfg")||new yb({version:Ia.version});a.captchaLang=e.Kb?2:1;a.language=navigator.language.contains("ru")?0:1;a.timePattern=a.timeOffset="";a.correctTime=0;return a}function Q(a,b){f[a]!==b&&(f[a]=b,N("DESU_Config_"+e.e,JSON.stringify(f)))}function zb(a){Q(a,!f[a]?1:0)}function $d(){return!f.hideByWipe?0:f.wipeSameLin|f.wipeSameWrd<<1|f.wipeLongWrd<<2|f.wipeCAPS<<3|f.wipeSpecial<<4|f.wipeNumbers<<5}function ae(){Y=[];if(u){var a=(sessionStorage["de-hidden"]||"").split(",");if(+a[0]===
(f.hideBySpell?Wa:0)&&+a[1]===$d())if(Y=a[2].split(""),a=sessionStorage["de-deleted"])a.split(",").forEach(function(a){Y.splice(a,1)}),delete sessionStorage["de-deleted"]}Y.length=y.length;O=xb("DESU_Posts_"+e.e+"_"+v,{});be()}function Ja(){u&&(sessionStorage["de-hidden"]=(f.hideBySpell?Wa+",":"0,")+$d()+","+Y.join(""));oa("hid",m)}function Xa(){var a,b=JSON.stringify(O);9E3<b.length&&(a=Date.now()-432E6,g.forEach(O,function(b){O[b][1]<a&&delete O[b]}),b=JSON.stringify(O));N("DESU_Posts_"+e.e+"_"+
v,b);oa("hid",m)}function be(){J=xb("DESU_Threads_"+e.e,{})}function ce(a,b){J[v]||(J[v]={});0===b?J[v][a.a]=a.ga:(delete J[v][a.a],Ba(J[v])&&delete J[v]);N("DESU_Threads_"+e.e,JSON.stringify(J))}function lc(){E=xb("DESU_Favorites",{})}function Ya(a){N("DESU_Favorites",a);oa("fav",m)}function mc(a,b,c){delete E[a][b][c];Ba(E[a][b])&&delete E[a][b];Ba(E[a])&&delete E[a];F[c]&&((w("de-btn-fav-sel",F[c].B)||{}).className="de-btn-fav")}function de(a,b){var c=e.host,d=v,k=a.a;b&&(lc(),E[c]&&E[c][d]&&E[c][d][k]?
mc(c,d,k):(E[c]||(E[c]={}),E[c][d]||(E[c][d]={}),E[c][d][k]={cnt:a.H.M+1,txt:a.ga},b.className="de-btn-fav-sel"),Ya(JSON.stringify(E)))}function lf(){var a=sessionStorage["de-viewed"];a&&a.split(",").forEach(function(a){if(a=F[a])g.r(a,"de-viewed"),a.La=m})}function aa(a,b,c,d,k){return p("li",n,[q("a",{id:"de-btn-"+a,"class":"de-abtn",title:Rb[a][j],href:c||"#",onmouseout:k},{click:b,mouseover:d})])}function ee(){var a=Ga(z).length;Z(z,p("div",{id:"de-main",lang:fe()},[p("div",{id:"de-panel"},[q("span",
{id:"de-btn-logo"},{click:function(){zb("expandPanel");ia()}}),p("ul",{id:"de-panel-btns"},[aa("settings",function(a){x(a);oa("cfg",V)},n,n,n),aa("hidden",function(a){x(a);oa("hid",V)},n,n,n),aa("favor",function(a){x(a);oa("fav",V)},n,n,n),aa("refresh",function(a){x(a);window.location.reload()},n,function(){u||mf()},"de_delSelection(event)"),aa("goback",n,"//"+e.host+vb(e.host,v,nc-1),n,n),D(!u,aa("gonext",n,"//"+e.host+vb(e.host,v,nc+1),n,n)),aa("goup",function(a){x(a);window.scrollTo(0,0)},n,n,
n),aa("godown",function(a){x(a);window.scrollTo(0,l.body.scrollHeight||l.body.offsetHeight)},n,n,n),D(!u&&(h.L||ba),aa("newthr",ge,n,n,n)),D(0<a,aa("expimg",function(a){x(a);f.expandImgs=1;Za=!Za;y.forEach(function(a){oc(a,Za)})},n,n,n)),D(h.file||ba,aa("maskimg",function(a){x(a);zb("maskImgs");ia()},n,n,n)),D(u&&3!==f.updThread,aa("upd-on",function(a){x(a);$a?he():(this.id="de-btn-upd-on",ie())},n,n,n)),D(!g.ja&&u&&1===f.updThread,aa("audio-off",function(a){x(a);je();Pa=V;this.id=Qa?"de-btn-audio-on":
"de-btn-audio-off";s(o("de-select"))},n,nf,"de_delSelection(event)")),D(e.K,aa("catalog",n,"//0chan.ru/"+v+"/catalog.html",n,n))]),D(u,p("div",{id:"de-panel-info"},[q("span",{title:Rb.counter[j],text:y.length+"/"+a},n)]))]),q("div",{"class":"de-content"},n),q("div",{id:"de-alert"},n),q("hr",{style:"clear: both;"},n)]))}function oa(a,b){if(!ab){var c=w("de-content",l),d="de-content-"+a;b&&c.id!==d||(c.childElementCount&&f.animation?(g.S(c,function(c){ke(c,d,a,b);d=a=b=n}),c.className="de-content de-cfg-close"):
ke(c,d,a,b))}}function ke(a,b,c,d){a.innerHTML=a.style.backgroundColor="";if(!d&&a.id===b)a.removeAttribute("id");else{a.id=b;f.attachPanel||a.appendChild(q("hr",{style:"clear: both;"},n));if("cfg"===c)of(a);else if(f.attachPanel&&(a.style.backgroundColor=getComputedStyle(l.body).getPropertyValue("background-color")),"hid"===c&&(be(),pf(a)),"fav"===c)lc(),qf(a);f.animation&&(a.className="de-content de-cfg-open")}}function pa(a,b){for(var c=b.length;c--;)(l.querySelector(b[c])||{}).disabled=!a}function pc(){pa(f.hideByWipe,
'input[info="wipeSameLin"],input[info="wipeSameWrd"],input[info="wipeLongWrd"],input[info="wipeSpecial"],input[info="wipeCAPS"],input[info="wipeNumbers"]'.split(","));pa(1===f.updThread||2===f.updThread,['input[info="updThrDelay"]','input[info="favIcoBlink"]','input[info="desktNotif"]']);pa(f.preLoadImgs,['input[info="findRarJPEG"]','input[info="showGIFs"]','input[info="noImgSpoil"]']);pa(f.linksNavig,['input[info="linksOver"]','input[info="linksOut"]','input[info="markViewed"]','input[info="strikeHidd"]',
'input[info="noNavigHidd"]']);pa(f.addYouTube&&4!==f.addYouTube,['select[info="YTubeType"]','input[info="YTubeHD"]']);pa(f.addYouTube,['input[info="YTubeWidth"]','input[info="YTubeHeigh"]','input[info="YTubeTitles"]']);pa(2===f.ajaxReply,['input[info="postSameImg"]','input[info="removeEXIF"]','input[info="removeFName"]']);pa(f.addTextBtns,['input[info="txtBtnsLoc"]']);pa(f.updScript,['select[info="scrUpdIntrv"]'])}function r(a,b,c){var d=q("input",{info:a,type:"checkbox"},{click:function(){zb(this.getAttribute("info"));
pc();c&&c(this)}});d.checked=f[a];return p("label",b?{"class":"de-blockinp"}:n,[d,X(" "+ha[a][j])])}function ja(a,b,c){return q("input",{info:a,type:"text",size:b,value:f[a]},{keyup:c?c:function(){Q(this.getAttribute("info"),this.value)}})}function ca(a,b,c){for(var d=0,k=ha[a],e=k.q[j].length,B=[];d<e;d++)B[d]='<option value="'+d+'">'+k.q[j][d]+"</option>";(c=R(C('<select info="'+a+'">'+B.join("")+"</select>"),{change:c?c:function(){Q(this.getAttribute("info"),this.selectedIndex);pc()}})).selectedIndex=
f[a];return p("label",b?{"class":"de-blockinp"}:n,[c,X(" "+k.t[j])])}function Ka(a){return p("div",{"class":e.v+" de-cfg-tab-back",selected:V},[q("div",{"class":"de-cfg-tab",text:Pc[a][j],info:a},{click:function(){var a,c;c=this.parentNode;if("true"!==c.getAttribute("selected")){if(a=w("de-cfg-body",l))a.className="de-cfg-unvis",l.querySelector('.de-cfg-tab-back[selected="true"]').setAttribute("selected",V);c.setAttribute("selected",m);c=this.getAttribute("info");(a=o("de-cfg-"+c))||K(o("de-cfg-bar"),
a="posts"===c?rf():"links"===c?sf():"form"===c?tf():"common"===c?uf():vf());a.className="de-cfg-body";"filters"===c&&(jc(),o("de-spell-edit").value=za.join("\n"));pc()}}})])}function wf(){return p("div",{"class":"de-cfg-unvis",id:"de-cfg-filters"},[p("div",n,[p("span",{id:"de-spell-panel"},[q("a",{text:Qc[j],href:"#","class":"de-abtn",onmouseout:"de_delSelection(event)"},{click:x,mouseover:xf}),q("a",{text:Rc[j],href:"#","class":"de-abtn"},{click:function(a){x(a);Q("hideBySpell",1);l.querySelector('input[info="hideBySpell"]').checked=
m;qc()}}),q("a",{text:ob[j],href:"#","class":"de-abtn"},{click:function(a){x(a);o("de-spell-edit").value="";qc()}}),q("a",{text:"?",target:"_blank",href:"//www.freedollchan.org/scripts/spells","class":"de-abtn"},n)]),r("hideBySpell",V,qc),q("textarea",{id:"de-spell-edit",rows:10,cols:49},n)]),r("hideByWipe",m,n),p("div",{id:"de-cfg-wipe"},[p("div",n,[r("wipeSameLin",V,n),r("wipeSameWrd",V,n),r("wipeLongWrd",V,n)]),p("div",n,[r("wipeSpecial",V,n),r("wipeCAPS",V,n),r("wipeNumbers",V,n)])]),r("filterThrds",
m,n),r("menuHiddBtn",m,n),r("hideRefPsts",m,n),r("delHiddPost",m,function(){A(W("de-post-hid",z),function(a){H(e.ma(a))});ia()})])}function rf(){return p("div",{"class":"de-cfg-unvis",id:"de-cfg-posts"},[ca("updThread",V,n),p("label",n,[ja("updThrDelay",4,n),X(ha.updThrDelay[j])]),p("div",{style:"padding-left: 25px;"},[D(!g.n,r("favIcoBlink",m,n)),D(g.n,r("desktNotif",m,function(){f.desktNotif&&window.webkitNotifications.requestPermission()}))]),ca("expandPosts",m,n),ca("expandImgs",m,n),D(!g.V,r("preLoadImgs",
m,n)),D(!g.V,p("div",{style:"padding-left: 25px;"},[D(!e.u&&!e.b,r("findRarJPEG",m,n)),r("showGIFs",m,n),r("noImgSpoil",m,n)])),r("postBtnsTxt",m,n),r("imgSrcBtns",m,n),r("noSpoilers",m,ia),r("noPostNames",m,ia),r("noPostScrl",m,ia),p("div",n,[r("keybNavig",V,n),q("a",{text:"?",href:"#","class":"de-abtn"},{click:function(a){x(a);I(Sc[j],"help-keybnavig",V)}})]),r("correctTime",m,qa.Lb),p("div",{style:"padding-left: 25px;"},[p("div",n,[ja("timeOffset",3,n),X(ha.timeOffset[j])]),p("div",n,[ja("timePattern",
30,n),X(" "),q("a",{text:ha.timePattern[j],href:"#","class":"de-abtn"},{click:function(a){x(a);I('"s" - second (one digit),\n"i" - minute (one digit),\n"h" - hour (one digit),\n"d" - day (one digit),\n"w" - week (string)\n"n" - month (one digit),\n"m" - month (string),\n"y" - year (one digit),\n"-" - any symbol\n"+" - any symbol except digits\n"?" - previous char may not be\n\nExamples:\n0chan.ru: "w+yyyy+m+dd+hh+ii+ss"\niichan.ru, 2ch.so: "w+dd+m+yyyy+hh+ii+ss"\ndobrochan.ru: "dd+m+?+?+?+?+?+yyyy++w++hh+ii-?s?s?"\n410chan.org: "dd+nn+yyyy++w++hh+ii+ss"\n4chan.org: "nn+dd+yy+w+hh+ii-?s?s?"\n4chon.net: "nn+dd+yy++w++hh+ii+ss"\nkrautchan.net: "yyyy+nn+dd+hh+ii+ss+--?-?-?-?-?"',
"help-correcttime",V)}})])])])}function sf(){return p("div",{"class":"de-cfg-unvis",id:"de-cfg-links"},[ca("linksNavig",m,n),p("div",{style:"padding-left: 25px;"},[p("div",n,[ja("linksOver",6,function(){Q("linksOver",+this.value|0)}),X(ha.linksOver[j])]),p("div",n,[ja("linksOut",6,function(){Q("linksOut",+this.value|0)}),X(ha.linksOut[j])]),r("markViewed",m,n),r("strikeHidd",m,n),r("noNavigHidd",m,n)]),r("crossLinks",m,n),r("insertNum",m,n),r("addMP3",m,n),r("addImgs",m,n),ca("addYouTube",m,n),p("div",
{style:"padding-left: 25px;"},[p("div",n,[ca("YTubeType",V,n),ja("YTubeWidth",6,n),X("\u00d7"),ja("YTubeHeigh",6,n),X(" "),r("YTubeHD",V,n)]),D(!(g.d&&12>g.d),r("YTubeTitles",V,n))])])}function tf(){return p("div",{"class":"de-cfg-unvis",id:"de-cfg-form"},[ca("ajaxReply",m,n),D(!g.ja&&!g.V,p("div",{style:"padding-left: 25px;"},[r("postSameImg",m,n),r("removeEXIF",m,n),r("removeFName",m,n)])),D(h.L,ca("addPostForm",m,n)),D(h.L,r("noThrdForm",m,function(){u||(o("de-parea").style.display=f.noThrdForm?
"none":"")})),r("favOnReply",m,n),D(h.J,p("div",n,[r("addSageBtn",V,n),r("saveSage",V,n)])),ca("captchaLang",m,n),D(h.L,p("div",n,[ca("addTextBtns",V,function(){Q("addTextBtns",this.selectedIndex);rc()}),r("txtBtnsLoc",V,rc)])),D(h.P,p("div",n,[ja("passwValue",20,le),X(ha.userPassw[j])])),D(h.name,p("div",n,[ja("nameValue",20,sc),r("userName",V,sc)])),D(h.g,p("div",n,[ja("signatValue",20,n),r("userSignat",V,n)])),p("div",n,[D(h.L||ba,X(Tc[j])),r("noBoardRule",V,ia),D(h.na,r("noGoto",V,function(){H(h.na)})),
D(h.P,r("noPassword",V,function(){H(h.P.parentNode.parentNode)}))])])}function uf(){return p("div",{"class":"de-cfg-unvis",id:"de-cfg-common"},[D(g.pa,p("div",n,[X(ha.excludeList[j]),q("textarea",{value:Ua("DESU_Exclude")||"",rows:6,cols:49},{keyup:function(){N("DESU_Exclude",this.value)}})])),ca("scriptStyle",m,function(){Q("scriptStyle",this.selectedIndex);o("de-main").lang=fe()}),r("attachPanel",m,function(){oa("cfg",V);ia()}),r("panelCounter",m,ia),r("rePageTitle",m,n),D(g.ua,r("animation",m,
n)),r("closePopups",m,n),D(!g.d,p("div",n,[r("updScript",m,n),p("div",{id:"de-upd-cont",style:"padding: 2px 0 10px 25px;"},[ca("scrUpdIntrv",m,n),L(Uc[j],"",function(){var a=o("de-updresult");a.innerHTML='<span class="de-wait">'+Sb[j]+"</div>";me(m,function(b){a.innerHTML=b})})]),q("div",{id:"de-updresult",style:"font-size: 1.1em; text-align: center"},n)]))])}function vf(){return p("div",{"class":"de-cfg-unvis",id:"de-cfg-info"},[C('<span style="width: 179px;"><b>'+Vc[j]+f.version+"</b><br><br>"+
Wc[j]+(g.oa?"Mozilla config":Da?"Opera ScriptStorage":"Local Storage")+"<br>"+Xc[j]+da.view+"<br>"+Yc[j]+da.op+"<br>"+Zc[j]+da.reply+"</span>"),C('<span style="padding-left: 7px; border-left: 1px solid grey;">'+tb.split("\n").join("<br>")+"<br>"+Tb[j]+tc+"ms</span>"),p("div",{style:"display: table;"},[C('<span style="display: table-cell; width: 100%;"><a href="//www.freedollchan.org/scripts/" target="_blank">http://www.freedollchan.org/scripts</a></span>'),U(L($c[j],Ub[j],function(){var a,b=new yb(f),
c=tb.split("\n");c[c.length-1]=Tb[j]+tc+"ms";delete b.nameValue;delete b.passwValue;delete b.signatValue;delete b.lastScrUpd;for(a in b)b[a]===Ia[a]&&delete b[a];I(Ub[j]+':<br /><textarea readonly rows="20" cols="75">'+Ta({version:Ia.version,location:""+window.location,nav:g,cfg:b,spells:za,perf:c},"")+"</textarea>","help-debug",V)}),{style:"display: table-cell;"})])])}function of(a){a.appendChild(p("div",{"class":e.v},[q("div",{id:"de-cfg-head",text:"Dollchan Extension Tools"},n),p("div",{id:"de-cfg-bar"},
[Ka("filters"),Ka("posts"),Ka("links"),Ka("form"),Ka("common"),Ka("info")]),wf(),p("div",{id:"de-cfg-btns"},[p("span",{style:"float: right;"},[ca("language",V,function(){Q("language",j=this.selectedIndex);s(o("de-main"));s(o("de-css"));s(o("de-css-dynamic"));ne();ee();oa("cfg",V)}),D(g.pa,L(ad[j],bd[j],function(){kc("DESU_GlobalCfg")?(N("DESU_Config_"+e.e,""),window.location.reload()):I(cd[j],"err-noglobalcfg",V)})),D(g.pa,L(Ea[j],dd[j],function(){N("DESU_GlobalCfg",JSON.stringify(f));oa("cfg",m)})),
L(pb[j],qb[j],function(){H(U(P("textarea",this.parentNode.parentNode),{value:Ta(f,"")}).parentNode)}),L(ed[j],fd[j],function(){confirm(gd[j])&&(N("DESU_Config_"+e.e,JSON.stringify(Zd(V))),N("DESU_Stat_"+e.e,""),N("DESU_Favorites",""),N("DESU_Threads_"+e.e,""),Va(""),window.location.reload())})]),q("br",{style:"clear: both;"},n),p("div",{style:"display: none;"},[q("textarea",{rows:10,cols:49},n),L(Ea[j],rb[j],function(){N("DESU_Config_"+e.e,this.previousSibling.value.trim().replace(/\t|\n/g,""));window.location.reload()})])])]));
w("de-cfg-tab",a).click()}function oe(a,b){return a.appendChild(p("div",{"class":"de-content-block"},[q("input",{type:"checkbox"},{click:function(){var a=this.checked;A(this.parentNode.querySelectorAll(".de-entry > div > input"),function(b){b.checked=a});a=n}}),b]))}function pf(a){var b,c,d;A(W("de-post-hid",z),function(b){if(!b.k){var c=b.cloneNode(m);c.removeAttribute("id");c.style.display="";c.h=m;c.Fb=b;c.la=c.querySelector(".de-btn-hide, .de-btn-lock");c.la.parentNode.className="de-ppanel";c.la.onmouseover=
c.la.onmouseout=n;c.la.onclick=function(){var a=$(this);bb(a,a.h=!a.h)};(d||(d=a.appendChild(p("div",{"class":"de-content-block"},[C("<b>"+hd[j]+":</b>")])))).appendChild(p("div",{"class":"de-entry"},[c]))}});d?fa(a,[L(Vb[j],"",function(){A(this.parentNode.querySelectorAll(".de-entry > [de-post]"),function(a){bb(a,a.h=!a.h)});this.value=this.value==Wb[j]?Vb[j]:Wb[j]}),L(Ea[j],"",function(){A(this.parentNode.querySelectorAll(".de-entry > [de-post]"),function(a){a.h||La(a.Fb,V)});Xa()})]):a.appendChild(C("<b>"+
id[j]+"</b>"));fa(a,[C("<hr />"),C("<b>"+(Ba(J)?jd[j]:kd[j]+":")+"</b>")]);if(!Ba(J))for(b in J)for(c in d=oe(a,C("<b>"+b+"</b>")),J[b])d.appendChild(p("div",{"class":"de-entry",info:b+";"+c},[p("div",{"class":e.v},[q("input",{type:"checkbox"},n),C('<a href="'+na(e.host,b,c)+'" target="_blank">№'+c+"</a>"),X(" - "+J[b][c])])]));fa(a,[C("<hr />"),L(pb[j],qb[j],function(){H(U(P("textarea",this.parentNode),{value:Ta(J,"")}).parentNode)}),L(Xb[j],Yb[j],function(){A(this.parentNode.querySelectorAll(".de-entry[info]"),
function(a){var b=a.getAttribute("info").split(";"),c=b[0],b=b[1];P("input",a).checked&&(F[b]?La(F[b],V):delete J[c][b],Ba(J[c])&&delete J[c])});N("DESU_Threads_"+e.e,JSON.stringify(J));Xa()}),p("div",{style:"display: none;"},[q("textarea",{rows:9,cols:70},n),L(Ea[j],rb[j],function(){N("DESU_Threads_"+e.e,this.previousSibling.value.trim().replace(/\t|\n/,""));window.location.reload()})])])}function qf(a){var b,c,d,k;for(b in E)for(c in E[b])for(d in k=oe(a,C('<a href="http://'+b+vb(b,c,0)+'">'+b+
"/"+c+"</a>")),E[b][c])k.appendChild(p("div",{"class":"de-entry",info:b+";"+c+";"+d},[p("div",{"class":e.v},[C('<input type="checkbox" />'),q("span",{"class":"de-btn-expthr"},{click:yf}),C('<a href="'+na(b,c,d)+'">№'+d+"</a>"),C('<span class="de-fav-title"> - '+E[b][c][d].txt+"</span>"),C('<span class="de-fav-inf-page"></span>'),C('<span class="de-fav-inf-posts">[<span class="de-fav-inf-old">'+E[b][c][d].cnt+"</span>]</span>")])]));a.firstChild||a.appendChild(C("<b>"+ld[j]+"</b>"));fa(a,[l.createElement("hr"),
L(pb[j],qb[j],function(){H(U(P("textarea",this.parentNode),{value:Ta(E,"")}).parentNode)}),L(md[j],nd[j],function(){A(W("de-entry",l),function(a){var b,c=a.getAttribute("info").split(";");c[0]===e.host&&(b=U(w("de-fav-inf-posts",a).firstElementChild,{"class":"de-wait",text:""}),ra(n,c[1],c[2],m,function(a,d,k){a=k?k:a.length+1;b.textContent=a;!k&&a>E[c[0]][c[1]][c[2]].Sa?(b.className="de-fav-inf-new",E[c[0]][c[1]][c[2]].Sa=a,N("DESU_Favorites",JSON.stringify(E))):b.className="de-fav-inf-old";b=c=
n}))})}),L(Zb[j],od[j],function(){var a=6,b=0;for(I(wa[j],"load-pages",m);a--;)pe(C("<div></div>"),a,function(a,c){A(W("de-entry",l),function(d){var k=d.getAttribute("info").split(";");k[0]!==e.host||k[1]!==v||(d=w("de-fav-inf-page",d),RegExp("(?:№|No.|>)\\s*"+k[2]+"\\s*<").test(a.innerHTML)?d.innerHTML="@"+c:5===b&&!d.textContent.contains("@")&&(d.innerHTML="@?"))});5===b&&sa(o("de-alert-load-pages"));b++;a=c=n})}),L(ob[j],pd[j],function(){A(W("de-entry",l),function(a){var b=a.getAttribute("info").split(";");
g.d&&b[0]!==e.host||ra(na(b[0],b[1],b[2]),n,n,V,function(a,c,d){d&&(mc(b[0],b[1],b[2]),Ya(JSON.stringify(E)));b=n})})}),L(Xb[j],Yb[j],function(){A(W("de-entry",l),function(a){var b=a.getAttribute("info").split(";");P("input",a).checked&&mc(b[0],b[1],b[2])});Ya(JSON.stringify(E))}),p("div",{style:"display: none;"},[q("textarea",{rows:9,cols:70},n),L(Ea[j],rb[j],function(){Ya(this.previousSibling.value.trim().replace(/\n|\r/,""))})])])}function sa(a){a&&(a.Ra=n,f.animation?(g.S(a,s),g.r(a,"de-close")):
s(a))}function I(a,b,c){var d=o("de-alert-"+b),k="de-alert-msg"+(c?" de-wait":""),G=c?"":"\u00d7 ";d?(U(P("div",d),{"class":k}).innerHTML=a.trim(),P("span",d).textContent=G,clearTimeout(d.Ra),f.animation&&(g.S(d,function(a){g.Q(a,"de-blink")}),g.r(d,"de-blink"))):(d=o("de-alert").appendChild(p("div",{"class":e.v,id:"de-alert-"+b},[q("span",{"class":"de-alert-btn",text:G},{click:function(){sa(this.parentNode)}}),C('<div class="'+k+'">'+a.trim()+"</div>")])),f.animation&&(g.S(d,function(a){g.Q(a,"de-open")}),
g.r(d,"de-open")));f.closePopups&&!c&&!b.contains("help")&&(d.Ra=setTimeout(sa,4E3,d))}function Ma(a,b,c){var d,k=$(a);f.attachPanel&&b?(d="fixed",b="de-btn-refresh"===a.id||"de-btn-audio-off"===a.id?"bottom: 25":"top: "+(a.getBoundingClientRect().top+a.offsetHeight-(g.c?0.5:0))):(d="absolute",b="top: "+(ma(a).top+a.offsetHeight-(g.c?0.5:0)));l.body.appendChild(R(C('<div class="'+e.v+'" id="de-select" style="position: '+d+"; "+("de-btn-src"===a.className?"left: "+ma(a).left:"right: "+(l.body.clientWidth-
ma(a).left-a.offsetWidth))+"px; "+b+'px;" onmouseout="de_delSelection(event)">'+c+"</div>"),{mouseover:function(){k&&cb(k,V)}}));return o("de-select").getElementsByTagName("a")}function xf(a){A(Ma(a.target,m,'<div style="display: inline-block; border-right: 1px solid grey;"><a href="#">'+"#b/,#b/itt,#exp ,#exph ,#img ,#imgn ,#name ,#noimg,#notxt,#num ".split(",").join('</a><a href="#">')+'</a></div><div style="display: inline-block;"><a href="#">'+"#op,#outrep,#rep ,#sage,#skip ,#theme ,#tmax ,#trip,#video ".split(",").join('</a><a href="#">')+
"</a></div>"),function(a){a.onclick=function(a){var b=this.textContent;x(a);"#b/"===b?b="#"+v+"/ ":"#b/itt"===b&&(b="#"+v+"/"+(u?u+" ":" "));Sa(o("de-spell-edit"),b)}})}function zf(a){if(f.menuHiddBtn&&(f.filterThrds||!a.k)){var b=Ma(a.B.firstChild,V,'<a href="#">'+qd[j].join('</a><a href="#">')+"</a>");b[1].onclick=function(b){x(b);db(0===a.s.length?"#noimg":"#img ="+Wd(a)+"@"+hc(a).join("x"))};b[2].onclick=function(b){x(b);db(0===a.s.length?"#noimg":"#ihash "+qe(a))};b[3].onclick=function(b){x(b);
Af(a)};(b=b[0]).onclick=function(a){x(a);db(Na)};b.onmouseover=function(){Na=ec().trim()}}}function Bf(a){A(Ma(a.B.querySelector("span:nth-child(3)"),V,'<a href="#">'+rd[j].join('</a><a href="#">')+"</a>"),function(b){b.onclick=function(b){x(b);eb(a,parseInt(this.textContent,10),n)}})}function mf(){A(Ma(o("de-btn-refresh"),m,'<a href="#">'+sd[j].join('</a><a href="#">')+"</a>"),function(a){a.onclick=function(a){x(a);re(Fa.indexOf.call(this.parentNode.children,this)+1)}})}function nf(){"de-btn-audio-off"===
this.id&&A(Ma(o("de-btn-audio-off"),m,'<a href="#">'+td[j].join('</a><a href="#">')+"</a>"),function(a){a.onclick=function(a){x(a);a=Fa.indexOf.call(this.parentNode.children,this);Pa=0===a?3E4:1===a?6E4:2===a?12E4:3E5;je();o("de-btn-audio-off").id="de-btn-audio-on";s(this.parentNode)}})}function Cf(a){var b=a.nextSibling.href+'" target="_blank">'+ud[j],c=l.body.getAttribute("de-image-search"),d="";c&&(c=c.split(";"),c.forEach(function(a){a=a.split(",");d+='<a class="de-src'+a[0]+(!a[1]?'" onclick="de_cImgSearch(event, \''+
a[0]+'\')" href="#" de-url="':'" href="'+a[1])+b+a[0]+"</a>"}));Ma(a,V,'<a class="de-src-iqdb" href="//iqdb.org/?url='+b+'IQDB</a><a class="de-src-tineye" href="//tineye.com/search/?url='+b+'TinEye</a><a class="de-src-google" href="//google.ru/searchbyimage?image_url='+b+'Google</a><a class="de-src-saucenao" href="//saucenao.com/search.php?url='+b+"SauceNAO</a>"+d);d=n}function Df(){function a(){try{d=c(y,0>=d?0:d-1,-1,m,V),B=m}catch(a){}}function b(){if(d!==y.length-1)try{d=c(y,d+1,1,y[d+1].k||y[d+
1].getBoundingClientRect().top>window.innerHeight/2-y[d+1].clientHeight/2,V),B=m}catch(a){}}function c(a,b,c,d,k){for(var e=b;a[e].h||a[e].H.h;)e+=c;a=a[e];if(e!==b||d)window.scrollTo(0,k?ma(a).top:ma(a).top-window.innerHeight/2+a.clientHeight/2);(b=w("de-selected",l))&&g.Q(b,"de-selected");a.k&&(a=a.H);g.r(a,"de-selected");return e}var d,k=0,f=V,B=m,Ha=m;window.onscroll=function(){f?f=V:Ha=B=m};l.addEventListener("keydown",function(t){var h=t.target.tagName,j=t.keyCode;if("TEXTAREA"===h||"INPUT"===
h&&"text"===t.target.type)27===j&&t.target.blur();else if(!t.ctrlKey&&!t.altKey&&!(t.shiftKey||74!==j&&75!==j&&77!==j&&78!==j&&86!==j&&116!==j))if(116===j)u||(x(t),re(1));else{x(t);t.stopPropagation();if(Ha){if(B)a:{for(var t=y,h=0,l=window.pageYOffset;h<t.length;h++)if(ma(t[h]).top>l){t=h-1;break a}t=i}else t=y.indexOf(ga[k]);d=t}if(!u&&B)if((y[d]||{}).k)k=h=ga.indexOf(y[d]);else if(Ha){for(h=0>=d?0:d;0<h&&!y[h].k;h--);k=h=ga.indexOf(y[h])}else h=k;else h=k;B=Ha=V;if(86===j)u?uc(y[d]):g.c?GM_openInTab(na(e.host,
v,ga[h].a),V,m):window.open(na(e.host,v,ga[h].a),"_blank");else if(f=m,75===j)if(u)a();else try{k=c(ga,0>=k?0:k-1,-1,m,m),Ha=m}catch(o){}else if(74===j)if(u)b();else{if(k!==ga.length-1)try{k=c(ga,k+1,1,m,m),Ha=m}catch(p){}}else!u&&77===j?a():!u&&78===j&&b()}},m)}function se(a,b){if(e.C||e.ha)return a.replace(/\?[^?]+$|$/,(e.Y?"?board="+v+"&":"?")+Math.random());0<b&&(a=a.replace(/mainpage|res\d+/ig,"res"+b));return a.replace(/dummy=[\d\.]*/,"dummy="+Math.random())}function fb(a){var b=h.X?o("recaptcha_image")||
h.X:T(h.O+"//img",h.j);e.i||h.X?(a=l.createEvent("MouseEvents"),a.initEvent("click",m,m),b.dispatchEvent(a)):(a=se(b.getAttribute("src"),a),b.src="",b.src=a)}function te(){var a=f.sageReply;o("de-sagebtn").innerHTML="&nbsp;"+(a?'<span class="de-btn-sage"></span><b style="color: red;">SAGE</b>':"<i>(no&nbsp;sage)</i>");"text"===h.J.type?h.J.value=a?"sage":e.b?"noko":"":h.J.checked=a;e.u&&Xd("email",a?"sage":"",1E5)}function sc(){var a=l.querySelector('input[info="nameValue"]');a&&Q("nameValue",a.value);
h.name.value=f.userName?f.nameValue:""}function le(){var a=l.querySelector('input[info="passwValue"]');a&&Q("passwValue",a.value);(h.xb||{}).value=h.P.value=f.passwValue}function Ef(){function a(){bc(l.body,{mousemove:b,mouseup:a});Q("textaWidth",parseInt(h.g.style.width,10));Q("textaHeight",parseInt(h.g.style.height,10))}function b(a){var b=ma(h.g);h.g.style.width=a.pageX-b.left+"px";h.g.style.height=a.pageY-b.top+"px"}K(h.g,q("div",{id:"de-txt-resizer"},{mousedown:function(c){x(c);R(l.body,{mousemove:b,
mouseup:a})}}))}function vc(a){A(a.querySelectorAll('input[type="file"]'),function(a){R(a,{change:ue})})}function ve(a){A(a.querySelectorAll(".de-file-util"),s);A(a.querySelectorAll('input[type="file"]'),function(a){a.W=n})}function ue(){this.Ab?this.W&&(this.W=n,s(this.nextSibling)):(this.Ab=m,K(this,U(L(ob[j],n,function(a){x(a);a=this.parentNode;ve(a);R(h.file=Td('input[type="file"]',Ud(a,a.innerHTML)),{change:ue})}),{"class":"de-file-util de-file-del"})));!e.u&&!e.b&&(s(w("de-file-rar",this.parentNode)),
/^image\/(?:png|jpeg)$/.test(this.files[0].type)&&K(this,U(L(xd[j],n,function(a){x(a);var a=o("de-file-rar")||l.body.appendChild(q("input",{id:"de-file-rar",type:"file",style:"display: none"},n)),b=this.parentNode.querySelector('input[type="file"]'),c=this;a.onchange=function(){s(c);var a=this.files[0],k=new FileReader,e=C('<span class="de-file-util" style="margin: 0 5px;"><span class="de-wait"></span>'+yd[j]+"</span>");K(b,e);k.onload=function(){if(b.nextSibling===e){U(e,{style:"font-weight: bold; margin: 0 5px; cursor: default;",
title:b.files[0].name+" + "+a.name,text:"rarJPEG"});b.W=this.result}e=b=a=n};k.readAsArrayBuffer(a);c=n};a.click()}),{"class":"de-file-util de-file-rar"})));vc(T(h.O,this))}function we(a,b,c){h.form.style.display="inline-block";h.form.style.textAlign="left";g.d?Ef():R(h.g,{mouseup:function(){Q("textaWidth",parseInt(this.style.width,10));Q("textaHeight",parseInt(this.style.height,10))}});rc();h.g.style.cssText="width: "+f.textaWidth+"px; height: "+f.textaHeight+"px;";R(h.g,{keypress:function(a){var b=
a.charCode||a.keyCode;if((33===b||34===b)&&0===a.which)a.target.blur(),window.focus()}});R(h.fa,{click:function(){var a=h.g.value,b=f.signatValue;f.hideBySpell&&S.Ea[0]&&(a=xe(S.Ea,a));f.userSignat&&b&&(a+="\n"+b);if(h.G&&"Dollchan Extension Tools"===(w("filetitle",F[h.G])||{}).textContent&&!/`\n`\-{50}`/.test(a))a+="\n\n`--------------------------------------------------`\n`"+window.navigator.userAgent+"`\n`v"+f.version+"`\n`--------------------------------------------------`";h.g.value=a;f.ajaxReply&&
I(Sb[j],"upload",m);f.favOnReply&&h.G&&de(F[h.G],w("de-btn-fav",F[h.G].B));h.G?da.reply=+da.reply+1:da.op=+da.op+1;N("DESU_Stat_"+e.e,JSON.stringify(da));if(h.I&&(a=h.I.value)&&(a=a.match(gb())))h.I.value="http://www.youtube.com/watch?v="+a[1];h.D&&(H(o("de-qarea")),K(o("de-togglereply"),o("de-pform")))}});A(h.form.querySelectorAll('input[type="text"], input[type="file"]'),function(a){a.size=30});f.noGoto&&h.na&&H(h.na);f.noPassword&&h.P&&H(T(h.O,h.P));R(window,{load:function(){f.userName&&h.name&&
setTimeout(sc,1E3);h.P&&setTimeout(le,1E3)}});h.X&&(U(h.fa,{onclick:"Recaptcha.focus_response_field = function() {}"}),(c=o("recaptcha_image"))&&U(c,{onclick:"Recaptcha.reload()",style:"width: 300px; cursor: pointer;"}));if(h.j&&(e.u&&setTimeout(function(){fb(0);h.j.onclick=n},50),h.j.autocomplete="off",h.j.onfocus=n,h.j.onkeypress=function(a){if(f.captchaLang&&a.which!==0){var b,c=a.charCode||a.keyCode,e=String.fromCharCode(c).toLowerCase();if(f.captchaLang===1){if(c<1040||c>1279||(b="йцукенгшщзхъфывапролджэячсмитьбюё".indexOf(e))===
-1)return;e="qwertyuiop[]asdfghjkl;'zxcvbnm,.`"[b]}else{if(c<33||c>122||(b="qwertyuiop[]asdfghjkl;'zxcvbnm,.`".indexOf(e))===-1)return;e="йцукенгшщзхъфывапролджэячсмитьбюё"[b]}x(a);Sa(a.target,e)}},!e.i&&!h.X)){a=e.C?Td("a, img",T(h.O,h.j)):T(h.O+"//img",h.j);b=q("img",{alt:wa[j],title:zd[j],style:"display: block; border: none; cursor: pointer;"},
{click:function(){fb(u||0)}});if(a)a.parentNode.replaceChild(b,a);else{for(;h.j.nextSibling;)s(h.j.nextSibling);K(h.j,b)}setTimeout(function(b){b.src=se(e.Y?"/faptcha.php?board="+v:e.Ya?"/securimage/securimage_show.php?"+Math.random():e.C?"/"+v.substr(0,v.indexOf("/")+1)+"captcha.php?"+Math.random():a?a.src:"/"+v+"/captcha.pl?key=mainpage&amp;dummy="+Math.random(),u||0)},50,b)}f.addSageBtn&&h.J&&(b=q("span",{id:"de-sagebtn"},{click:function(a){a.stopPropagation();x(a);zb("sageReply");te()}}),c=T("ancestor::label",
h.J)||h.J,c.nextElementSibling||c.previousElementSibling?(H(c),K(c,b)):(H(T(h.O,h.J)),K(h.name||h.fa,b)),setTimeout(te,0));2===f.ajaxReply?(h.form.onsubmit=function(a){x(a);wc(new Ab(h.form,h.fa),ye)},z.onsubmit=x,A(z.querySelectorAll('input[type="submit"]'),function(a){a.onclick=function(a){x(a);Ca();I($b[j],"deleting",m);wc(new Ab(z,this),ze)}})):1===f.ajaxReply&&(fa(o("de-main"),[C('<iframe id="de-iframe-pform" name="de-iframe-pform" src="about:blank"/>'),C('<iframe id="de-iframe-dform" name="de-iframe-dform" src="about:blank"/>')]),
U(h.form,{target:"de-iframe-pform"}).onsubmit=n,U(z,{target:"de-iframe-dform"}).onsubmit=function(){Ca();I($b[j],"deleting",m)});h.file&&vc(T(h.O,h.file));e.K&&((c=o("posttypeindicator"))&&s(c.parentNode),h.j.style.cssText="display: block; float: left; margin-top: 1em;")}function Ae(a){if(!a.body.firstChild||a.querySelector(e.ca))return"";var b="";A(a.querySelectorAll(e.i?".post-error, h2":e.C?'h1, h2, div[style*="1.25em"]':e.b?"#errmsg":e.f?".message_text":e.m?"pre":'h1, h2, font[size="5"]'),function(a){b+=
a.innerHTML+"\n"});(b=b.replace(/<a [^>]+>Назад.+|<br.+/,""))||(b=sb[j]+"\n"+a.body.innerHTML);return/successful|uploaded|updating|обновл|удален[о\.]/i.test(b)?"":b.replace(/"/g,"'")}function Be(){sa(o("de-alert-upload"));2===f.updThread&&ta(n,0)}function ye(a,b){var c;if(a){h.D&&(H(c=o("de-qarea")),c.appendChild(o("de-pform")));if(e.i&&/подтвердите, что вы человек/.test(a)||
h.j&&/captch|капч|подтверж/i.test(a))h.j.value="",h.j.focus(),fb(h.G);I(a,"upload",V)}else(h.g.value="",h.file&&(c=T(h.O,h.file),ve(c),c=Ud(c,c.innerHTML),h.file=c.querySelector('input[type="file"]'),vc(c)),h.I&&(h.I.value=""),c=h.G)?(Ca(),u?Bb(V,Be):eb(F[c],5,Be),h.j&&(h.j.value="",fb(c))):window.location=b}function Ce(a,b){if(e.b)return P("meta",a).content.match(/http:\/\/[^"]+/)[0];if(b)return window.location;if(a.querySelector(e.ca)){var c;
(c=a.querySelector(".thread, "+e.jb))?c=c.id.match("\\d+"+(e.m?"$":""))[0]:(c=a.querySelector(e.Ga),c=c.value||c.name.match(/\d+/)[0]);return na(e.host,v,c)}return""}function De(){var a=o("de-alert-deleting");a&&(sa(a),I(Ad[j],"deleted",V))}function ze(a){var b=[];a?I(Bd[j]+a,"deleting",V):(A(z.querySelectorAll("[de-post] input:checked"),!u?function(a){a=$(a).H.a;-1===b.indexOf(a)&&b.push(a)}:function(a){a.checked=V}),u?Bb(V,De):b.forEach(function(a){eb(F[a],5,De)}));b=n}function wc(a,b){if(!a.error)if(0<
a.va)setTimeout(wc,200,a,b);else{var c={"Content-type":"multipart/form-data; boundary="+a.ka};g.c&&(c.Referer=""+l.location);a.data.push("--"+a.ka+"--\r\n");GM_xmlhttpRequest({method:"POST",headers:c,data:g.ia(a.data,n),url:g.xa(a.url),onreadystatechange:function(a){4===a.readyState&&(200===a.status?(a=g.lb(a.responseText),b(Ae(a),Ce(a,V)),b=n):I(0===a.status?la[j]:"HTTP ["+a.status+"] "+a.statusText,"upload",V))}})}}function Ff(a,b){return a[b+1]<<8|a[b]}function Gf(a,b){return a[b+3]<<24|a[b+2]<<
16|a[b+1]<<8|a[b]}function Hf(a,b){return a[b]<<8|a[b+1]}function If(a,b){return a[b]<<24|a[b+1]<<16|a[b+2]<<8|a[b+3]}function Jf(a,b){var c=0,d=0,k=a.length,e=0,B=!!f.removeEXIF,g=V;if(!f.postSameImg&&!B&&!b)return[a];if(255===a[0]&&216===a[1]){for(;c<k-1;)a:{if(255===a[c]){if(B){if(225===a[c+1]&&69===a[c+4]&&!g)b:{var g=a,t=c+10,h=(a[c+2]<<8)+a[c+3],j=i,l=i,o=i,p=i,u=i,q=i,r=i,s=0,v=0,w=0;"MM"===String.fromCharCode(g[t],g[t+1])?(q=Hf,r=If):(q=Ff,r=Gf);if(42!==q(g,t+2))g=V;else if(j=r(g,t+4),j>h)g=
V;else{u=q(g,j+=t);for(l=0;l<u;l++)if(o=j+2+12*l,p=q(g,o),!(282!==p&&283!==p&&296!==p))if(296===p)w=q(g,o+8)-1;else{o=r(g,o+8);if(o>h){g=V;break b}o+=t;282===p?s=+(r(g,o)/r(g,o+4)).toFixed(0):v=+(r(g,o)/r(g,o+4)).toFixed(0)}s=s||v;v=v||s;g=[w,s>>8,s&255,v>>8,v&255]}}else 224===a[c+1]&&70===a[c+7]&&!g&&(g=[a[c+11],a[c+12],a[c+13],a[c+14]]);if(14===a[c+1]>>4||254===a[c+1]){c+=2+(a[c+2]<<8)+a[c+3];break a}}if(216===a[c+1])e++;else if(217===a[c+1]&&0===--e){a[d]=a[c];break}}d!==c&&(a[d]=a[c]);c++;d++}d+=
2;c+=2;if(d!==c)a[d-1]=a[c-1];else if(d===k)return[a];if(!b&&75<k-c)for(;c<k;a[d++]=a[c++]);if(B){c=e=new Uint8Array(k=d+18);d=g||[0,0,1,0,1];c[0]=255;c[1]=216;c[2]=255;c[3]=224;c[4]=0;c[5]=16;c[6]=74;c[7]=70;c[8]=73;c[9]=70;c[10]=0;c[11]=1;c[12]=1;c[18]=0;c[19]=0;c[13]=d[0];c[14]=d[1];c[15]=d[2];c[16]=d[3];c[17]=d[4];c=2;for(d=20;d<k;c++,d++)e[d]=a[c];return[e]}}else if(137===a[0]&&80===a[1]){for(;d<k-7&&!(73===a[d]&&69===a[d+1]&&78===a[d+2]&&68===a[d+3]);d++);d+=8;if(d===k||!b&&75<k-d)return[a]}else return n;
return[new Uint8Array(a,d)]}function Ab(a,b){this.ka="---------------------------"+Math.round(1E11*Math.random());this.data=[];this.va=0;this.error=V;this.url=a.action;A(a.querySelectorAll('input:not([type="submit"]), textarea, select'),this.append.bind(this));this.append(b)}function uc(a){var b=a.H.a,c=o("de-qarea");h.G=b;if(h.D){if(e.ma(a).nextElementSibling===c){H(c);Ca();return}}else h.D=m,c.appendChild(o("de-pform")),H(o("de-togglereply")),!u&&!e.C&&!e.i&&(s(h.form.querySelector('#thr_id, input[name="parent"]')),
Z(h.form.firstChild,C('<input type="hidden" id="thr_id" value="'+b+'" name="'+(e.b||e.o?"resto":e.p?"thread":"parent")+'">')),ba&&(s(ba.querySelector('input[name="oek_parent"]')),Z(ba.firstChild,C('<input type="hidden" value="'+b+'" name="oek_parent">'))));K(e.ma(a),c);c.style.display="";u||(Ee(b),f.noThrdForm&&(o("de-parea").style.display="none"));h.j&&!h.X&&!e.C&&fb(b);e.m&&"Comment"===h.g.value&&(h.g.value="");Sa(h.g,">>"+a.a+(Na||"").replace(/(?:^|\n)(.)/gm,"\n> $1")+"\n");3===f.addPostForm&&
U(P("a",o("de-qarea-target")),{href:na(e.host,v,b),text:"#"+b})}function Ca(){if(h.D){var a=o("de-togglereply"),b=o("de-qarea");h.D=V;u||(Ee(0),s(o("thr_id")));H(a);b.style.display="none";K(o("de-parea"),b);K(a,o("de-pform"))}}function Ee(a){h.form.querySelector('#thr_id, input[name*="thread"]').value=a;ba&&(ba.querySelector('input[name="oek_parent"], input[name="replyto"]').value=a);e.fb&&(h.form.querySelector('input[name="quickreply"]').value=a||"")}function ge(a){var b=o("de-parea");x(a);h.D?(b.style.display=
"",Ca()):H(b);dc(b)}function Kf(a){/Reply|Ответ/.test(a.target.textContent)||((a.stopPropagation(),x(a),!u&&f.noThrdForm&&!h.D&&(o("de-parea").style.display=""),a=$(a.target).a,u&&1<f.addPostForm&&!h.D)?uc(F[a]):(e.m&&"Comment"===h.g.value&&(h.g.value=""),Sa(h.g,">>"+a)))}function rc(){if(h.g){var a=e.C||e.u||e.f||e.m||e.F,b={bold:[e.m?"**":a?"b":"**","B"],italic:[e.m?"*":a?"i":"*","i"],under:[a?"u":"__","U"],strike:[e.F?"-":a?"s":e.Y?"^^":"","S"],spoil:[e.F?"s":e.m?"%":a||
e.b?"spoiler":"%%","%"],code:[e.F?"c":e.f?"aa":e.m?"pre":a?"code":"`","C"],quote:[,"&gt;"]},c=function(d){var k=h.g,G=o("de-btn-"+d),B=b[d][1];G||(G=q("span",{id:"de-btn-"+d,title:Cd[d][j]},n),"&gt;"!==B?G.onclick=function(c){var d,f,B=k.selectionStart,G=k.selectionEnd,g=k.scrollTop,h=k.value.substring(B,G).split("\n"),j=h.length;d=b[this.id.substring(7)][0];x(c);a||e.b&&"spoiler"===d?(c="["+d+"]",d="[/"+d+"]"):c=d;for(;j--;){if(!c)for(f=h[j].trim().length;f--;)d+="^H";f=G+c.length+d.length;h[j].match(/^\s+/)&&
(c=h[j].match(/^\s+/)[0]+c);h[j].match(/\s+$/)&&(d+=h[j].match(/\s+$/)[0]);h[j]=c+h[j].trim()+d}k.value=k.value.substr(0,B)+h.join("\n")+k.value.substr(G);k.setSelectionRange(f,f);k.focus();k.scrollTop=g}:(G.onmouseover=function(){Na=ec()},G.onclick=function(a){var b=k.selectionStart,c=k.selectionEnd;x(a);Sa(k,"> "+(b===c?Na:k.value.substring(b,c)).replace(/\n/gm,"\n> "))}),o("de-txt-panel").appendChild(G));G.innerHTML=2===f.addTextBtns?("B"===B?"[ ":"")+'<a href="#">'+B+"</a>"+("&gt;"!==B?" / ":
" ]"):3===f.addTextBtns?'<input type="button" value="'+B+'" style="font-weight: bold;" />':"";return c};K(f.txtBtnsLoc?o("de-txt-resizer")||h.g:e.m?w("popup",h.form):h.fa,U(o("de-txt-panel")||q("span",{id:"de-txt-panel"},n),{lang:!f.addTextBtns?"en":!f.txtBtnsLoc?"ru":""}));c("bold")("italic");e.m||c("under")("strike");c("spoil")("code")("quote")}}function xc(a){var b,c=a.querySelector(e.ib),d='<span class="de-ppanel'+(a.k?"-op":"")+' de-ppanel-cnt" info="'+a.a+'"><span class="de-btn-hide" onclick="de_hideClick(this)" onmouseover="de_hideOver(this)" onmouseout="de_btnOut(event)"></span>'+
(h.Gb||ba?'<span class="de-btn-rep" onclick="de_qReplyClick(this)" onmouseover="de_qReplyOver(this)"></span>':"");a.k&&(b=e.host,u||(d+='<span class="de-btn-expthr" onclick="de_expandClick(this)" onmouseover="de_expandOver(this)" onmouseout="de_btnOut(event)"></span>'),E[b]&&E[b][v]&&E[b][v][a.a]?(d+='<span class="de-btn-fav-sel" onclick="de_favorClick(this)"></span>',E[b][v][a.a].Sa=a.H.M+1):d+='<span class="de-btn-fav" onclick="de_favorClick(this)"></span>');g.ba(c,d+(a.ea?'<span class="de-btn-sage" title="SAGE" onclick="de_sageClick(this)"></span>':
"")+"</span>");a.B=c.nextSibling;h.L&&f.insertNum&&((e.ha||e.K&&u)&&A(c.getElementsByTagName("a"),function(a){a.onclick=n}),e.z||(c.onclick=Kf))}function Lf(){gc('function de_removeSel() {\t\t\tvar el = document.getElementById("de-select");\t\t\tif(el) {\t\t\t\tel.parentNode.removeChild(el);\t\t\t}\t\t}\t\tfunction de_delSelection(e) {\t\t\tif(e.relatedTarget && !document.evaluate("ancestor-or-self::div[@id=\'de-select\']", e.relatedTarget, null, 3, null).booleanValue) {\t\t\t\tde_removeSel();\t\t\t}\t\t}\t\tfunction de_btnOut(e) {\t\t\tclearTimeout(e.target.de_overDelay);\t\t\tde_delSelection(e);\t\t}\t\tfunction de_btnOver(el, data) {\t\t\tel.de_overDelay = setTimeout(function(msg) {\t\t\t\twindow.postMessage(msg, "*");\t\t\t}, '+
f.linksOver+', data);\t\t}\t\tfunction de_hideOver(el) {\t\t\tde_btnOver(el, "A" + el.parentNode.getAttribute("info"));\t\t}\t\tfunction de_imgSOver(el) {\t\t\tde_btnOver(el, "L" + el.getAttribute("de-id"));\t\t}\t\tfunction de_expandOver(el) {\t\t\tde_btnOver(el, "B" + el.parentNode.getAttribute("info"));\t\t}\t\tfunction de_hideClick(el) {\t\t\twindow.postMessage("D" + el.parentNode.getAttribute("info"), "*");\t\t}\t\tfunction de_qReplyClick(el) {\t\t\twindow.postMessage("F" + el.parentNode.getAttribute("info"), "*");\t\t}\t\tfunction de_qReplyOver(el) {\t\t\twindow.postMessage("C" + el.parentNode.getAttribute("info"), "*");\t\t}\t\tfunction de_expandClick(el) {\t\t\twindow.postMessage("E" + el.parentNode.getAttribute("info"), "*");\t\t}\t\tfunction de_favorClick(el) {\t\t\twindow.postMessage("G" + el.parentNode.getAttribute("info"), "*");\t\t}\t\tfunction de_sageClick(el) {\t\t\twindow.postMessage("H" + el.parentNode.getAttribute("info"), "*");\t\t}\t\tfunction de_cImgSearch(e, name) {\t\t\te.preventDefault();\t\t\twindow.postMessage("_" + name + ";" + e.target.getAttribute("de-url"), "*");\t\t\tde_removeSel();\t\t}');
R(window,{message:function(a){var b=a.data.substring(1);switch(a.data[0]){case "A":zf(F[+b]);break;case "B":Bf(F[+b]);break;case "C":Na=ec();break;case "D":a=F[+b];La(a,!a.h);Xa();break;case "E":eb(F[+b],1,n);break;case "F":uc(F[+b]);break;case "G":a=F[+b];de(a,w("de-btn-fav",a)||w("de-btn-fav-sel",a));break;case "H":db("#sage");break;case "I":s(o("de-fav-wait"));o("de-iframe-fav").style.height=b+"px";break;case "J":a=b.split("$#$");"de-iframe-pform"===a[0]?ye(a[1],a[2]):ze(a[1]);o(a[0]).src="about:blank";
break;case "L":Cf(z.querySelector('.de-btn-src[de-id="'+b+'"]'))}}});g.V||gc('(function() {\t\t"use strict";\t\twindow.addEventListener("message", function(e) {\t\t\tvar id = e.data[0],\t\t\t\tdata = e.data.substring(1);\t\t\tif(id === "K") {\t\t\t\tvar mReqs = data === "all" ? 4 : 1, i = mReqs, rjw'+(f.findRarJPEG?'= []; while(i--) rjw.push(new Worker("'+window.URL.createObjectURL(g.ia(["self.onmessage = "+Mf],n))+'"));':";")+"preloadImages(data, mReqs, rjw);\t\t\t\treturn;\t\t\t}\t\t});\t\tvar $x = function(path, root) {\t\t\t\treturn document.evaluate(path, root, null, 8, null).singleNodeValue;\t\t\t},\t\t\ttoBlob = "+
(""+g.ia)+",\t\t\tgetPostImages = "+(""+Ga)+",\t\t\tgetPicWrap = "+(""+e.Xa)+";\t\tfunction preloadImages(pNum, mReqs, rjw) {\t\t\tvar len, el, cReq = 0, i = 0, arr = [],\t\t\t\tbwrk = mReqs === 4 ? [0, 0, 0, 0] : [0],\t\t\t\tloadFunc = function(idx) {\t\t\t\t\tif(idx >= arr.length) {\t\t\t\t\t\tif(cReq === 0) {\t\t\t\t\t\t\tmReqs = cReq = i = arr = loadFunc = null;\t\t\t\t\t\t}\t\t\t\t\t\treturn;\t\t\t\t\t}\t\t\t\t\tvar xhr, url, type, eImg = "+!!f.noImgSpoil+",\t\t\t\t\t\ta = arr[idx];\t\t\t\t\tif(!a || !(url = a.href)) {\t\t\t\t\t\tloadFunc(i++);\t\t\t\t\t\treturn;\t\t\t\t\t}\t\t\t\t\tif(/.gif$/i.test(url)) {\t\t\t\t\t\teImg |= "+
!!f.showGIFs+';\t\t\t\t\t\ttype = "image/gif";\t\t\t\t\t} else if(/.jpe?g$/i.test(url)) {\t\t\t\t\t\ttype = "image/jpeg";\t\t\t\t\t} else if(/.png$/i.test(url)) {\t\t\t\t\t\ttype = "image/png";\t\t\t\t\t} else {\t\t\t\t\t\tloadFunc(i++);\t\t\t\t\t\treturn;\t\t\t\t\t}\t\t\t\t\tif(cReq === mReqs) {\t\t\t\t\t\tsetTimeout(loadFunc, 500, idx);\t\t\t\t\t\treturn;\t\t\t\t\t}\t\t\t\t\tcReq++;\t\t\t\t\txhr = new XMLHttpRequest();\t\t\t\t\txhr.open("GET", url, true);\t\t\t\t\txhr.responseType = "arraybuffer";\t\t\t\t\txhr.onload = function() {\t\t\t\t\t\tif(this.status == 200) {\t\t\t\t\t\t\ta.download = url.substring(url.lastIndexOf("/") + 1);\t\t\t\t\t\t\tvar href = a.href = window.'+
(g.n?"webkit":"")+'URL.createObjectURL(toBlob([new Uint8Array(this.response)], type));\t\t\t\t\t\t\tif(eImg) {\t\t\t\t\t\t\t\ta.getElementsByTagName("img")[0].src = href;\t\t\t\t\t\t\t}'+(f.findRarJPEG?"parseRJ(a);":"")+"cReq--; loadFunc(i++); a = eImg = url = type = null;\t\t\t\t\t\t}\t\t\t\t\t};\t\t\t\t\txhr.send(null);\t\t\t\t}"+(f.findRarJPEG?",\t\t\t\tparseRJ = function(link) {\t\t\t\t\tvar wI = bwrk.indexOf(0), w;\t\t\t\t\tif(wI === -1) {\t\t\t\t\t\tsetTimeout(parseRJ, 500, link);\t\t\t\t\t\treturn;\t\t\t\t\t}\t\t\t\t\tw = rjw[wI];\t\t\t\t\tbwrk[wI] = 1;\t\t\t\t\tw.onmessage = function(e) {\t\t\t\t\t\tif(e.data) {\t\t\t\t\t\t\tgetPicWrap(link).querySelector('"+
e.gb+'\').className += " de-archive";\t\t\t\t\t\t}\t\t\t\t\t\tbwrk[wI] = 0;\t\t\t\t\t\tlink = wI = null;\t\t\t\t\t};\t\t\t\t\tw.onerror = function(e) {\t\t\t\t\t\tconsole.error("RARJPEG ERROR, line: " + e.lineno + " - " + e.message);\t\t\t\t\t\tbwrk[wI] = 0;\t\t\t\t\t\tlink = wI = null;\t\t\t\t\t};\t\t\t\t\tw.postMessage(link.href);\t\t\t\t};':";")+'el = getPostImages(pNum === "all" ? document : document.querySelector("[de-post=\'" + pNum + "\']"));\t\t\tfor(i = 0, len = el.length; i < len; i++) {\t\t\t\tarr.push($x("ancestor::a[1]", el[i]));\t\t\t}\t\t\tfor(i = 0; i < mReqs; i++) {\t\t\t\tloadFunc(i);\t\t\t}\t\t}})()')}
function qa(a,b,c,d,k){qa.Qa(a)?this.disabled=m:(this.kb=a.replace(/(?:[sihdny]\?){2,}/g,function(a){return"(?:"+a.replace(/\?/g,"")+")?"}).replace(/\-/g,"[^<]").replace(/\+/g,"[^0-9]").replace(/([sihdny]+)/g,"($1)").replace(/[sihdny]/g,"\\d").replace(/m|w/g,"([a-zA-Zа-яА-Я]+)"),this.pattern=a.replace(/[\?\-\+]+/g,"").replace(/([a-z])\1+/g,"$1"),this.wb=parseInt(b,10),this.qb=Dd[c],this.pb=Ed[c],this.ob=Fd[c],d&&k&&ic(d)===+k&&(this.Za=m,this.da=d.substring(1),this.ya=!!+d[0]))}
function Nf(a,b){GM_xmlhttpRequest({method:"GET",url:"https://www.youtube.com/watch?v="+a,onload:function(a){var d,k,e,f,g=[];d="%2C";var t="%26",h="%3D";if(k=a.responseText.match(/\"url_encoded_fmt_stream_map\":\s*\"([^\"]+)\"/)){k=k[1];k.contains(",")&&(d=",",t=k.contains("&")?"&":"\\u0026",h="=");a=0;d=k.split(d);for(k=d.length;a<k;a++)e=d[a].split(t),5>e.length||(f=e[0].split(h),2>f.length||(f=unescape(unescape(f[1])).replace(/\\\//g,"/").replace(/\\u0026/g,"&"),e=e[4].split(h),2>e.length||0===
f.toLowerCase().indexOf("http")&&(g[e[1]]=f)));b(g)}else b(V);b=n}})}function Fe(a,b,c){var d=' width="'+f.YTubeWidth+'" height="'+f.YTubeHeigh+'" />';a.innerHTML=1===f.YTubeType?'<iframe type="text/html" src="https://www.youtube.com/embed/'+b+(f.YTubeHD?"?hd=1&":"?")+"start="+c+'&html5=1" frameborder="0"'+d:'<embed type="application/x-shockwave-flash" src="https://www.youtube.com/v/'+b+(f.YTubeHD?"?hd=1&":"?")+"start="+c+'" wmode="transparent"'+d}function yc(a,b){var c=b[1],d=(b[2]?3600*b[2]:0)+
(b[3]?60*b[3]:0)+(b[4]?+b[4]:0);2!==f.YTubeType?Fe(a,c,d):Nf(c,function(b){(b=b?!f.YTubeHD?b[43]:b[45]||b[44]||b[43]:V)?(a.innerHTML='<video poster="https://i.ytimg.com/vi/'+c+'/0.jpg" controls="controls" preload="none" src="'+b+(g.c&&14>g.c?"&"+Math.random():"")+'" width="'+f.YTubeWidth+'" height="'+f.YTubeHeigh+'"></video>',0!==d&&(a.firstChild.Rb=function(){this.currentTime=d;d=n})):Fe(a,c,d)})}function zc(a,b){a.innerHTML='<a href="https://www.youtube.com/watch?v='+b[1]+'" target="_blank"><img src="https://i.ytimg.com/vi/'+
b[1]+'/0.jpg" width="360" height="270" /></a>';3===f.addYouTube&&(a.firstChild.onclick=function(a){x(a);yc(this.parentNode,b)})}function gb(){return/^https?:\/\/(?:www\.)?youtu(?:be\.com\/(?:watch\?.*?v=|v\/|embed\/)|\.be\/)([^&#?]+).*?(?:t(?:ime)?=(?:(\d+)h)?(?:(\d+)m)?(?:(\d+)s)?)?$/}function Ge(a){var b=this.href.match(gb()),c=w("de-ytube-obj",$(this));x(a);ea('*[contains(@src,"'+b[1]+'")]|video[contains(@poster,"'+b[1]+'")]',c)?c.innerHTML="":2<f.addYouTube&&!ea('a[contains(@href,"'+b[1]+'")]',
c)?zc(c,b):yc(c,b)}function Cb(a){f.addYouTube&&(A((a||z).querySelectorAll("embed"),function(b){var c,d;if(d=b.src.match(gb())){c="https://www.youtube.com/watch?v="+d[1];if(d[4]||d[3]||d[2])c+="#t="+(d[2]?d[2]+"h":"")+(d[3]?d[3]+"m":"")+(d[4]?d[4]+"s":"");d=a||$(b);(d.l||d.querySelector(e.A)).appendChild(C('<p class="de-ytube-ext"><a href="'+c+'">'+c+"</a></p>"));s(b.parentNode)}}),A((a||z).querySelectorAll('a[href*="youtu"]'),function(b){var c,d,k,G,B=b.href.match(gb());B&&(b.href=b.href.replace(/^http:/,
"https:"),c=a||$(b),w("de-ytube-obj",c)||(d=q("div",{"class":"de-ytube-obj"},n),2<f.addYouTube?zc(d,B):2===f.addYouTube&&yc(d,B),k=c.l||c.querySelector(e.A),e.f?(k=k.parentNode,G=k.previousElementSibling,Z(G.hasAttribute("style")?G:k,d)):Z(k,d)),b.className="de-ytube-link",b.onclick=Ge,g.d&&12>g.d||!f.YTubeTitles?b.textContent=b.textContent.replace(/^http:/,"https:"):GM_xmlhttpRequest({method:"GET",url:"https://gdata.youtube.com/feeds/api/videos/"+B[1]+"?alt=json&fields=title/text(),media:group/media:keywords",
onload:function(a){try{var d=JSON.parse(a.responseText).entry.title.$t;b.textContent=d;if(f.hideBySpell)for(var e,a=0;e=S.I[a];a++)if(xa(e).test(d)){hb(c,"#video "+e);c.Ma=m;clearTimeout(He);He=setTimeout(Ja,500);return}b=c=n}catch(k){}}}))}))}function Ie(){f.YTubeTitles&&A(z.querySelectorAll('a[href*="youtu"]'),function(a){for(var b,c=0,d=a.textContent;b=S.I[c++];)if(xa(b).test(d)){a=$(a);hb(a,"#video "+b);a.Ma=m;break}})}function Db(a){f.addMP3&&A((a||z).querySelectorAll('a[href*=".mp3"]'),function(b){if("_blank"===
b.target||"nofollow"===b.rel){var c=a||$(b),d=w("de-mp3",c);d||(d=q("div",{"class":"de-mp3"},n),Z(c.l||c.querySelector(e.A),d));ea('.//object[contains(@FlashVars,"'+b.href+'")]',d)||(d.innerHTML+='<object data="//junglebook2007.narod.ru/audio/player.swf" type="application/x-shockwave-flash" wmode="transparent" width="220" height="16" FlashVars="playerID=1&amp;bg=0x808080&amp;leftbg=0xB3B3B3&amp;lefticon=0x000000&amp;rightbg=0x808080&amp;rightbghover=0x999999&amp;rightcon=0x000000&amp;righticonhover=0xffffff&amp;text=0xffffff&amp;slider=0x222222&amp;track=0xf5f5dc&amp;border=0x666666&amp;loader=0x7fc7ff&amp;loop=yes&amp;autostart=no&amp;soundFile='+
b.href+'" /><br>')}})}function Of(a){function b(){bc(l.body,{mousemove:c,mouseup:b})}function c(b){a.style.left=b.clientX-a.tb+"px";a.style.top=b.clientY-a.ub+"px";a.ab=m}a.onmousedown=function(d){x(d);a.tb=d.clientX-parseInt(a.style.left,10);a.ub=d.clientY-parseInt(a.style.top,10);R(l.body,{mousemove:c,mouseup:b})}}function Pf(a){var b=a.clientX,c=a.clientY,d=parseInt(this.style.left,10),e=parseInt(this.style.top,10),f=parseFloat(this.style.width||this.width),B=parseFloat(this.style.height||this.height),
h=g.c?-a.detail:a.wheelDelta,t=f*(0<h?1.25:0.8),h=B*(0<h?1.25:0.8);x(a);this.style.width=t+"px";this.style.height=h+"px";this.style.left=parseInt(b-t/f*(b-d),10)+"px";this.style.top=parseInt(c-h/B*(c-e),10)+"px"}function Je(a,b,c){var d="",e="",G=+b[0],b=+b[1],B=l.body.clientWidth,h=window.innerHeight,t=w("de-img-full",a);if(!(t&&c||!t&&c===V))if(1===f.expandImgs&&!ea('img[contains(@style,"fixed")]',a)&&H(P("img",a)),t)t.ab?t.ab=V:(H(t),setTimeout(s,0,t));else if(1===f.expandImgs?B-=ma(a).left+25:
s(w("de-img-center",l)),G&&b&&(d=G<B?G:B,e=d*b/G,2===f.expandImgs&&e>h&&(e=h,d=e*G/b)),t=a.appendChild(C('<img class="de-img-full" src="'+a.href+'" alt="'+a.href+'" width="'+d+'" height="'+e+'"/>')),2===f.expandImgs)g.r(t,"de-img-center"),t.style.cssText="left: "+(B-d)/2+"px; top: "+(h-e)/2+"px;",t.addEventListener(g.c?"DOMMouseScroll":"mousewheel",Pf,V),Of(t)}function Ke(a){a.onclick=function(a){f.expandImgs&&1!==a.button&&(x(a),Je(this,this.firstChild.title.split("x"),n))}}function Eb(a){if(f.addImgs)for(var b,
c=0,d=a.querySelectorAll(e.A+' a[href*=".jpg"], '+e.A+' a[href*=".png"], '+e.A+' a[href*=".gif"]'),k=d.length;c<k;c++){b=d[c];if("SMALL"===b.parentNode.tagName)break;a=b.cloneNode(V);a.target="_blank";H(a);a.appendChild(q("img",{"class":"de-img-pre",src:a.href,alt:a.href},{load:function(){var a,b;H(this.parentNode);a=this.width;b=this.height;this.title=a+"x"+b;200>=a&&200>=b||(a/=b,this.width=1>a?200*a:200,this.height=1>a?200:200/a)}}));Ke(a);Z(b,a)}}function Fb(a){if(f.imgSrcBtns)for(var b=a.a||
"",a=a.querySelectorAll(e.gb),c=a.length-1,d;0<=c;c--)d=a[c],/google\.|tineye\.com|iqdb\.org/.test(d.href)?s(d):d.firstElementChild||g.$a(d,'<span de-id="'+b+c+'" class="de-btn-src" onmouseover="de_imgSOver(this)" onmouseout="de_btnOut(event)"></span>')}function Le(a,b){/\.jpe?g|\.png|.\gif|^blob:/i.test(a.href)&&Je(a,hc(e.Xa(a)),b)}function oc(a,b){A(a.s,function(a){Le(T("ancestor::a[1]",a),b)})}function Gb(a){A(a.s,function(a){var c=T("ancestor::a[1]",a);c&&(a.onclick=n,e.Ua&&(a.parentNode.onclick=
n),c.onclick=function(a){if(a.button!==1){x(a);Le(this,n)}})})}function Mf(a){var b,c,d;b=new XMLHttpRequest;b.open("GET",a.data,V);b.responseType="arraybuffer";b.send();a=new Uint8Array(b.response);d=a.length;if(255===a[0]&&216===a[1])for(c=b=0;b<d-1;b++){if(255===a[b])if(216===a[b+1])c++;else if(217===a[b+1]&&0===--c){b+=2;break}}else if(137===a[0]&&80===a[1])for(b=0;b<d-7;b++){if(73===a[b]&&69===a[b+1]&&78===a[b+2]&&68===a[b+3]){b+=8;break}}else{self.postMessage(V,n);return}if(b!==d&&60<d-b)for(d=
b+50;b<d;b++)if(55===a[b]&&122===a[b+1]||80===a[b]&&75===a[b+1]||82===a[b]&&97===a[b+1]){self.postMessage(m,n);return}self.postMessage(V,n)}function Me(a){var b='<div class="de-refmap">'+a.w.join(", ").replace(/(\d+)/g,'<a href="#$1">&gt;&gt;$1</a>')+"</div>";try{g.ba(a.l,b)}catch(c){a.appendChild(C(b))}}function Ac(a){var b=[];g.forEach(a,function(c){for(var d,e,f=this[c].l.getElementsByTagName("a"),g=f.length-1;0<=g;g--)if((d=f[g].textContent.match(/^>>(\d+)$/))&&(e=a[d[1]]))e.w?-1===e.w.indexOf(c)&&
e.w.push(c):(e.w=[c],b.push(e))});b.forEach(Me);b=a=n}function Hb(a){if(a){a.parent?a.parent.U=n:ua=n;do{clearTimeout(a.Ib);var b=a;f.animation?(g.S(b,s),g.r(b,"de-pview-anim"),b.style[g.$]="de-post-close-"+(b.Oa?"t":"b")+(b.Na?"l":"r")):s(b)}while(a=a.U)}}function cb(a,b){a&&(clearTimeout(nb),nb=setTimeout(Hb,f.linksOut,b?a:a.U))}function Bc(){this.style[g.$]&&(g.Q(this,"de-pview-anim"),this.style.cssText=this.qa,this.qa=V,A(W("de-css-move",l.head),s),this.removeEventListener(g.Z,Bc,V))}function Ne(a,
b,c){if(b.link!==a){b.link=a;var d,e;d=a.getBoundingClientRect();e=d.left+window.pageXOffset+a.offsetWidth/2;var h=d.top+window.pageYOffset,B=l.body.clientWidth,j=e<B/2,B=(j?B-e:e)-10,t="max-width:"+B+"px; left:"+(j?e:e-Math.min(parseInt(b.offsetWidth,10),B))+"px;";c?(B=b.style.cssText,b.style.cssText="opacity: 0; "+t):b.style.cssText=t;e=b.offsetHeight;d=e+d.top+a.offsetHeight<window.innerHeight||5>d.top-e;e=(d?h+a.offsetHeight:h-e)+"px";b.Na=j;b.Oa=d;!f.animation||!c?b.style.top=e:(a="de-movecss-"+
Math.round(1E3*Math.random()),l.head.appendChild(q("style",{"class":"de-css-move",type:"text/css",text:"@"+g.Ta+"keyframes "+a+" {to { "+t+" top:"+e+"; }}"},n)),b.qa?(b.style.cssText=b.qa,b.removeEventListener(g.Z,Bc,V)):b.style.cssText=B,b.qa=t+" top:"+e+";",b.addEventListener(g.Z,Bc,V),g.r(b,"de-pview-anim"),b.style[g.$]=a)}}function Oe(a,b){(w("de-pview-link",a)||{}).className="";(T('.//a[starts-with(text(),">>") and contains(text(),"'+b+'")]',a)||{}).className="de-pview-link"}function Ib(a,b,
c,d,k){clearTimeout(nb);var h;if(a){if(k=(h=a.ownerDocument===l)?a.cloneNode(m):Jb(a),k.setAttribute("de-post",n),k.className=e.v+" de-pview"+(a.La?" de-viewed":""),k.style.display="",e.R&&(k.firstElementChild.style.cssText="max-width: 100%; margin: 0;",s(w("doubledash",k))),k.a=b,A(k.querySelectorAll(".de-img-full, .de-ppanel, .de-ppanel-op"),s),h?(f.addYouTube&&(A(W("de-ytube-link",k),function(a){a.onclick=Ge}),3===f.addYouTube&&A(W("de-ytube-obj",k),function(a){zc(a,a.firstChild.href.match(gb()))})),
f.addImgs&&A(W("de-img-pre",k),function(a){Ke(a.parentNode)}),f.imgSrcBtns&&A(W("de-btn-src",k),function(a){a.setAttribute("de-id","pv"+a.getAttribute("de-id"))})):(Db(k),Cb(k),Eb(k),Fb(k)),A(k.s=Ga(k),function(a){a.style.display=""}),f.expandImgs&&Gb(k),2===f.linksNavig&&Oe(k,c.a),ib(k),f.markViewed)k.Ib=setTimeout(function(a,b){if(!a.La){g.r(a,"de-viewed");a.La=m}var c=(sessionStorage["de-viewed"]||"").split(",");c.push(b);sessionStorage["de-viewed"]=c},2E3,a,b)}else k||(Pb[b]=m),k=C('<div class="'+
e.v+' de-pview-info de-pview">'+(k||ac[j])+"</div>");z.appendChild(k);Ne(d,k,V);k.onmouseover=function(){cb(this,V)};k.onmouseout=function(){cb(ua,m)};k.eb=m;ua&&c.eb?(Hb(c.U),k.parent=c,c.U=k):(Hb(ua),ua=k);f.animation&&(g.S(k,function(a){g.Q(a,"de-pview-anim");a.style[g.$]=""}),g.r(k,"de-pview-anim"),k.style[g.$]="de-post-open-"+(k.Oa?"t":"b")+(k.Na?"l":"r"));return k}function Pe(a,b,c){if(!va[a])return n;var d=va[a][b];if(a===v||!d||d.nb)return d;b=ub(a)+Cc+c+(e.Ia?".html":wb);a=d.getElementsByTagName("a");
for(c=a.length-1;0<=c;c--)/^>>\d+$/.test(a[c].textContent)&&(a[c].href=b);d.nb=m;return d}function Qf(a){var b=a.pathname.match(/^\/?(.*?)\/?(?:res|thread-|index|\d+|$)/)[1],c=(a.pathname.match(/[^\/]+\/[^\d]*(\d+)/)||[,0])[1],d=(a.textContent.match(/\d+$/)||[c])[0],k=F[d]||Pe(b,d,c),g=$(a),h=g.eb?g.U:ua;if(!f.noNavigHidd||!k||!k.h)Pb[d]?Ib(n,d,g,a,ac[j]):h&&h.a===d?(cb(h,V),Hb(h.U),Ne(a,h,m),Oe(h,g.a)):k?Ib(k,d,g,a,n):(h=Ib(n,d,g,a,'<span class="de-wait">'+wa[j]+"</span>"),va[b]=[],ra(n,b,c,m,function(k,
f,j){if(!j){var l=0,o=k.length;f.k=m;f.l=f.querySelector(e.A);for(va[b][c]=f;l<o;l++)f=k[l],f.l=f.querySelector(e.A),va[b][e.aa(f)]=f;Ac(va[b]);h&&h.parentNode&&Ib(Pe(b,d,c),d,g,a,j)}b=d=c=g=h=n}))}function Rf(){2<this.textContent.length&&(this.Eb=setTimeout(Qf,f.linksOver,this))}function Sf(){clearTimeout(this.Eb);cb(ua,m)}function ib(a){if(f.linksNavig)for(var b=l.evaluate('.//a[starts-with(text(),">>")]',a,n,4,n);a=b.iterateNext();)a.onmouseover=Rf,a.onmouseout=Sf}function ra(a,b,c,d,k){GM_xmlhttpRequest({method:"GET",
url:g.xa(a||ub(b)+Cc+c+(e.Ia?".html":wb)),onreadystatechange:function(a){if(4===a.readyState){if(200===a.status){var b=g.lb(a.responseText);!h.L&&ba&&(h=Qe(l.importNode(b.querySelector(e.hb),m)),Z(ba,h.form));d?Re(b.querySelector(e.ca),b,function(a){k(e.za(a),e.Wa(a,b),n)}):k(n,b,n)}else k(n,n,0===a.status?la[j]:"HTTP ["+a.status+"] "+a.statusText);k=d=b=n}}})}function Se(a,b){GM_xmlhttpRequest({method:"GET",url:g.xa(a),onreadystatechange:function(a){if(4===a.readyState)if(304===a.status)sa(o("de-alert-newposts"));
else{try{b(a.status,a.statusText,JSON.parse(a.responseText))}catch(d){b(1,d.toString(),n)}b=n}}})}function Jb(a){return Dc(l.importNode(a,m))}function Te(a){f.expandImgs&&Gb(a);a.h||Ue(a);var b,c,d=[];c=a.l.getElementsByTagName("a");for(var e=c.length-1;0<=e;e--)(b=c[e].textContent.match(/^>>(\d+)$/))&&-1===d.indexOf(b=b[1])&&d.push(b);b=a.a;for(e=d.length-1;0<=e;e--)if(c=F[d[e]])c.w?-1===c.w.indexOf(b)&&c.w.push(b):c.w=[b],s(w("de-refmap",c)),Me(c),ib(w("de-refmap",c)),f.hideRefPsts&&c.h&&hb(a,"reference to >>"+
d[e]);ib(a);Db(a);Cb(a);Eb(a);Za&&oc(a,n)}function Kb(a,b,c,d){var k;Ec(b,c,a,d);xc(b);f.expandPosts&&!u&&Fc(b);Te(b);Fb(b);jb&&0!==d?(d=jb.cloneNode(m),(k=e.za(d)[0])?k.parentNode.replaceChild(b,k):d=b):d=b;a.appendChild(d);f.preLoadImgs&&window.postMessage("K"+c,"*");e.p&&a.appendChild(l.createElement("br"));return+!b.h}function Ve(a){e.N&&(a.innerHTML=Gc(a.innerHTML),a.s=Ga(a));A(a.querySelectorAll(".de-ytube-obj"),s);Te(a)}function We(a,b){function c(b,c){if(d.a===c){s(a);var f=d.l.querySelector(".de-ytube-ext");
d.l.parentNode.replaceChild(l.importNode(b.querySelector(e.A),m),d.l);d.l=d.querySelector(e.A);f&&d.l.appendChild(f);Ve(d);a=d=n;throw n;}}var d=$(a);e.i?(s(a.nextSibling),s(a.previousSibling),s(a),d.l.replaceChild(d.querySelector(".alternate > div"),d.l.firstElementChild),b&&Ve(d)):ra(n,v,d.H.a,m,function(b,f,g){if(!g)try{c(f,e.Aa(f)),A(b,function(a){c(a,e.aa(a))})}catch(h){}a=d=n})}function Fc(a){if(!a.h&&(a=a.querySelector(e.f?'p[id^="post_truncated"]':e.i?".abbrev > span":".abbrev, .abbr, .omittedposts, .shortened"))&&
/long|full comment|gek\u00fcrzt|слишком|длинн|мног|полная версия/i.test(a.textContent))1===f.expandPosts?We(a,V):P("a",a).onclick=function(a){x(a);We(this,m)}}function eb(a,b,c){c||I(wa[j],"load-thr",m);ra(n,v,a.a,m,function(d,k,f){var h,l,t=a.H,p=d.length;if(f)I(f,"load-thr",V);else{Ca();s(o("de-select"));l=t.Nb||t.M-Vd(t)+1;t.innerHTML="";(f=Jb(k)).k=m;Kb(t,
f,e.Aa(k),0);f.ga=(w(e.Pa,f)||{}).textContent||ya(f).substring(0,70).replace(/\s+/g," ");ga[ga.indexOf(a)]=f;g.ba(f.B,'<span>&nbsp;[<a href="'+na(e.host,v,f.a)+'">'+Gd[j]+"</a>]</span>");1===b||b>=p?k=0:(k=p-b,t.Nb=b+1,t.appendChild(q("div",{"class":"de-omitted",text:Hd[j]+k},n)));for(h=[f];k<p;k++)Kb(t,f=Jb(d[k]),e.aa(d[k]),k+1),h.push(f);if(5<b||1===b)t.appendChild(C('<span>[<a href="#">'+Id[j]+"</a>]</span>")).onclick=function(b){x(b);eb(a,5,n);a=n};Fa.splice.apply(y,[y.indexOf(a),l].concat(h));
t.M=p+1;sa(o("de-alert-load-thr"))}dc(a);c&&c();b=c=n})}function yf(){var a=this.parentNode.parentNode,b=P("iframe",a),c=a.getAttribute("info").split(";")[2],d=w("de-content",l);s(o("de-fav-wait"));b?(s(b),d.style.overflowY="auto"):(c=F[c])&&!c.h?dc(c):(s(o("de-iframe-fav")),w("de-content",l).style.overflowY="scroll",fa(a,[C('<iframe name="de-iframe-fav" id="de-iframe-fav" src="'+P("a",a).href+'" scrolling="no" style="border: none; width: '+(l.body.clientWidth-55)+'px; height: 1px;" />'),C('<div id="de-fav-wait" class="de-wait" style="font-size: 1.1em; text-align: center">'+
wa[j]+"</div>")]))}function pe(a,b,c){ra(vb(e.host,v,b),n,n,V,function(d,k){for(var f,d=l.importNode(k.querySelector(e.ca),m);f=d.firstChild;)a.appendChild(f);c(Dc(a),b);c=a=b=n})}function re(a){I(wa[j],"load-pages",m);f.preLoadImgs&&A(z.querySelectorAll('a[href^="blob:"]'),function(a){window.URL.revokeObjectURL(a.href)});var b=-1,c=z,d=Array(a),e=1;z.innerHTML="";y=[];for(va={};++b<a;)1<a&&(c=q("div",{id:"de-page"+b},n),fa(z,[q("center",{text:b+" "+Zb[j],style:"font-size: 2em;"},n),l.createElement("hr"),
c])),pe(c,b,function(b,c){d[c]=b;if(e===a){d.forEach(function(a){Xe(a);Ye(a)});y.forEach(xc);y.forEach(Gb);y.forEach(Fc);Db(n);Cb(n);Eb(z);Fb(z);Ac(F);ib(z);ae();Ze();Za&&y.forEach(function(a){oc(a,n)});sa(o("de-alert-load-pages"));window.postMessage("Kall","*");e=d=n}else e++})}function Hc(a){u&&3!==f.updThread&&(l.querySelector('a[id^="de-btn-upd"]').id="de-btn-upd-"+a)}function he(){Hc("off");clearInterval($a);$a=i}function je(){Ra||(Ra=q("audio",{preload:"auto",src:"https://raw.github.com/SthephanShinkufag/Dollchan-Extension-Tools/master/signal.ogg"},
n));Qa=!Qa}function $e(){ka?lb=V:(Ra.play(),setTimeout($e,Pa),lb=m)}function Tf(a){if(0===window.webkitNotifications.checkPermission()){var b=window.webkitNotifications.createNotification("/favicon.ico",Oa,Jd[j].replace(/%m/g,a));b.ondisplay=function(){setTimeout(function(){b.cancel();b=n},8E3)};b.onclick=function(){window.focus&&window.focus();this.cancel()};b.show()}}function ta(a,b){if(a)a!==la[j]?(I(Kd[j]+u+"): \n"+a,"newposts",V),l.title="{"+a.match(/(?:\[)(\d+)(?:\])/)[1]+"} "+l.title,he()):
(I(la[j],"newposts",V),Hc("warn"));else if(sa(o("de-alert-newposts")),3!==f.updThread){Hc("on");if(1===f.updThread){if(ka)return;b+=+(l.title.match(/^\[(\d+)\]/)||[,0])[1]}f.favIcoBlink&&Aa&&(clearInterval(mb),0<b&&(mb=setInterval(function(){var a=ea('.//link[@href="'+Aa+'"]',l.head)?"data:image/x-icon;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQEAYAAABPYyMiAAAABmJLR0T///////8JWPfcAAAACXBIWXMAAABIAAAASABGyWs+AAAAF0lEQVRIx2NgGAWjYBSMglEwCkbBSAcACBAAAeaR9cIAAAAASUVORK5CYII=":Aa;A(l.head.querySelectorAll('link[rel="shortcut icon"]'),
s);l.head.appendChild(q("link",{href:a,rel:"shortcut icon"},n))},800)));l.title=(0<b?" ["+b+"] ":"")+Oa;g.n&&f.desktNotif&&0<b&&Tf(b);Qa&&!lb&&0<b&&(Pa?$e():Ra.play())}}function Uf(){R(l.querySelector('input[type="button"]'),{click:function(){Xd("de-rating",o("rating").value,1E12)}})}function Vf(a,b){var c,d=a.src,e=a.thumb,f=a.thumb_width,g=a.thumb_height,h=a.size,j=a.rating;a:{for(var o=l.cookie.split("; "),p=o.length;p--;)if(c=o[p].split("="),c[0]===escape("de-rating")){c=unescape(c[1]);break a}c=
V}o=c||"r-15";"b"===v||"rf"===v?c=e.substring(e.lastIndexOf("/")+1):(c=d.substring(d.lastIndexOf("/")+1),17<c.length&&(c=c.substring(0,17)+"..."));e="r-18g"===j&&"r-18g"!==o?"images/r-18g.png":"r-18"===j&&("r-18g"!==o||"r-18"!==o)?"images/r-18.png":"r-15"===j&&"sfw"===o?"images/r-15.png":"illegal"===j?"images/illegal.png":a.thumb;e!==a.thumb&&(g=f=200);return C('<div class="file"><div class="fileinfo">Файл: <a href="/'+d+'" target="_blank">'+c+"</a><br /><em>"+a.thumb.substring(a.thumb.lastIndexOf(".")+
1)+", "+(1024>h?h+" B":1048576>h?(h/1024).toFixed(2)+" KB":1073741824>h?(h/1048576).toFixed(2)+" MB":(h/1073741824).toFixed(2)+" GB")+", "+a.metadata.width+"x"+a.metadata.height+'</em><br /><a class="edit_ icon" href="/utils/image/edit/'+a.file_id+"/"+b+'"><img title="edit" alt="edit" src="/images/blank.png" /></a></div><a href="/'+d+'" target="_blank"><img class="thumb" src="/'+e+'" width="'+f+'" height="'+g+'" /></a></div>')}function af(a,b){if(e.Fa&&!a.Cb){var c=b.querySelector(e.Fa);c&&(a.querySelector(e.Fa)||
a.l.appendChild(l.importNode(c,m)),a.Cb=m)}}function bf(a){if(!a.vb){var b=sessionStorage["de-deleted"];sessionStorage["de-deleted"]=(b?b+",":"")+a.count;a.vb=m;g.Q(a.B,"de-ppanel-cnt");g.r(a.B,"de-ppanel-del")}}function Bb(a,b){a&&I(wa[j],"newposts",m);e.i?Se("//dobrochan.ru/api/thread/"+v+"/"+u+"/new.json?message_html&new_format&last_post="+y[y.length-1].a,function(a,d,k){if(200!==a||k.error)ta(0===a?la[j]:d||k.message,n);else{var f,a=0,h=(k.result||{}).posts,g=w("de-thread",z);if(h&&0<h.length){k=
0;for(d=h.length;k<d;k++){f=h[k];var t=i,t=f.display_id,l=f.files,o=l.length,p=q("td",{id:"reply"+t,"class":"reply","de-post":t},n);p.innerHTML='<a name="i'+t+'"></a><label><a class="delete icon"><input type="checkbox" id="delbox_'+t+'" class="delete_checkbox" value="'+f.post_id+'" id="'+t+'" /></a><span class="postername">'+f.name+"</span> "+e.zb.Va(f.date)+' </label><span class="reflink"><a onclick="Highlight(0, '+t+')" href="/'+v+"/res/"+u+".xhtml#i"+t+'">No.'+t+"</a></span><br />";for(t=0;t<o;t++)p.appendChild(Vf(l[t],
f.post_id));fa(p,[D(1<o,q("div",{style:"clear: both;"},n)),C('<div class="postbody">'+f.message_html+"</div>"),q("div",{"class":"abbrev"},n)]);f=Dc(p);a+=Kb(g,f,h[k].display_id,g.M+k);y.push(f)}g.M+=h.length}ta(n,a)}b&&b();b=n}):ra(n,v,u,m,function(a,d,k){if(k)ta(k,n);else{var f,h,g,j,l=0,p=y.length,q=a.length,u=w("de-thread",z);af(y[0],d);d=1;for(f=0;d<p||f<q;d++,f++)h=y[d],(g=a[f])?(j=e.aa(g),h?h.a!==j?(bf(h),f--):af(h,g):(l+=Kb(u,h=Jb(g),j,d),y.push(h))):bf(h);ta(k,l);u.M=p;Ja();o("de-panel-info").firstChild.textContent=
d+"/"+Ga(z).length}b&&b();b=n})}function ie(){1===f.updThread?$a=setInterval(function(){Bb(V,n)},1E3*f.updThrDelay):2===f.updThread&&($a=setInterval(function(){e.i?Se("//dobrochan.ru/api/thread/"+v+"/"+u+".json?new_format",function(a,b,c){200!==a||c.error?ta(0===a?la[j]:b||c.message,n):ta(n,c.result.posts_count-y.length)}):ra(n,v,u,m,function(a,b,c){ta(c,a.length-y.length+1)})},1E3*f.updThrDelay))}function cf(a){f.hideRefPsts&&a.w&&(a.w.forEach(function(b){var c=F[b];c&&!O[b]&&Lb(c,"reference to >>"+
a.a)}),a=n)}function Ic(a){f.hideRefPsts&&a.w&&a.w.forEach(function(a){var c=F[a];c&&!O[a]&&(0!==Y[c.count]&&kb(c,V,n),Ic(c))})}function Ue(a){if(!f.filterThrds&&a.k)Y[a.count]=1;else{var b=Jc(ya(a))||f.hideBySpell&&Mb(a);b?(Y[a.count]=0,Lb(a,b)):Y[a.count]=1}}function Ze(){for(var a,b,c,d=y.length-1;0<=d;d--)c=Y[d],a=y[d],O[b=a.a]?(a.k&&!(J[v]&&J[v][b]!==i)?(delete O[b],N("DESU_Posts_"+e.e+"_"+v,JSON.stringify(O))):0===O[b][0]?La(a,m):a.B.firstChild.className="de-btn-lock",c===i&&(Y[d]=Jc(ya(a))||
f.hideBySpell&&Mb(a)?0:1)):(a.k&&(J[v]&&J[v][b]!==i?Y[d]=c="0":"0"===c&&(c=n)),"0"===c?Lb(a,n):"1"!==c&&Ue(a))}function bb(a,b){b?g.r(a,"de-post-hid"):g.Q(a,"de-post-hid")}function Kc(a,b){b&&a.B.appendChild(q("a",{"class":"de-post-note de-abtn",text:" autohide: "+b+" ",href:"#"},{click:function(a){x(a);s(this)}}))}function kb(a,b,c){var d,k,h=a.H;bb(a,a.h=b);if(a.k){if(h.style.display=b?"none":"",h.h=b,d=o("de-thr-hid-"+(k=a.a)),!b&&d&&(s(d),ce(a,1)),b&&!d)d=C('<div class="'+e.v+' de-thr-hid" id="de-thr-hid-'+
k+'">'+Ld[j]+' <a href="#">№'+k+"</a><i> ("+(c?"autohide: "+c:a.ga.replace(/</g,"&lt;").replace(/>/g,"&gt;"))+")</i></div>"),P("a",d).onclick=function(b){x(b);La(a,!a.h);Xa()},Z(h,d),ce(a,0)}else f.delHiddPost?e.ma(a).style.display=b?"none":"":((d=w("de-post-note",a))?b?c&&(d.innerText=" autohide: "+c+" "):s(d):b&&Kc(a,c),d=a.querySelector(e.ib),d.onmouseover=b&&function(){bb($(this),V)},d.onmouseout=b&&function(){bb($(this),m)}),f.strikeHidd&&setTimeout(A,0,z.querySelectorAll('a[href*="#'+a.a+
'"]'),function(a){a.className=b&&"de-ref-hid"})}function Lb(a,b){kb(a,m,b);cf(a)}function hb(a,b){!a.Da&&!O[a.a]&&(a.h?(s(w("de-post-note",a)),Kc(a,b)):(Y[a.count]=0,Lb(a,b)))}function Lc(a){if(!O[a.a]){var b=Jc(ya(a));b?hb(a,b):(Y[a.count]=1,kb(a,V,n),Ic(a),s(w("de-post-note",a)))}}function La(a,b){var c=a.a;kb(a,b,n);a.B.firstChild.className="de-btn-lock";b?cf(a):Ic(a);O[c]||(O[c]=Array(2));O[c][0]=+!b;O[c][1]=Date.now()}function df(a){return a.replace(/\s+/g," ").replace(/[^a-zа-яё ]/ig,
"").substring(0,800).split(" ")}function Af(a){var b,c,d,e=ya(a);e?(b=df(e),d=a.a,c=a.h,y.forEach(function(a){var e=d,k=c,f=b,h,g=df(ya(a)),j=g.length,l=f.length,o=l,p=l,q=0;if(!(j<0.4*o||j>3*o)){for(;l--;)if(6<o&&3>f[l].length)p--;else for(h=j;h--;)(g[h]===f[l]||f[l].match(/>>\d+/)&&g[h].match(/>>\d+/))&&q++;q<0.4*p||j>3*p||(s(w("de-post-note",a)),k?(0!==Y[a.count]&&kb(a,V,n),O[l=a.a]&&delete O[l]):(La(a,m),Kc(a,"similar to >>"+e)))}}),Xa()):db("#notxt");c=d=b=n}function qe(a){var b,c,d=a.s[0];if(d.hash)return d.hash;
c=o("de-canvas")||l.body.appendChild(q("canvas",{id:"de-canvas",style:"display: none;"},n));a=c.width=d.width;b=c.height=d.height;c=c.getContext("2d");c.drawImage(d,0,0);c=c.getImageData(0,0,a,b).data;var e,f,h,g,j,p;j=a*b;var u=256/3,r=0;for(f=e=0;e<j;e++,f+=4)c[e]=0.3*c[f]+0.59*c[f+1]+0.11*c[f+2];for(e=0;8>e;e++)for(f=0;8>f;f++){j=e/7*(b-1);h=Math.min(j|0,b-2);p=j-h;j=f/7*(a-1);g=Math.min(j|0,a-2);j-=g;r=(r<<4)+Math.min(128*((c[h*a+g]*(1-j)*(1-p)+c[h*a+g+1]*j*(1-p)+c[(h+1)*a+g+1]*j*p+c[(h+1)*a+
g]*(1-j)*p)/u|0),255);if(h=r&4026531840)r^=h>>>24;r&=~h}return d.hash=r}function ef(){return{ta:[],exp:[],wa:[],Ba:[],s:[],Ca:[],name:[],sa:[],Ja:[],ea:V,cb:V,bb:V,Ka:V}}function Yd(){var a,b,c,d,e;Nb=ef();Mc=ef();S={N:[],Ha:[],a:[],Ea:[],I:[]};for(a=0;b=za[a++];){e=Nb;b=b.toString();if(/^#(?:[^\s]+\/)?(?:\d+)? /.test(b))if(c=b.match(/^#([^\/]+)\//),d=b.match(/(\d+)\s/),u&&c&&d&&c[1]===v&&d[1]===u||u&&!c&&d&&d[1]===u||c&&!d&&c[1]===v)b=b.replace(/^#[^\s]+ /,"");else continue;if(/^#op /.test(b))if(u)continue;
else e=Mc,b=b.substr(4);if(/^#/.test(b)){c=b.split(" ")[0];b=b.replace(/^#[^\s]+ /,"");if(u&&("#skip"===c||"#num"===c)){b=b.split(", ");for(d=b.length;d--;)b[d].contains("-")||(b[d]+="-"+b[d]),"#num"===c?S.a.push(b[d]):S.Ha.push(b[d])}"#rep"===c?S.N.push(b):"#exp"===c?e.exp.push(xa(b)):"#exph"===c?e.wa.push(xa(b)):"#ihash"===c?e.Ba.push(+b):"#img"===c?e.s.push(b):"#imgn"===c?e.Ca.push(xa(b)):"#name"===c?e.name.push(b):"#theme"===c?e.sa.push(xa(b)):"#tmax"===c?e.Ja.push(b):"#sage"===c?e.ea=m:"#notxt"===
c?e.cb=m:"#noimg"===c?e.bb=m:"#trip"===c?e.Ka=m:"#outrep"===c?S.Ea.push(b):"#video"===c&&S.I.push(b)}else e.ta.push(b)}}function xe(a,b){for(var c,d=a.length;d--;)c=xa(a[d]),b=b.replace(c,a[d].substr(c.toString().length+1));return b}function Nc(a,b){var c,d,f,h,g,j,l,o;b.Da=V;if(S.Ha[0]&&u){c=b.count+1;for(d=0;f=S.Ha[d++];)if(f=f.split("-"),c>=+f[0]&&c<=+f[1])return b.Da=m,V}if(a.ta[0]||a.sa[0])g=(g=w("replytitle",b)||w("filetitle",b))?g.textContent.toLowerCase():"";j=ya(b);if(a.ta[0]){d=0;for(c=
j.toLowerCase();f=a.ta[d++];)if(h=f,f=f.toLowerCase(),c.contains(f)||g.contains(f))return h}if(a.sa[0])for(d=0;f=a.sa[d++];)if(f.test(g))return"#theme "+f.toString();if(a.exp[0]){d=0;for(c=j;f=a.exp[d++];)if(f.test(c))return"#exp "+f.toString()}if(a.wa[0]){d=0;for(c=b.innerHTML;f=a.wa[d++];)if(f.test(c))return"#exph "+f.toString()}if(a.name[0]||a.Ka)l=w("commentpostername",b)||w("postername",b),o=w("postertrip",b);if(a.Ka&&o)return"#trip";if(a.name[0]){l=l?l.textContent:"";o=o?o.textContent:"";for(d=
0;f=a.name[d++];)if(h=f,f=f.split(/!+/),f[0]&&l.contains(f[0])||f[1]&&o.contains(f[1]))return"#name "+h}if(0<b.s.length){if(a.Ba[0]){d=0;for(c=qe(b);f=a.Ba[d++];)if(f===c)return"#ihash "+f}if(a.s[0]){h=hc(b);c=+h[0];h=+h[1];g=Wd(b);for(d=0;f=a.s[d++];){a:{l=c;o=h;var p=g,r=f;if(r){var q=i,s=i,q=i,s=r.split("@"),v=s[0][0],q=s[0].substr(1).split("-");q[1]||(q[1]=q[0]);if(q[0])if("<"===v&&p<+q[0]||">"===v&&p>+q[0]||"="===v&&p>=+q[0]&&p<=+q[1]){if(!s[1]){l="image "+r;break a}}else{l=V;break a}if(s[1]&&
(q=s[1].split(/[x\u00d7]/),s=q[0].split("-"),q=q[1].split("-"),s[1]||(s[1]=s[0]),q[1]||(q[1]=q[0]),"<"===v&&l<+s[0]&&o<+q[0]||">"===v&&l>+s[0]&&o>+q[0]||"="===v&&l>=+s[0]&&l<=+s[1]&&o>=+q[0]&&o<=+q[1])){l="image "+r;break a}}l=V}if(l)return"#img "+f}}if(a.Ca[0]&&(c=w(e.T,b))){d=0;for(c=c.textContent;f=a.Ca[d++];)if(f.test(c))return"#imgn "+f}}if(S.a[0]){d=0;for(c=b.count+1;f=S.a[d++];)if(h=f,f=f.split("-"),c>=+f[0]&&c<=+f[1])return"#num "+h}if(a.Ja[0]){d=0;for(c=j.replace(/\n/g,"").length;f=a.Ja[d++];)if(c>=
f)return"#tmax "+f}return a.ea&&b.ea?"#sage":a.cb&&!j?"#no text":a.bb&&0===b.s.length?"#no image":V}function Mb(a){return!u&&a.k?Nc(Mc,a)||Nc(Nb,a):Nc(Nb,a)}function ff(a){if(f.filterThrds||!a.k){var b=Mb(a);b?hb(a,b.substring(0,70)):a.h&&a.Da&&Lc(a)}}function gf(a){for(var a=a.split("\n"),b,c,d=a.length,e=/#exp |#exph |#rep |#outrep |#imgn |#video |#theme /;d--;)if(b=a[d],c=b.match(e))try{xa(b.substr(b.indexOf(c)))}catch(f){return b}return V}function Oc(){y.forEach(function(a){a.Ma===m?(Lc(a),a.Ma=
V):Mb(a)&&Lc(a)})}function qc(){var a=o("de-spell-edit"),a=a.value=a.value.replace(/[\r\n]+/g,"\n").replace(/^\n|\n$/g,""),b=gf(a);b||!a?(a?I(sb[j]+" "+b,"err-spell",V):(Oc(),Ja(),Va("")),l.querySelector('input[info="hideBySpell"]').checked=V,Q("hideBySpell",0)):(Oc(),Va(a),f.hideBySpell&&(y.forEach(ff),Ie()),Ja())}function db(a){var b,c=o("de-spell-edit"),d=c&&c.value.replace(/[\r\n]+/g,"\n").replace(/^\n|\n$/g,"");if(d){if(b=gf(d)){I(sb[j]+" "+b,"err-spell",V);return}}else za||jc(),d=za.join("\n");
d=("\n"+d).contains("\n"+a)?("\n"+d).split("\n"+a).join("").replace(/^\n|\n$/g,""):!d?a:d+"\n"+a;c&&(c.value=d,c.previousSibling.firstChild.checked=!!d);Oc();Va(d);d?(Q("hideBySpell",1),y.forEach(ff),Ie()):Q("hideBySpell",0);Ja()}function Jc(a){if(!f.hideByWipe)return V;var b,c,d,e,h,g,j,l;if(f.wipeSameLin&&(b=a.replace(/>/g,"").split(/\s*\n\s*/),5<(c=b.length))){b.sort();d=0;for(h=c/4;d<c;){g=b[d];for(e=0;b[d++]===g;)e++;if(4<e&&e>h&&g)return'same lines: "'+g.substr(0,20)+'" x'+e}}if(f.wipeSameWrd&&
(b=a.replace(/[\s\.\?\!,>]+/g," ").toUpperCase().split(" "),3<(c=b.length))){b.sort();d=0;h=c/4;for(l=j=0;d<c;j++){g=b[d];for(e=0;b[d++]===g;)e++;if(25<c&&(e>l&&2<g.length&&(l=e),l>=h))return'same words: "'+g.substr(0,20)+'" x'+l}g=j/c;if(0.25>g)return"uniq words: "+(100*g).toFixed(0)+"%"}if(f.wipeLongWrd&&(b=a.replace(/https*:\/\/.*?(\s|$)/g,"").replace(/[\s\.\?!,>:;-]+/g," ").split(" "),50<b[0].length||1<(c=b.length)&&10<b.join("").length/c))return"long words";if(f.wipeCAPS&&(b=a.replace(/[\s\.\?!;,-]+/g,
" ").trim().split(" "),4<(c=b.length))){for(j=e=h=d=0;d<c;d++)g=b[d],5>(g.match(/[a-zа-я]/ig)||[]).length||(2<(g.match(/[A-ZА-Я]/g)||[]).length&&j++,g===g.toUpperCase()&&e++,h++);if(0.3<=e/h&&4<h)return"CAPSLOCK: "+100*(e/b.length)+"%";if(0.3<=j/h&&8<h)return"cAsE words: "+100*(j/b.length)+"%"}return f.wipeSpecial&&(b=a.replace(/\s+/g,""),30<(c=b.length)&&0.4<(g=b.replace(/[0-9a-zа-я\.\?!,]/ig,"").length/c))?"specsymbols: "+Math.round(100*g)+"%":f.wipeNumbers&&(b=a.replace(/\s+/g,
" ").replace(/>>\d+|https*:\/\/.*?(?: |$)/g,""),30<(c=b.length)&&0.4<(g=(c-b.replace(/\d/g,"").length)/c))?"numbers: "+Math.round(100*g)+"%":V}function fe(){return!f.scriptStyle?"fr":1===f.scriptStyle?"en":"de"}function ne(){function a(a,b){d+=a+':before { content: ""; padding: 0 16px 0 0; margin: 0 4px; background: url('+b+") no-repeat center; }"}function b(a,b){d+=a+" { background: url(data:image/gif;base64,"+b+") no-repeat center !important; }"}H(z);var c,d="",d=d+('#de-content-cfg > div { float: left; border-radius: 10px 10px 0 0; width: auto; min-width: 0; padding: 0; margin: 5px 20px; overflow: hidden; }\t\t#de-cfg-info > span { display: inline-block; vertical-align: top; }\t\t#de-cfg-head { padding: 4px; border-radius: 10px 10px 0 0; color: #fff; text-align: center; font: bold 14px arial; cursor: default; }\t\t#de-cfg-head:lang(en), #de-panel:lang(en) { background: linear-gradient(to bottom, #4b90df, #3d77be 5px, #376cb0 7px, #295591 13px, rgba(0,0,0,0) 13px), linear-gradient(to bottom, rgba(0,0,0,0) 12px, #183d77 13px, #1f4485 18px, #264c90 20px, #325f9e 25px); }\t\t#de-cfg-head:lang(de), #de-panel:lang(de) { background: #777; }\t\t#de-cfg-head:lang(fr), #de-panel:lang(fr) { background: linear-gradient(to bottom, #7b849b, #616b86 2px, #3a414f 13px, rgba(0,0,0,0) 13px), linear-gradient(to bottom, rgba(0,0,0,0) 12px, #121212 13px, #1f2740 25px); }\t\t.de-cfg-body { width: 371px; min-height: 347px; padding: 11px 7px 7px; margin-top: -1px; font: 13px sans-serif; }\t\t.de-cfg-body input[type="text"] { width: auto; }\t\t.de-cfg-body input[value=">"] { width: 20px; }\t\t.de-blockinp { display: block; }\t\t.de-cfg-body, #de-cfg-btns { border: 1px solid #183d77; border-top: none; }\t\t.de-cfg-body:lang(de), #de-cfg-btns:lang(de) { border-color: #444; }\t\t#de-cfg-btns { padding: 7px 2px 2px; }\t\t#de-cfg-bar { height: 25px; width: 100%; display: table; background-color: #1f2740; margin: 0; padding: 0; }\t\t#de-cfg-bar:lang(en) { background-color: #325f9e; }\t\t#de-cfg-bar:lang(de) { background-color: #777; }\t\t.de-cfg-tab { padding: 4px 6px; border-radius: 4px 4px 0 0; font: bold 14px arial; text-align: center; cursor: default; }\t\t.de-cfg-tab-back { display: table-cell !important; float: none !important; min-width: 0; padding: 0 !important; box-shadow: none !important; border: 1px solid #183d77 !important; border-radius: 4px 4px 0 0; opacity: 1; }\t\t.de-cfg-tab-back:lang(de) { border-color: #444 !important; }\t\t.de-cfg-tab-back:lang(fr) { border-color: #121421 !important; }\t\t.de-cfg-tab-back[selected="true"] { border-bottom: none !important; }\t\t.de-cfg-tab-back[selected="false"] > .de-cfg-tab { background-color: rgba(0,0,0,.2); }\t\t.de-cfg-tab-back[selected="false"] > .de-cfg-tab:lang(en), .de-cfg-tab-back[selected="false"] > .de-cfg-tab:lang(fr) { background: linear-gradient(to bottom, rgba(132,132,132,.35) 0%, rgba(79,79,79,.35) 50%, rgba(40,40,40,.35) 50%, rgba(80,80,80,.35) 100%) !important; }\t\t.de-cfg-tab-back[selected="false"] > .de-cfg-tab:hover { background-color: rgba(99,99,99,.2); }\t\t.de-cfg-tab-back[selected="false"] > .de-cfg-tab:hover:lang(en), .de-cfg-tab-back[selected="false"] > .de-cfg-tab:hover:lang(fr)  { background: linear-gradient(to top, rgba(132,132,132,.35) 0%, rgba(79,79,79,.35) 50%, rgba(40,40,40,.35) 50%, rgba(80,80,80,.35) 100%) !important; }\t\t.de-cfg-tab::'+
(g.c?"-moz-":"")+"selection { background: transparent; }\t\t#de-spell-panel { float: right; }\t\t#de-spell-panel > a { padding: 0 7px; text-align: center; }\t\t#de-cfg-wipe { display: table; padding-left: 25px; }\t\t#de-cfg-wipe > div { display: table-row; }\t\t#de-cfg-wipe > div > label { display: table-cell; }\t\t.de-cfg-unvis { display: none; }"),d=d+"#de-btn-logo { margin-right: 3px; cursor: pointer; }\t\t#de-panel { height: 25px; z-index: 9999; border-radius: 15px 0 0 0; cursor: default;}\t\t#de-panel-btns { display: inline-block; padding: 0 2px; margin: 0; height: 25px; border-left: 1px solid #8fbbed; }\t\t#de-panel-btns:lang(de), #de-panel-info:lang(de) { border-color: #ccc; }\t\t#de-panel-btns:lang(fr), #de-panel-info:lang(fr) { border-color: #616b86; }\t\t#de-panel-btns > li { margin: 0 1px; padding: 0; }\t\t#de-panel-btns > li, #de-panel-btns > li > a, #de-btn-logo { display: inline-block; width: 25px; height: 25px; }\t\t#de-panel-btns:lang(en) > li, #de-panel-btns:lang(fr) > li  { transition: all 0.3s ease; }\t\t#de-panel-btns:lang(en) > li:hover, #de-panel-btns:lang(fr) > li:hover { background-color: rgba(255,255,255,.15); box-shadow: 0 0 3px rgba(143,187,237,.5); }\t\t#de-panel-btns:lang(de) > li > a { border-radius: 5px; }\t\t#de-panel-btns:lang(de) > li > a:hover { width: 21px; height: 21px; border: 2px solid #444; }\t\t#de-panel-info { display: inline-block; vertical-align: top; padding: 0 6px; height: 25px; border-left: 1px solid #8fbbed; color: #fff; font: 18px serif; }";
c="R0lGODlhGQAZAIAAAPDw8P///yH5BAEAAAEALAAAAAAZABkAQA";b("#de-btn-logo",c+"I5jI+pywEPWoIIRomz3tN6K30ixZXM+HCgtjpk1rbmTNc0erHvLOt4vvj1KqnD8FQ0HIPCpbIJtB0KADs=");b("#de-btn-settings",c+"JAjI+pa+API0Mv1Ymz3hYuiQHHFYjcOZmlM3Jkw4aeAn7R/aL6zuu5VpH8aMJaKtZR2ZBEZnMJLM5kIqnP2csUAAA7");b("#de-btn-hidden",c+"I5jI+pa+CeHmRHgmCp3rxvO3WhMnomUqIXl2UmuLJSNJ/2jed4Tad96JLBbsEXLPbhFRc8lU8HTRQAADs=");b("#de-btn-favor",c+"IzjI+py+AMjZs02ovzobzb1wDaeIkkwp3dpLEoeMbynJmzG6fYysNh3+IFWbqPb3OkKRUFADs=");b("#de-btn-refresh",
c+"JAjI+pe+AfHmRGLkuz3rzN+1HS2JWbhWlpVIXJ+roxSpr2jedOBIu0rKjxhEFgawcCqJBFZlPJIA6d0ZH01MtRCgA7");b("#de-btn-goback",c+"IrjI+pmwAMm4u02gud3lzjD4biJgbd6VVPybbua61lGqIoY98ZPcvwD4QUAAA7");b("#de-btn-gonext",c+"IrjI+pywjQonuy2iuf3lzjD4Zis0Xd6YnQyLbua61tSqJnbXcqHVLwD0QUAAA7");b("#de-btn-goup",c+"IsjI+pm+DvmDRw2ouzrbq9DmKcBpVfN4ZpyLYuCbgmaK7iydpw1OqZf+O9LgUAOw==");b("#de-btn-godown",c+"ItjI+pu+DA4ps02osznrq9DnZceIxkYILUd7bue6WhrLInLdokHq96tnI5YJoCADs=");b("#de-btn-newthr",c+"IyjI+pG+APQYMsWsuy3rzeLy2g05XcGJqqgmJiS63yTHtgLaPTY8Np4uO9gj0YbqM7bgoAOw==");
b("#de-btn-expimg",c+"I9jI+pGwDn4GPL2Wep3rxXFEFel42mBE6kcYXqFqYnVc72jTPtS/KNr5OJOJMdq4diAXWvS065NNVwseehAAA7");b("#de-btn-maskimg",c+"JQjI+pGwD3TGxtJgezrKz7DzLYRlKj4qTqmoYuysbtgk02ZCG1Rkk53gvafq+i8QiSxTozIY7IcZJOl9PNBx1de1Sdldeslq7dJ9gsUq6QnwIAOw==");e.K&&b("#de-btn-catalog",c+"I2jI+pa+DhAHyRNYpltbz7j1Rixo0aCaaJOZ2SxbIwKTMxqub6zuu32wP9WsHPcFMs0XDJ5qEAADs=");b("#de-btn-audio-off",c+"I7jI+pq+DO1psvQHOj3rxTik1dCIzmSZqfmGXIWlkiB6L2jedhPqOfCitVYolgKcUwyoQuSe3WwzV1kQIAOw==");b("#de-btn-audio-on",c+"JHjI+pq+AewJHs2WdoZLz7X11WRkEgNoHqimadOG7uAqOm+Y6atvb+D0TgfjHS6RIp8YQ1pbHRfA4n0eSTI7JqP8Wtahr0FAAAOw==");
c="Dw8P///wAAACH5BAEAAAIALAAAAAAZABkAQAJElI+pe2EBoxOTNYmr3bz7OwHiCDzQh6bq06QSCUhcZMCmNrfrzvf+XsF1MpjhCSainBg0AbKkFCJko6g0MSGyftwuowAAOw==";b("#de-btn-upd-on","R0lGODlhGQAZAJEAADL/Mv"+c);b("#de-btn-upd-off","R0lGODlhGQAZAJEAAP8yMv"+c);b("#de-btn-upd-warn","R0lGODlhGQAZAJEAAP/0Qf"+c);d+=".de-ppanel, .de-ppanel-op { margin-left: 4px; }\t\t.de-btn-hide, .de-btn-lock, .de-btn-rep, .de-btn-expthr, .de-btn-fav, .de-btn-fav-sel, .de-btn-sage, .de-btn-src { display: inline-block; margin: 0 4px -2px 0 !important; cursor: pointer; ";
f.postBtnsTxt?d+="color: "+getComputedStyle(P("a",l)).getPropertyValue("color")+'; font-size:14px; }\t\t\t.de-btn-hide:after { content: "\u00d7"; }\t\t\t.de-post-hid .de-btn-hide:after { content: "+"; }\t\t\t.de-btn-lock:after { content: "\u25a0"; }\t\t\t.de-btn-rep:after { content: "R"; }\t\t\t.de-btn-expthr:after { content: "E"; }\t\t\t.de-btn-fav:after { content: "F"; }\t\t\t.de-btn-fav-sel:after { content: "[F]"; }\t\t\t.de-btn-sage:after { content: "Sage!"; }\t\t\t.de-btn-src:after { content: "[Sauce]"; }':
(d+="padding: 0 14px 14px 0; }",c="R0lGODlhDgAOAKIAAPDw8KCgoICAgEtLS////wAAAAAAAAAAACH5BAEAAAQALAAAAAAOAA4AQAM",b(".de-btn-hide",c+"8SLLcS2MNQGsUMYi6uB5BKI5hFgojel5YBbDDNcmvpJLkcgLq1jcuSgPmgkUmlJgFAyqNmoEBJEatxggJADs="),b(".de-post-hid .de-btn-hide",c+"5SLLcS2ONCcCMIoYdRBVcN4Qkp4ULmWVV20ZTM1SYBJbqvXmA3jk8IMzlgtVYFtkoNCENIJdolJAAADs="),b(".de-btn-lock",c+"zSLLcS2MNQGsUMQRRq9CYJo5iRp6Y1FHXcGFuzJjnuIjOBzYr0LS9FnAlrJEGkJhSSUgAADs="),b(".de-btn-rep",c+"4SLLcS2MNQGsUMQRRwdLbAI5kpn1kKHUWdk3AcDFmOqKcJ5AOq0srX0QWpBAlIo3MNoDInlAZIQEAOw=="),
b(".de-btn-expthr",c+"7SLLcS6MNACKLIQjKgcjCkI2DOAbYuHlnKFHWUl5dnKpfm2vd7iyUXywEk1gmnYrMlEEyUZCSdFoiJAAAOw=="),b(".de-btn-fav",c+"5SLLcS2MNQGsUl1XgRvhg+EWhQAllNG0WplLXqqIlDS7lWZvsJkm92Au2Aqg8gQFyhBxAlNCokpAAADs="),b(".de-btn-fav-sel","R0lGODlhDgAOAKIAAP/hAKCgoICAgEtLS////wAAAAAAAAAAACH5BAEAAAQALAAAAAAOAA4AQAM5SLLcS2MNQGsUl1XgRvhg+EWhQAllNG0WplLXqqIlDS7lWZvsJkm92Au2Aqg8gQFyhBxAlNCokpAAADs="),b(".de-btn-sage","R0lGODlhDgAOAJEAAPDw8EtLS////wAAACH5BAEAAAIALAAAAAAOAA4AQAIZVI55duDvFIKy2vluoJfrD4Yi5lWRwmhCAQA7"),
b(".de-btn-src",c+"9SLLcS0MMQMesUoQg6PKbtFnDaI0a53VAml2ARcVSFC0WY6ecyy+hFajnWDVssyQtB5NhTs1mYAAhWa2EBAA7"));a(".de-src-google","//google.ru/favicon.ico");a(".de-src-tineye","//tineye.com/favicon.ico");a(".de-src-iqdb","//iqdb.org/favicon.ico");a(".de-src-saucenao","//saucenao.com/favicon.ico");u&&(d+='.de-thread { counter-reset: i 1; }\t\t.de-ppanel.de-ppanel-cnt:after { counter-increment: i 1; content: counter(i, decimal); vertical-align: 1px; color: #4f7942; font: italic bold 13px serif; cursor: default; }\t\t.de-ppanel-del:after { content: "'+
Md[j]+'"; color: #727579; font: italic bold 13px serif; cursor: default; }');d+="#de-txt-panel { display: block; height: 23px; font-weight: bold; cursor: pointer; }\t\t#de-txt-panel > span:empty { display: inline-block; width: 27px; height: 23px }\t\t#de-txt-panel:lang(en) { display: none; }\t\t#de-txt-panel:lang(ru) { float: right; }";c="R0lGODlhFwAWAJEAAPDw8GRkZAAAAP///yH5BAEAAAMALAAAAAAXABYAQAJ";b("#de-btn-bold:empty",c+"T3IKpq4YAoZgR0KqqnfzipIUikFWc6ZHBwbQtG4zyonW2Vkb2iYOo8Ps8ZLOV69gYEkU5yQ7YUzqhzmgsOLXWnlRIc9PleX06rnbJ/KITDqTLUAAAOw==");
b("#de-btn-italic:empty",c+"K3IKpq4YAYxRCSmUhzTfx3z3c9iEHg6JnAJYYSFpvRlXcLNUg3srBmgr+RL0MzxILsYpGzyepfEIjR43t5kResUQmtdpKOIQpQwEAOw==");b("#de-btn-under:empty",c+"V3IKpq4YAoRARzAoV3hzoDnoJNlGSWSEHw7JrEHILiVp1NlZXtKe5XiptPrFh4NVKHh9FI5NX60WIJ6ATZoVeaVnf8xSU4r7NMRYcFk6pzYRD2TIUAAA7");b("#de-btn-strike:empty",c+"S3IKpq4YAoRBR0qqqnVeD7IUaKHIecjCqmgbiu3jcfCbAjOfTZ0fmVnu8YIHW6lgUDkOkCo7Z8+2AmCiVqHTSgi6pZlrN3nJQ8TISO4cdyJWhAAA7");b("#de-btn-spoil:empty","R0lGODlhFwAWAJEAAPDw8GRkZP///wAAACH5BAEAAAIALAAAAAAXABYAQAJBlIKpq4YAmHwxwYtzVrprXk0LhBziGZiBx44hur4kTIGsZ99fSk+mjrMAd7XerEg7xnpLIVM5JMaiFxc14WBiBQUAOw==");
b("#de-btn-code:empty",c+"O3IKpq4YAoZgR0KpqnFxokH2iFm7eGCEHw7JrgI6L2F1YotloKek6iIvJAq+WkfgQinjKVLBS45CePSXzt6RaTjHmNjpNNm9aq6p4XBgKADs=");b("#de-btn-quote:empty",c+"L3IKpq4YAYxRUSKguvRzkDkZfWFlicDCqmgYhuGjVO74zlnQlnL98uwqiHr5ODbDxHSE7Y490wxF90eUkepoysRxrMVaUJBzClaEAADs=");g.ua&&(d+="@keyframes de-open {\t\t\t\t0% { transform: translateY(-1500px); }\t\t\t\t40% { transform: translateY(30px); }\t\t\t\t70% { transform: translateY(-10px); }\t\t\t\t100% { transform: translateY(0); }\t\t\t}\t\t\t@keyframes de-close {\t\t\t\t0% { transform: translateY(0); }\t\t\t\t20% { transform: translateY(20px); }\t\t\t\t100% { transform: translateY(-4000px); }\t\t\t}\t\t\t@keyframes de-blink {\t\t\t\t0%, 100% { transform: translateX(0); }\t\t\t\t10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }\t\t\t\t20%, 40%, 60%, 80% { transform: translateX(10px); }\t\t\t}\t\t\t@keyframes de-cfg-open { from { transform: translate(0,50%) scaleY(0); opacity: 0; } }\t\t\t@keyframes de-cfg-close { to { transform: translate(0,50%) scaleY(0); opacity: 0; } }\t\t\t@keyframes de-post-open-tl { from { transform: translate(-50%,-50%) scale(0); opacity: 0; } }\t\t\t@keyframes de-post-open-bl { from { transform: translate(-50%,50%) scale(0); opacity: 0; } }\t\t\t@keyframes de-post-open-tr { from { transform: translate(50%,-50%) scale(0); opacity: 0; } }\t\t\t@keyframes de-post-open-br { from { transform: translate(50%,50%) scale(0); opacity: 0; } }\t\t\t@keyframes de-post-close-tl { to { transform: translate(-50%,-50%) scale(0); opacity: 0; } }\t\t\t@keyframes de-post-close-bl { to { transform: translate(-50%,50%) scale(0); opacity: 0; } }\t\t\t@keyframes de-post-close-tr { to { transform: translate(50%,-50%) scale(0); opacity: 0; } }\t\t\t@keyframes de-post-close-br { to { transform: translate(50%,50%) scale(0); opacity: 0; } }\t\t\t.de-pview-anim { animation-duration: .2s; animation-timing-function: ease-in-out; animation-fill-mode: both; }\t\t\t.de-open { animation: de-open .7s ease-out both; }\t\t\t.de-close { animation: de-close .7s ease-in both; }\t\t\t.de-blink { animation: de-blink .7s ease-in-out both; }\t\t\t.de-cfg-open { animation: de-cfg-open .2s ease-out backwards; }\t\t\t.de-cfg-close { animation: de-cfg-close .2s ease-in both; }");
a(".de-ytube-link","//youtube.com/favicon.ico");d+=".de-img-pre, .de-img-full { display: block; margin: "+(e.f?0:"2px 10px")+"; border: none; outline: none; cursor: pointer; }\t\t.de-img-full { float: left; }\t\t.de-img-center { position: fixed; z-index: 9999; border: 1px solid black; }\t\t.de-mp3, .de-ytube-obj { margin: 5px 20px; }\t\ttd > a + .de-ytube-obj { display: inline-block; }";a(".de-wait","data:image/gif;base64,R0lGODlhEAAQALMMAKqooJGOhp2bk7e1rZ2bkre1rJCPhqqon8PBudDOxXd1bISCef///wAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFAAAMACwAAAAAEAAQAAAET5DJyYyhmAZ7sxQEs1nMsmACGJKmSaVEOLXnK1PuBADepCiMg/DQ+/2GRI8RKOxJfpTCIJNIYArS6aRajWYZCASDa41Ow+Fx2YMWOyfpTAQAIfkEBQAADAAsAAAAABAAEAAABE6QyckEoZgKe7MEQMUxhoEd6FFdQWlOqTq15SlT9VQM3rQsjMKO5/n9hANixgjc9SQ/CgKRUSgw0ynFapVmGYkEg3v1gsPibg8tfk7CnggAIfkEBQAADAAsAAAAABAAEAAABE2QycnOoZjaA/IsRWV1goCBoMiUJTW8A0XMBPZmM4Ug3hQEjN2uZygahDyP0RBMEpmTRCKzWGCkUkq1SsFOFQrG1tr9gsPc3jnco4A9EQAh+QQFAAAMACwAAAAAEAAQAAAETpDJyUqhmFqbJ0LMIA7McWDfF5LmAVApOLUvLFMmlSTdJAiM3a73+wl5HYKSEET2lBSFIhMIYKRSimFriGIZiwWD2/WCw+Jt7xxeU9qZCAAh+QQFAAAMACwAAAAAEAAQAAAETZDJyRCimFqbZ0rVxgwF9n3hSJbeSQ2rCWIkpSjddBzMfee7nQ/XCfJ+OQYAQFksMgQBxumkEKLSCfVpMDCugqyW2w18xZmuwZycdDsRACH5BAUAAAwALAAAAAAQABAAAARNkMnJUqKYWpunUtXGIAj2feFIlt5JrWybkdSydNNQMLaND7pC79YBFnY+HENHMRgyhwPGaQhQotGm00oQMLBSLYPQ9QIASrLAq5x0OxEAIfkEBQAADAAsAAAAABAAEAAABE2QycmUopham+da1cYkCfZ94UiW3kmtbJuRlGF0E4Iwto3rut6tA9wFAjiJjkIgZAYDTLNJgUIpgqyAcTgwCuACJssAdL3gpLmbpLAzEQA7");
d+=".de-abtn { text-decoration: none !important; outline: none; }\t\t#de-alert { position: fixed; right: 0; top: 0; z-index: 9999; font: 14px arial; cursor: default; }\t\t#de-alert > div { float: right; clear: both; width: auto; min-width: 0pt; padding: 10px; margin: 1px; border: 1px solid grey; white-space: pre-wrap; }\t\t.de-alert-btn { display: inline-block; vertical-align: top; font-size: 150%; color: green; cursor: pointer; }\t\t.de-alert-msg { display: inline-block; margin-top: .25em; }\t\t.de-content { text-align: left; }\t\t.de-content textarea { display: block; margin: 2px 0; font: 12px courier new; "+
(g.d?"":"resize: none !important; ")+'}\t\t.de-content-block > a { color: inherit; font-weight: bold; }\t\t#de-content-fav, #de-content-hid { font-size: 16px; padding: 10px; border: 1px solid gray; }\t\t.de-entry { margin: 2px 0; }\t\t.de-entry > :first-child { float: none !important; }\t\t.de-entry > div > a { text-decoration: none; }\t\t.de-fav-inf-posts, .de-fav-inf-page { float: right; margin-right: 5px; font: bold 16px serif; }\t\t.de-fav-inf-old { color: #4f7942; }\t\t.de-fav-inf-new { color: blue; }\t\t.de-fav-title { margin-right: 15px; }\t\t.de-omitted { color: grey; font-style: italic; }\t\t.de-post-note { color: inherit; font: italic bold 12px serif; }\t\t.de-ref-hid { text-decoration: line-through !important; }\t\t.de-refmap { margin: 10px 4px 4px 4px; font-size: 70%; font-style: italic; }\t\t.de-refmap:before { content: "'+
Nd[j]+' "; }\t\t.de-refmap > a { text-decoration: none; }\t\t#de-sagebtn { margin-right: 7px; cursor: pointer; }\t\t#de-select { padding: 0 !important; margin: 0 !important; width: auto; min-width: 0; z-index: 9999; border: 1px solid grey;}\t\t#de-select a { display: block; padding: 3px 10px; color: inherit; text-decoration: none; font: 13px arial; white-space: nowrap; }\t\t#de-select a:hover { background-color: #222; color: #fff; }\t\t.de-selected { '+(g.d?"border-left: 4px solid red; border-right: 4px solid red; }":
"box-shadow: 6px 0 2px -2px red, -6px 0 2px -2px red; }")+'\t\t#de-txt-resizer { display: inline-block !important; float: none !important; padding: 5px; margin: 0 0 -6px -12px; border-bottom: 2px solid #555; border-right: 2px solid #444; cursor: se-resize; }\t\t.de-viewed { color: #888 !important; }\t\t.de-pview { position: absolute; width: auto; min-width: 0; z-index: 9999; border: 1px solid grey; margin: 0 !important; display: block !important; }\t\t.de-pview-info { padding: 3px 6px !important; }\t\t.de-pview-link { font-weight: bold; }\t\t.de-archive:after { content: ""; padding: 0 16px 3px 0; margin: 0 4px; background: url(data:image/gif;base64,R0lGODlhEAAQALMAAF82SsxdwQMEP6+zzRA872NmZQesBylPHYBBHP///wAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAkALAAAAAAQABAAQARTMMlJaxqjiL2L51sGjCOCkGiBGWyLtC0KmPIoqUOg78i+ZwOCUOgpDIW3g3KJWC4t0ElBRqtdMr6AKRsA1qYy3JGgMR4xGpAAoRYkVDDWKx6NRgAAOw==) no-repeat center; }\t\t#de-iframe-pform, #de-iframe-dform, small[id^="rfmap"], div[id^="preview"], div[id^="pstprev"], body > hr, .theader, .postarea { display: none !important; }';
e.C?d+="#newposts_get, .extrabtns, .ui-resizable-handle { display: none !important; }\t\t\t.ui-wrapper { display: inline-block; width: auto !important; height: auto !important; padding: 0 !important; }":e.F&&(d+='#de-pform > div, .mentioned, form > div[style="text-align: center;"], form > div[style="text-align: center;"] + hr { display: none !important; }');e.f?d+='.de-post-hid > div:not(.postheader), img[id^="translate_button"], img[src$="button-expand.gif"], img[src$="button-close.gif"], body > center > hr, h2, form > div:first-of-type > hr'+
(ab?', div[id^="disclaimer"]':"")+' { display: none !important; }\t\t\tdiv[id^="Wz"] { z-index: 10000 !important; }\t\t\t.de-thr-hid { margin-bottom: '+(!u?"7":"2")+"px; }\t\t\t.file_reply + .de-ytube-obj, .file_thread + .de-ytube-obj { margin: 5px 20px 5px 5px; float: left; }\t\t\t.de-ytube-obj + div { clear: left; }":e.b?d+=".de-spoiler { color: #000; background-color: #000; }\t\t\t.de-post-hid > .file, .de-post-hid > blockquote, #mpostform, .navLinks, .postingMode { display: none !important; }":
e.p?d+="form, form table { margin: 0; }\t\t\t.de-post-hid > .intro ~ *, .post-hover { display: none !important; }":e.m?d+=".de-post-hid > .replyheader ~ *, .opqrbtn, .qrbtn, .ignorebtn, .hidethread, noscript, #content > hr { display: none !important; }\t\t\t.de-thr-hid { margin: 1em 0; }":(d+=".de-post-hid > .de-ppanel ~ * { display: none !important; }",e.u?d+=".ABU_refmap, .postpanel, #CommentToolbar, #usrFlds + tbody > tr:first-child, #postform > div:nth-child(2), #BottomNormalReply, body > center { display: none !important; }\t\t\t\t#de-txt-panel { font-size: 16px !important; }\t\t\t\t.de-abtn { transition: none; }":
e.K?d+='#postform nobr, .replieslist, #captcha_status, .de-thread span[style="float: right;"] { display: none !important; }\t\t\t\t.ui-wrapper { position: static !important; margin: 0 !important; overflow: visible !important; }\t\t\t\t.ui-resizable { display: inline !important; }':e.i?d+="#hideinfotd, .reply_, .delete > img, .popup { display: none; }\t\t\t\t.delete { background: none; }\t\t\t\t.delete_checkbox { position: static !important; }\t\t\t\t.file + .de-ytube-obj { float: left; margin: 5px 20px 5px 5px; }\t\t\t\t.de-ytube-obj + div { clear: left; }":
e.R?d+=".reply { background-color: "+getComputedStyle(l.body).getPropertyValue("background-color")+"; }":e.o?d+=".de-content, .de-cfg-body { font-family: arial; }\t\t\t\t.ftbl { width: auto; margin: 0; }\t\t\t\t.reply { background: #f0e0d6; }":e.z?d+=".de-ppanel, .de-ppanel-op { float: left; margin-top: 0.45em; }\t\t\t\ta + .threadlinktext { position: relative; top: 17px; }\t\t\t\t.postthreadlinks, .pagethreadlinks, .pwpostblock { display: none; }\t\t\t\t.de-btn-src { padding: 0px 10px 10px 0px !important; background-size: cover !important; }":
e.ha?d+="br.clear { display: none !important; }":e.fb&&(d+="#bodywrap3 > hr, .blotter { display: none !important; }"));ab&&(d+="body > :not("+(e.z?".threadz":"form")+") { display: none; }");16>g.c&&(d=d.replace(/(transition|keyframes|transform|animation|linear-gradient)/g,g.Ta+"$1"),g.d||(d=d.replace(/\(to bottom/g,"(top").replace(/\(to top/g,"(bottom")));fa(l.head,[q("style",{id:"de-css",type:"text/css",text:d},n),q("style",{id:"de-css-dynamic",type:"text/css"},n)]);d=b=a=n;ia();H(z)}function ia(){var a=
".de-content { "+(!f.attachPanel?"width: 100%;":"position: fixed; right: 0; bottom: 25px; z-index: 9999; max-height: 95%; overflow-x: visible; overflow-y: auto;")+" }\t\t#de-panel { "+(!f.attachPanel?"float: right; clear: both":"position: fixed; right: 0; bottom: 0;")+" }",a=3===f.addPostForm?a+"#de-qarea { position: fixed; right: 0; bottom: 25px; z-index: 9990; padding: 3px; border: 1px solid gray; }\t\t\t#de-qarea-target { font-weight: bold; }\t\t\t#de-qarea-close { float: right; color: green; font: bold 20px arial; cursor: pointer; }":
a+"#de-qarea { float: none; clear: left; width: 100%; padding: 3px 0 3px 3px; margin: 2px 0; }";f.panelCounter||(a+="#de-panel-info { display: none; }");f.expandPanel||(a+="#de-panel-btns, #de-panel-info { display: none; }");f.maskImgs&&(a+='.de-img-pre, .de-ytube-obj, img[src*="spoiler"], img[src*="thumb"] { opacity: 0.07 !important; }\t\t\t.de-img-pre:hover, .de-ytube-obj:hover, img[src*="spoiler"]:hover, img[src*="thumb"]:hover { opacity: 1 !important; }');f.delHiddPost&&(a+=".de-thr-hid, .de-thr-hid + div + br, .de-thr-hid + div + br + hr { display: none; }");
f.noPostNames&&(a+=".commentpostername, .postername, .postertrip { display: none; }");f.noSpoilers&&(a+=".spoiler, .de-spoiler { background: #888 !important; color: #ccc !important; }");f.noPostScrl&&(a+="blockquote, blockquote > p, .code_part { max-height: 100% !important; overflow: visible !important; }");f.noBoardRule&&(a+=(e.o?".chui":".rules, #rules, #rules_row")+" { display: none; }");e.u&&f.addYouTube&&(a+='div[id^="post_video"] { display: none !important; }');o("de-css-dynamic").textContent=
a}function me(a,b){var c=f.scrUpdIntrv;if(!a){switch(c){case 0:c=1728E5;break;case 1:c=3456E5;break;case 2:c=12096E5;break;case 3:c=24192E5;break;default:c=5184E6}if(Date.now()-+f.lastScrUpd<c)return}GM_xmlhttpRequest({method:"GET",url:"https://raw.github.com/SthephanShinkufag/Dollchan-Extension-Tools/master/Dollchan_Extension_Tools.meta.js",headers:{"Content-Type":"text/plain"},onreadystatechange:function(c){if(4===c.readyState)if(200===c.status){var c=c.responseText.match(/@version\s+([0-9.]+)/)[1].split("."),
e=f.version.split("."),h=e.length>c.length?e.length:c.length,g=0,l=V;if(c){for(f.lastScrUpd=Date.now();g<h;){if((+c[g]||0)>(+e[g]||0)){l=m;break}else if((+c[g]||0)<(+e[g]||0))break;g++}l?b('<a style="color: blue; font-weight: bold;" href="https://raw.github.com/SthephanShinkufag/Dollchan-Extension-Tools/master/Dollchan_Extension_Tools.user.js">'+Od[j]+"</a>"):a&&b(Pd[j])}else a&&b('<div style="color: red; font-weigth: bold;">'+la[j]+"</div>")}else a&&b('<div style="color: red; font-weigth: bold;">'+
la[j]+"</div>")}})}function Wf(){if(/^(?:about|chrome|opera|res)/i.test(window.location))return V;if(!window.localStorage||!("object"===typeof localStorage&&window.sessionStorage))return GM_log("WEBSTORAGE ERROR: please, enable webstorage!"),V;Xf();switch(window.name){case "de-iframe-pform":case "de-iframe-dform":return gc(('window.top.postMessage("J'+window.name+"$#$"+Ae(l)+"$#$"+Ce(l,m)+'", "*");').replace(/\n|\r/g,"\\n")),V;case "de-iframe-fav":var a=setInterval(function(){s(o("de-fav-script"));
l.head.appendChild(q("script",{id:"de-fav-script",type:"text/javascript",text:'window.top.postMessage("I'+(l.body.offsetHeight+5)+'", "*");'},n))},1500);R(window,{load:function(){setTimeout(function(){clearInterval(a);a=n},3E4)}});ab=m;h={}}if(e.i&&"/settings"===window.location.pathname)return Uf(),V;if(!z||o("de-panel"))return V;Yf();return-1!==(Ua("DESU_Exclude")||"").indexOf(e.e)?V:m}function Yf(){var a=window.navigator.userAgent;g={c:+(a.match(/mozilla.*? rv:(\d+)/i)||[,0])[1],d:window.opera?
+window.opera.version():0,n:+(a.match(/WebKit\/([\d.]+)/i)||[,0])[1]};g.ja=g.n&&!/chrome/i.test(a);g.oa=g.c&&"function"===typeof GM_setValue;g.pa=g.oa||!!Da;g.Ta=g.n?"-webkit-":g.d?12.5>g.d?"-o-":"":16>g.c?"-moz-":"";if(!g.d||12<=g.d)g.ua=m,g.$=g.n?"webkitAnimationName":g.d?"OAnimationName":16>g.c?"MozAnimationName":"animationName",g.Z=g.n?"webkitAnimationEnd":g.d&&12.5>g.d?"oAnimationEnd":"animationend",g.S=function(a,c){a.addEventListener(g.Z,function k(){this.removeEventListener(g.Z,k,V);c(this);
c=n},V)};g.Mb=g.n?"webkitvisibilitychange":"mozvisibilitychange";14<g.c||536.1<=g.n?g.ia=function(a,c){return c?new Blob(a,{type:c}):new Blob(a)}:5<g.c?g.ia=function(a,c){var d,e,f,h,g,j,l=new window.Qb;d=0;for(f=a.length;d<f;d++)if(j=a[d],j.buffer)if(j.length!==j.buffer.byteLength){g=new Uint8Array(h=j.length);for(e=0;e<h;e++)g[e]=j[e];l.append(g.buffer)}else l.append(j.buffer);else l.append(j);return c?l.getBlob(c):l.getBlob()}:g.V=m;g.ba=g.c&&8>g.c?function(a,c){K(a,C(c))}:function(a,c){a.insertAdjacentHTML("afterend",
c)};g.$a=g.c&&8>g.c?function(a,c){Z(a,C(c))}:function(a,c){a.insertAdjacentHTML("beforebegin",c)};g.forEach=g.n||g.c?function(a,c){Object.keys(a).forEach(c,a)}:function(a,c){for(var d in a)a.hasOwnProperty(d)&&c.call(a,d)};g.xa=g.ja?function(a){return"/"===a[1]?"http:"+a:"/"===a[0]?"http://"+e.host+a:a}:function(a){return a};g.n&&(window.URL=window.webkitURL);g.r=g.d&&11.5>g.d?function(a,c){a.className=a.className+(" "+c)}:function(a,c){a.classList.add(c)};g.Q=g.d&&11.5>g.d?function(a,c){a.className=
a.className.replace(RegExp("(?:^| )"+c,"g"),"")}:function(a,c){a.classList.remove(c)};g.lb=12<=g.c?function(a){return(new DOMParser).parseFromString(a,"text/html")}:function(a){var c=l.implementation.createHTMLDocument("");c.documentElement.innerHTML=a;return c}}function Qe(a){if(!a||e.u&&w("locked",a))return{};var b=e.R?"li":"tr",c=".//"+b+'[not(contains(@style,"none"))]//input[not(@type="hidden") and ',d=a.querySelector("#recaptcha_response_field");return{L:m,D:V,Gb:!e.p||!!u,G:u,form:a,O:"ancestor::"+
b+"[1]",X:d,j:a.querySelector('input[name*="aptcha"]:not([name="recaptcha_challenge_field"])')||d,g:a.querySelector(b+':not([style*="none"]) textarea:not([style*="display:none"])'),fa:a.querySelector(b+' input[type="submit"]'),file:a.querySelector(b+' input[type="file"]'),P:a.querySelector(b+' input[type="password"]'),xb:z.querySelector('input[type="password"]'),na:T('.//tr[@id="trgetback"]|.//input[@type="radio" or @name="gotothread"]/ancestor::tr[1]',a),name:T(c+'(@name="field1" or @name="name" or @name="internal_n" or @name="nya1" or @name="akane")]',
a),J:T(c+(e.Y?'@name="sage"]':'(@name="field2" or @name="em" or @name="sage" or @name="email" or @name="nabiki" or @name="dont_bump")]'),a),I:a.querySelector(b+' input[name="video"], '+b+' input[name="embed"]')}}function Xf(){var a=window.location.hostname.match(/(?:(?:[^.]+\.)(?=org\.|net\.|com\.))?[^.]+\.[^.]+$|^\d+\.\d+\.\d+\.\d+$|localhost/)[0];e={C:ea('.//script[contains(@src,"kusaba")]',l),i:ea('.//script[contains(@src,"hanabira")]',l),p:ea('.//form[@name="postcontrols"]',l),u:!!o("LakeSettings"),
Ob:ea('.//script[contains(@src,"wakaba")]|.//form[contains(@action,"wakaba.pl")]',l)};switch(a){case "krautchan.net":e.f=m;break;case "2chan.net":e.o=m;break;case "britfa.gs":e.z=m;break;case "4chan.org":e.b=m;break;case "420chan.org":e.m=m;break;case "7chan.org":e.R=m;break;case "mlpg.co":e.F=m}e.ca=e.z?".threadz":e.i||e.f?'form[action*="delete"]':e.p?'form[name="postcontrols"]':e.o?"form:nth-of-type(2)":'#delform, form[name="delform"]';e.jb=l.querySelector('div[id*="_info"][style*="float"]')?'div[id^="t"]:not([style])':
e.m?'[id*="thread"]':'[id^="thread"]'+(e.R?":not(#thread_controls)":"");e.Ga=e.o||e.p&&!e.F?'input[type="checkbox"]':e.Ob&&!e.u||e.z?"a[name]":V;if(z=l.querySelector(e.ca)){e.e=a;e.host=window.location.hostname;e.ha=ea('.//form[contains(@action,"imgboard.php?delete")]',l);switch(a){case "0chan.ru":e.K=m;break;case "410chan.ru":e.Y=m;break;case "hiddenchan.i2p":e.Ya=m;break;case "2--ch.ru":e.Ia=m;break;case "dfwk.ru":e.Ua=m;break;case "ponychan.net":e.fb=m}e.Kb=e.i||e.ha||e.Ia||"02ch.net"===a;e.v=
e.f?"postreply":e.p?"post reply":"reply";e.rb=e.C?"postnode":e.b?"op":e.F?"opMain":"oppost";e.sb=e.f?"thread_body":"thread";e.ib=e.b?".postInfo > :last-child":e.p?".intro > :last-child":e.f?".postnumber":e.o?".del":".reflink";e.A=e.i?".postbody":e.p?".body":e.R?".message":"blockquote";e.T=e.b?"fileText":e.f||e.p||e.i||e.z?"fileinfo":"filesize";e.gb=e.z?".fileinfo":e.f?".filename > a":(e.o?"":"."+e.T)+' a[href$=".jpg"]'+(e.K?":first-child,":",")+(e.o?"":"."+e.T)+' a[href$=".png"]'+(e.K?":first-child,":
",")+(e.o?"":"."+e.T)+' a[href$=".gif"]'+(e.K?":first-child":"");e.hb=e.o?"form:nth-of-type(1)":e.b||e.p?'form[name="post"]':"#postform";e.Pa=e.f?"postsubject":e.p||e.b?"subject":e.i?"replytitle":"filetitle";e.Hb=e.o?'font[color="#707070"]':e.f?".omittedinfo":e.i?".abbrev":e.b?".summary.desktop":".omittedposts";e.Fa=e.f?".ban_mark":e.b?'strong[style="color: red;"]':V;e.Xa=e.i?function(a){a.previousElementSibling||(a=a.parentNode);return a.parentNode}:e.f?function(a){return a.parentNode}:$;e.za=e.o?
function(a){return a.querySelectorAll("td:nth-child(2)")}:e.p?function(a){return W("reply",a)}:function(a){return W(e.v,a)};e.Wa=e.z?function(a,c){var d,e=U(c.createElement("div"),{style:"clear: left;"}),f=w("originalpost",a);for(K(w("postmenu",f),e);"TABLE"!==(d=a.firstChild).tagName;)K(e,d),e=d;e=c.createElement("div");for(Z(a.firstChild,e);d=f.firstChild;)e.appendChild(d);s(P("table",a));return e}:function(a,c){var d,f,h;if(f=w(e.rb,a))return f;f=c.createElement("div");for(h=a.querySelector(e.ra+
', div[id^="repl"]');(d=a.firstChild)!==h;)f.appendChild(d);a.childElementCount?Z(a.firstChild,f):a.appendChild(f);return f};e.Aa=e.C&&!e.R||e.ha?function(a){return a.querySelector('input[type="checkbox"]').value}:e.Ga?function(a){return a.querySelector(e.Ga).name.match(/\d+/)[0]}:e.f?function(a){return a.parentNode.previousElementSibling.name}:function(a){return a.parentNode.id.match("\\d+"+(e.m?"$":""))[0]};e.aa=e.o?function(a){return P("input",a).name}:function(a){return a.id.match(/\d+/)[0]};
e.yb=e.b?function(a){return!!w("id_Heaven",a)}:e.f?function(a){return!!w("sage",a)}:e.Y?function(a){return ea('.//span[@class="filetitle" and contains(text(),"'+unescape("%u21E9")+'")]',a)}:function(a){return(a=a.querySelector('a[href^="mailto:"], a[href="sage"]'))&&/sage/i.test(a.href)}}}function Ec(a,b,c,d){a.H=c;a.count=d;a.l=a.querySelector(e.A);a.s=Ga(a);a.ea=e.yb(a);a.setAttribute("de-post",b);F[a.a=b]=a}function Re(a,b,c){var d,f,h=V,g=W(e.sb,a);A(a.getElementsByTagName("script"),s);if(2>y.length&&
(e.ra=e.b||e.F?".replyContainer":e.z?'div[id^="replies"] > table':!e.p&&(e.o||a.querySelector("td."+e.v))?"form > table, div > table":V,e.ma=e.b||e.F?function(a){return a.parentNode}:e.ra?function(a){return a.k?a:T("ancestor::table[1]",a)}:function(a){return a},e.ra&&(jb=a.querySelector(e.ra))&&b!==l))jb=l.importNode(jb,m);if(0===g.length&&(g=a.querySelectorAll(e.jb),0===g.length))for(d=P("hr",a).parentNode.firstChild;;){for(g=b.createElement("div");d&&(f=d.nextSibling)&&"HR"!==f.tagName;)g.appendChild(d),
d=f;h?K(h,g):Z(a.firstChild,g);if(!d||!f)return;g.childElementCount&&c(g);h=f;d=f.nextSibling}A(g,c)}function Xe(a){try{Re(a,l,function(a){if(e.m||e.p)K(a,a.lastChild),s(w("clear",a));var b,f=e.Wa(a,l),h=Fa.slice.call(e.za(a)),j=h.length;Ec(f,a.a=e.Aa(f),a,0);f.k=m;f.ga=(w(e.Pa,f)||{}).textContent||ya(f).substring(0,70);for(b=0;b<j;b++)Ec(h[b],e.aa(h[b]),a,b+1);y.push(f);ga.push(f);y=y.concat(h);g.r(a,"de-thread");a.M=j+Vd(a)})}catch(b){return GM_log("DELFORM ERROR:\n"+(g.n?b.stack:b.name+": "+b.message+
"\n"+(g.c?b.stack.replace(/^([^@]*).*\/(.+)$/gm,function(a,b,e){return"    at "+(b?b+" ("+e+")":e)}):b.stack))),V}a.removeAttribute("id");return m}function Gc(a){Ob&&(a=Ob.Bb(a).Va(a));if(e.b||e.f)a=a.replace(/(^|>|\s|&gt;)(https*:\/\/.*?)(?=$|<|\s)/ig,'$1<a href="$2">$2</a>');e.b&&f.noSpoilers&&(a=a.replace(/"spoiler">/g,'"de-spoiler">'));f.hideBySpell&&S.N[0]&&(a=xe(S.N,a));f.crossLinks&&(a=a.replace(RegExp(">https?:\\/\\/[^\\/]*"+e.e+"\\/([a-z0-9]+)\\/(?:res\\/|thread-)(\\d+)(?:[^#<]+)?(?:#i?(\\d+))?<",
"g"),function(a,c,d,e){return">&gt;&gt;/"+c+"/"+(e||d)+"<"}));return a}function Dc(a){e.N&&(a.innerHTML=Gc(a.innerHTML));return a}function Zf(){g.$a(z,Gc(z.outerHTML||(new XMLSerializer).serializeToString(z)));z.style.display="none";z.id="de-dform-old";z=z.previousSibling;R(window,{load:function(){s(o("de-dform-old"))}})}function Ye(a){if(e.u){var b;if(u&&(a=w("de-thread",a).nextSibling)){for(;b=a.nextSibling;)s(a),a=b;g.ba(a,"<hr />")}}else if(e.z)for(var a=W("reflink",a),c=a.length-1;0<=c;c--)b=
a[c].firstChild,b.onclick=n,b.href=na(e.host,v,b.textContent),b.target="_blank"}function hf(){ka=m;f.favIcoBlink&&Aa&&(clearInterval(mb),A(l.head.querySelectorAll('link[rel="shortcut icon"]'),s),l.head.appendChild(q("link",{href:Aa,rel:"shortcut icon"},n)));1===f.updThread&&setTimeout(function(){l.title=Oa},200)}function $f(){h=Qe(l.querySelector(e.hb));ba=l.querySelector('form[name="oeform"], form[action*="paint"]');u?(f.rePageTitle?(Oa="/"+v+" - "+F[u].ga,l.title=Oa):Oa=l.title,10<g.c||g.n?(l.addEventListener(g.Mb,
function(){l.Db||l.Pb?ka=V:hf()},V),ka=!(l.Db||l.Pb)):(window.onblur=function(){ka=V},window.onfocus=hf,ka=V,R(window,{mousemove:function b(){ka=m;bc(window,{mousemove:b})}})),ie(),(2===f.updThread||3===f.updThread)&&K(w("de-thread",l),R(C('<span>[<a href="#">'+Qd[j]+"</a>]</span>"),{click:function(b){x(b);Bb(m,function(){ta(n,0)})}}))):setTimeout(window.scrollTo,20,0,0);f.updScript&&me(V,function(b){I(b,"updavail",V)})}function jf(){var a=fc=Date.now();if(Wf()){cc=l.createElement("div");kf();var b=
(window.location.pathname||"").match(/^(?:\/?(.*?)\/?)?(res\/|thread-)?(\d+|index|wakaba)?(\.(?:[xme]*html?|php))?$/);v=b[1]||(e.Ua?"df":"");Cc=e.f?"thread-":"res/";u=b[2]?b[3]:V;nc=b[3]&&!u?+b[3]||0:0;wb=b[4]||(e.o?".htm":e.m?".php":e.b?"":".html");Aa=(l.querySelector('head link[rel="shortcut icon"]')||{}).href;M("initBoard");f=kc("DESU_Config_"+e.e)||Zd(g.pa);f.version=Ia.version;g.V&&(f.preLoadImgs=0);if((g.V||g.ja)&&2===f.ajaxReply)f.ajaxReply=1;g.ua||(f.animations=0);if(e.b||e.u)f.findRarJPEG=
0;g.c||(Ia.favIcoBlink=0);g.n?f.favIcoBlink=0:f.desktNotif=0;g.d&&(11.6>g.d&&2>f.scriptStyle&&(f.scriptStyle=2),12>g.d&&(f.YTubeTitles=0),2===f.YTubeType&&(f.YTubeType=1),f.updScript=0);f.saveSage||(f.sageReply=0);f.passwValue||(f.passwValue=Math.round(1E15*Math.random()).toString(32));N("DESU_Config_"+e.e,JSON.stringify(f));j=f.language;da=xb("DESU_Stat_"+e.e,{view:0,op:0,reply:0});u&&(da.view=+da.view+1);N("DESU_Stat_"+e.e,JSON.stringify(da));f.correctTime&&(Ob=new qa(f.timePattern,f.timeOffset,
j,sessionStorage.timeRPattern,sessionStorage.timeRPHash));e.i&&(e.zb=new qa("yyyy-nn-dd-hh-ii-ss",f.timeOffset||0,f.correctTime?j:1,"1_d _m _y (_w) _h:_i ",152203056));f.hideBySpell&&jc();e.N=e.b||e.f||Ob||S&&S.N[0]||f.crossLinks;M("readCfg");e.N&&(Zf(),M("replaceDelform"));Xe(z)&&(M("parseDelform"),lc(),M("readFavorites"),f.keybNavig&&(Df(),M("initKeyNavig")),Ye(z),ab||($f(),M("initPage"),ee(),M("addPanel"),b=p("div",{id:"de-parea",style:"text-align: center;"},[p("div",{id:"de-togglereply",style:"display: none;"},
[X("["),q("a",{text:vd[j],href:"#","class":"de-abtn"},{click:ge}),X("]")]),p("div",{id:"de-pform"},[h.form,ba]),l.createElement("hr")]),u&&1===f.addPostForm?K(e.b?P("hr",z):z,b):Z(z,b),(u&&1<f.addPostForm||!u&&f.noThrdForm)&&H(b),g.ba(b,'<div id="de-qarea" class="'+e.v+'" style="display: none;"></div>'),3===f.addPostForm&&fa(o("de-qarea"),[C('<span id="de-qarea-target">'+wd[j]+' <a class="de-abtn"></a></span>'),q("span",{id:"de-qarea-close",text:"\u00d7"},{click:Ca})]),h.L?we(n,n,n):ba&&ra(n,v,y[0].a,
V,we),M("initPostform")),Lf(),f.preLoadImgs&&window.postMessage("Kall","*"),y.forEach(xc),Ya(JSON.stringify(E)),M("addPostButtons"),f.expandImgs&&(y.forEach(Gb),M("eventPostImg")),f.expandPosts&&!u&&(y.forEach(Fc),M("expandPost")),f.addMP3&&(Db(n),M("addLinkMP3")),f.addYouTube&&(Cb(n),M("addLinkTube")),f.addImgs&&(Eb(z),M("addLinkImg")),f.imgSrcBtns&&(Fb(z),M("addImgSearch")),2===f.linksNavig&&(Ac(F),M("genRefMap")),f.linksNavig&&(ib(z),M("eventRefLink")),ae(),f.markViewed&&lf(),Ze(),Ja(),M("readPosts"),
ne(),M("scriptCSS"),tc=Date.now()-a)}}var Ia={version:"12.9.24.0",language:0,hideBySpell:0,hideByWipe:1,wipeSameLin:1,wipeSameWrd:1,wipeLongWrd:1,wipeSpecial:0,wipeCAPS:0,wipeNumbers:1,filterThrds:1,menuHiddBtn:1,hideRefPsts:0,delHiddPost:0,updThread:1,updThrDelay:60,favIcoBlink:1,desktNotif:0,expandPosts:2,expandImgs:2,maskImgs:0,preLoadImgs:0,findRarJPEG:0,showGIFs:0,noImgSpoil:0,postBtnsTxt:0,imgSrcBtns:1,noSpoilers:1,noPostNames:0,noPostScrl:1,keybNavig:0,correctTime:0,timeOffset:"",timePattern:"",
linksNavig:2,linksOver:100,linksOut:1500,markViewed:0,strikeHidd:0,noNavigHidd:0,crossLinks:0,insertNum:1,addMP3:1,addImgs:1,addYouTube:3,YTubeType:0,YTubeWidth:360,YTubeHeigh:270,YTubeHD:0,YTubeTitles:0,ajaxReply:2,postSameImg:1,removeEXIF:1,removeFName:0,addPostForm:2,noThrdForm:1,favOnReply:1,addSageBtn:1,saveSage:1,sageReply:0,captchaLang:1,addTextBtns:1,txtBtnsLoc:0,passwValue:"",userName:0,nameValue:"",userSignat:0,signatValue:"",noBoardRule:1,noGoto:1,noPassword:1,scriptStyle:0,expandPanel:0,
attachPanel:1,panelCounter:1,rePageTitle:1,animation:1,closePopups:0,updScript:1,scrUpdIntrv:1,lastScrUpd:0,textaWidth:500,textaHeight:160};ha={hideBySpell:["Заклинания: ","Magic spells: "],hideByWipe:["Анти-вайп детекторы ","Anti-wipe detectors "],wipeSameLin:["Повтор строк","Same lines"],wipeSameWrd:["Повтор слов",
"Same words"],wipeLongWrd:["Длинные слова","Long words"],wipeSpecial:["Спецсимволы","Special symbols"],wipeCAPS:["КАПС/реГисТР","CAPS/cAsE"],wipeNumbers:["Числа","Numbers"],filterThrds:["Применять фильтры к тредам",
"Apply filters to threads"],menuHiddBtn:["Дополнительное меню кнопок скрытия ","Additional menu of hide buttons"],hideRefPsts:["Скрывать ответы на скрытые посты*","Hide replies to hidden posts*"],delHiddPost:["Удалять скрытые посты",
"Delete hidden posts"],updThread:{q:[["Откл.","Авто","Счет+клик","По клику"],["Disable","Auto","Count+click","On click"]],t:["AJAX обновление треда* ","AJAX thread update* "]},updThrDelay:[" (сек)"," (sec)"],favIcoBlink:["мигать фавиконом при новых постах*",
"Favicon blinking on new posts*"],desktNotif:["Уведомления на рабочем столе","Desktop notifications"],expandPosts:{q:[["Откл.","Авто","По клику"],["Disable","Auto","On click"]],t:["AJAX загрузка сокращенных постов*",
"AJAX upload of shorted posts*"]},expandImgs:{q:[["Откл.","В посте","По центру"],["Disable","In post","By center"]],t:["раскрывать изображения ","expand images "]},preLoadImgs:["Предварительно загружать изображения*",
"Pre-load images*"],findRarJPEG:["Распознавать rarJPEG'и в изображениях*","Detect rarJPEGs in images*"],showGIFs:["Анимировать GIFы в постах*","Animate GIFs in posts*"],noImgSpoil:["Раскрывать изображения-спойлеры*",
"Open spoiler-images*"],postBtnsTxt:["Кнопки постов в виде текста*","Show post buttons as text*"],imgSrcBtns:["Добавлять кнопки для поиска изображений*","Add image search buttons*"],noSpoilers:["Открывать текстовые спойлеры",
"Open text spoilers"],noPostNames:["Скрывать имена в постах","Hide names in posts"],noPostScrl:["Без скролла в постах","No scroll in posts"],keybNavig:["Навигация с помощью клавиатуры* ",
"Navigation with keyboard* "],correctTime:["Корректировать время в постах* ","Correct time in posts* "],timeOffset:[" Разница во времени"," Time difference"],timePattern:["Шаблон замены","Replace pattern"],linksNavig:{q:[["Откл.",
"Без карты","С картой"],["Disable","No map","With map"]],t:["навигация по >>ссылкам* ","navigation by >>links* "]},linksOver:[" задержка появления (мс)"," delay appearance (ms)"],linksOut:[" задержка пропадания (мс)",
" delay disappearance (ms)"],markViewed:["Отмечать просмотренные посты*","Mark viewed posts*"],strikeHidd:["Зачеркивать >>ссылки на скрытые посты","Strike >>links to hidden posts"],noNavigHidd:["Не отображать превью для скрытых постов",
"Don't show previews for hidden posts"],crossLinks:["Преобразовывать http:// в >>/b/ссылки*","Replace http:// with >>/b/links*"],insertNum:["Вставлять >>ссылку по клику на №поста*","Insert >>link on №postnumber click*"],addMP3:["Добавлять плейер к mp3-ссылкам* ",
"Add player to mp3-links* "],addImgs:["Загружать изображения к .jpg-, .png-, .gif-ссылкам*","Load images to .jpg-, .png-, .gif-links*"],addYouTube:{q:[["Ничего","Плейер по клику","Авто плейер","Превью+плейер",
"Только превью"],["Nothing","On click player","Auto player","Preview+player","Only preview"]],t:["к YouTube-ссылкам* ","to YouTube-links* "]},YTubeType:{q:[["Flash","HTML5 iframe","HTML5 video"],["Flash","HTML5 iframe","HTML5 video"]],t:["",""]},YTubeHD:["HD ","HD "],YTubeTitles:["Загружать названия к YouTube-ссылкам*",
"Load titles into YouTube-links*"],ajaxReply:{q:[["Откл.","Iframe","HTML5"],["Disable","Iframe","HTML5"]],t:["AJAX отправка постов*","posting with AJAX*"]},postSameImg:["Возможность отправки одинаковых изображений",
"Ability to post same images"],removeEXIF:["Удалять EXIF-данные из JPEG-изображений","Remove EXIF-data from JPEG-images"],removeFName:["Удалять имя из отправляемых файлов","Remove names from uploaded files"],addPostForm:{q:[["Сверху",
"Внизу","В постах","Отдельная"],["At top","At bottom","Inline","Hanging"]],t:["форма ответа в треде* ","reply form in thread* "]},noThrdForm:["Прятать форму создания треда","Hide thread creating form"],
favOnReply:["Добавлять тред в избранное при ответе","Add thread to favorites on reply"],addSageBtn:["Sage вместо поля E-mail* ","Sage button instead of E-mail field* "],saveSage:["запоминать сажу","remember sage"],captchaLang:{q:[["Откл.",
"Eng","Rus"],["Disable","Eng","Rus"]],t:["язык ввода капчи","language input in captcha"]},addTextBtns:{q:[["Откл.","Графич.","Упрощ.","Стандарт."],["Disable","As images","As text","Standard"]],t:["кнопки форматирования текста ",
"text format buttons "]},txtBtnsLoc:["внизу","at bottom"],userPassw:[" Постоянный пароль"," Fixed password"],userName:["Постоянное имя","Fixed name"],userSignat:["Постоянная подпись","Fixed signature"],noBoardRule:["правила ",
"rules "],noGoto:["поле goto ","goto field "],noPassword:["пароль","password"],excludeList:["Список адресов, запрещающих запуск скрипта:","Address list, that excludes script launch:"],scriptStyle:{q:[["Glass black","Glass blue","Solid grey"],["Glass black","Glass blue",
"Solid grey"]],t:["стиль скрипта","script style"]},attachPanel:["Прикрепить главную панель","Attach main panel"],panelCounter:["Счетчик постов/изображений на главной панели",
"Counter of posts/images on main panel"],rePageTitle:["Название треда в заголовке вкладки*","Thread title in page tab*"],animation:["CSS3 анимация в скрипте","CSS3 animation in script"],closePopups:["Автоматически закрывать уведомления",
"Close popups automatically"],updScript:["Автоматически проверять обновления скрипта","Check for script update automatically"],scrUpdIntrv:{q:[["Каждый день","Каждые 2 дня","Каждую неделю",
"Каждые 2 недели","Каждый месяц"],["Every day","Every 2 days","Every week","Every 2 week","Every month"]],t:["интервал проверки","check interval"]},language:{q:[["Ru","En"],["Ru","En"]],t:["",""]}};Cd={bold:["Жирный","Bold"],italic:["Наклонный",
"Italic"],under:["Подчеркнутый","Underlined"],strike:["Зачеркнутый","Strike"],spoil:["Спойлер","Spoiler"],code:["Код","Code"],quote:["Цитировать выделенное","Quote selected"]};Pc={filters:["Фильтры","Filters"],
posts:["Посты","Posts"],links:["Ссылки","Links"],form:["Форма","Form"],common:["Общее","Common"],info:["Инфо","Info"]};Rb={settings:["Настройки","Settings"],hidden:["Скрытое","Hidden"],favor:["Избранное","Favorites"],refresh:["Обновить",
"Refresh"],goback:["Назад","Go back"],gonext:["Следующая","Next"],goup:["Наверх","To the top"],godown:["В конец","To the bottom"],newthr:["Создать тред","New thread"],expimg:["Раскрыть картинки","Expand images"],maskimg:["Маскировать картинки",
"Mask images"],"upd-on":["Автообновление треда","Thread autoupdate"],"audio-off":["Звуковое оповещение о новых постах","Sound notification about new posts"],catalog:["Каталог","Catalog"],counter:["Постов/Изображений в треде",
"Posts/Images in thread"]};qd=[["Скрывать выделенное","Скрывать изображение","Скрыв. схожие изобр.","Скрыть схожий текст"],["Hide selected text","Hide same images",
"Hide similar images","Hide similar text"]];rd=[["5 постов","15 постов","30 постов","50 постов","100 постов"],["5 posts","15 posts","30 posts","50 posts","100 posts"]];sd=[["1 страница","2 страницы","3 страницы","4 страницы",
"5 страниц"],["1 page","2 pages","3 pages","4 pages","5 pages"]];td=[["Каждые 30 сек.","Каждую минуту","Каждые 2 мин.","Каждые 5 мин."],["Every 30 sec.","Every minute","Every 2 min.","Every 5 min."]];Qc=["Добавить","Add"];Rc=["Применить",
"Apply"];ob=["Очистить","Clear"];zd=["Обновить","Refresh"];ad=["Загрузить","Load"];Ea=["Сохранить","Save"];pb=["Правка","Edit"];ed=["Сброс","Reset"];Xb=["Удалить","Remove"];md=["Инфо","Info"];Wb=["Отмена",
"Undo"];wa=["Загрузка...","Loading..."];Sb=["Проверка...","Checking..."];$b=["Удаление...","Deleting..."];sb=["Ошибка:","Error:"];la=["Ошибка подключения","Connection failed"];Kd=["Тред недоступен (№",
"Thread is unavailable (№"];Ad=["Пост(ы) удален(ы)!","Post(s) deleted!"];Bd=["Не могу удалить пост(ы):\n","Can't delete post(s):\n"];Rd=["Неправильные настройки времени","Invalid time settings"];cd=["Глобальные настройки не найдены",
"Global config not found"];ac=["Пост не найден","Post not found"];Uc=["Проверить сейчас","Check now"];Od=["Доступно обновление!","Update available!"];Pd=["У вас стоит самая последняя версия!",
"You have latest version!"];Jd=["В треде %m непрочитанных сообщений.","There are %m unreaded messages in thread."];Vc=["Версия: ","Version: "];Wc=["Хранение: ","Storage: "];Xc=["Тредов просмотрено: ","Threads viewed: "];
Yc=["Тредов создано: ","Threads created: "];Zc=["Постов: ","Posts: "];Tb=["Всего: ","Total: "];Tc=["Не отображать: ","Do not show: "];bd=["Загрузить глобальные настройки","Load global settings"];
dd=["Сохранить настройки как глобальные","Save settings as global"];fd=["Сбросить в настройки по умолчанию","Reset settings to defaults"];rb=["Сохранить внесенные изменения",
"Save your changes"];qb=["Правка в текстовом формате","Edit in text format"];nd=["Обновить счетчики постов","Refresh posts counters"];od=["Проверить актуальность тредов (до 5 страницы)",
"Check for threads actuality (up to 5 page)"];pd=["Очистить записи недоступных тредов","Clear notes of inaccessible threads"];Yb=["Удалить выделенные записи","Remove selected notes"];hd=["Скрытые посты на странице",
"Hidden posts on page"];kd=["Скрытые треды","Hidden threads"];id=["На этой странице нет скрытых постов...","No hidden posts on this page..."];jd=["Нет скрытых тредов...","No hidden threads..."];Vb=["Раскрыть все",
"Expand all"];ld=["Нет избранных тредов...","Favorites is empty..."];Nd=["Ответы:","Replies:"];Hd=["Пропущено ответов: ","Posts omitted: "];Id=["Свернуть тред","Collapse thread"];Md=["удалён","deleted"];Qd=["Получить новые посты",
"Get new posts"];Zb=["Страница","Page"];Ld=["Скрытый тред:","Hidden thread:"];vd=["Раскрыть форму","Expand form"];ud=["Искать в ","Search in "];Gd=["Ответ","Reply"];wd=["Ответ в","Reply to"];yd=["Ждите","Wait"];xd=["+ rarJPEG",
"+ rarJPEG"];Sc=['На доске:\n"J" - тред ниже,\n"K" - тред выше,\n"N" - пост ниже,\n"M" - пост выше,\n"V" - вход в тред\n\nВ треде:\n"J" - пост ниже,\n"K" - пост выше,\n"V" - быстрый ответ',
'On board:\n"J" - thread below,\n"K" - thread above,\n"N" - post below,\n"M" - post above,\n"V" - enter a thread\n\nIn thread:\n"J" - post below,\n"K" - post above,\n"V" - quick reply'];Ed=["янв,фев,мар,апр,мая,июн,июл,авг,сен,окт,ноя,дек".split(","),"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(",")];Fd=["января,февраля,марта,апреля,мая,июня,июля,августа,сентября,октября,ноября,декабря".split(","),
"January,February,March,April,May,June,July,August,September,October,November,December".split(",")];Dd=["Вск,Пнд,Втр,Срд,Чтв,Птн,Сбт".split(","),"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(",")];gd=["Данное действие удалит все ваши настройки и закладки. Продолжить?",
"This will delete all your preferences and favourites. Continue?"];Sd=["Файл повреждён: ","File is corrupted: "];$c=["Отладка","Debug"];Ub=["Информация для отладки","Information for debugging"];var l=window.document,Fa=Array.prototype,f,E,J,da,F={},y=[],ga=[],Y,O,g,e,v,Cc,u,nc,wb,Oa,h,z,ba,cc,jb;Pb=[];
va={};nb=ua=n;Aa="";mb=n;Qa=ka=V;Ra=n;lb=Pa=V;var Nb,Mc,S,za,Wa,fc,tc,tb="",Ob,$a,j,He,Na="",ab,Za;yb.prototype=Ia;Ab.prototype.append=function(a){if("file"===a.type){if(0<a.files.length){var b=a.files[0].name;this.data.push("--"+this.ka+'\r\nContent-Disposition: form-data; name="'+a.name+'"; filename="'+(!f.removeFName?b:" "+b.substring(b.lastIndexOf(".")))+'"\r\nContent-type: '+a.files[0].type+"\r\n\r\n",n,"\r\n");this.Jb(a,this.data.length-2)}}else("checkbox"!==a.type||a.checked)&&this.data.push("--"+
this.ka+'\r\nContent-Disposition: form-data; name="'+a.name+'"\r\n\r\n'+a.value+"\r\n")};Ab.prototype.Jb=function(a,b){var c=new FileReader,d=a.files[0],h=this;/^image\/(?:png|jpeg)$/.test(d.type)?(c.onload=function(){var l=Jf(new Uint8Array(this.result),e.u||e.b||!!a.W);l?(a.W&&l.push(a.W),f.postSameImg&&l.push(""+Math.round(1E6*Math.random())),h.data[b]=g.ia(l,n),h.va--):(h.error=m,I(Sd[j]+d.name,"upload",V));c=h=a=b=d=n},c.readAsArrayBuffer(d),this.va++):this.data[b]=d};qa.Lb=function(a){if(a.checked&&
(!/^[+-]\d{1,2}$/.test(f.timeOffset)||qa.Qa(f.timePattern)))I(Rd[j],"err-correcttime",V),Q("correctTime",0),a.checked=V};qa.Qa=function(a){return!a.contains("i")||!a.contains("h")||!a.contains("d")||!a.contains("y")||!(a.contains("n")||a.contains("m"))||/[^\?\-\+sihdmwny]|mm|ww|\?\?|([ihdny]\?)\1+/.test(a)};qa.prototype.Bb=function(a){if(this.Za||this.disabled)return this;var b,c,d,e=1,f=0,h=a.match(RegExp(this.kb));if(!h)return this.disabled=m,this;this.da="";for(d=h[0];c=h[e++];){if("m"===(b=this.pattern[e-
2]))this.ya=3<c.length;a=d.indexOf(c,f);this.da+=d.substring(f,a)+"_"+b;f=a+c.length}sessionStorage.timeRPHash=ic(sessionStorage.timeRPattern=(this.ya?"1":"0")+this.da);this.Za=m;return this};qa.prototype.Va=function(a){function b(a){return 10>a?"0"+a:a}if(this.disabled)return a;var c=this.qb,d=this.ya?this.ob:this.pb,e=this.pattern,f=this.da,h=this.wb,a=a.replace(RegExp(this.kb,"g"),function(){var a,g,j,l,o,p,q,r,s;for(a=1;8>a;a++)g=arguments[a],j=e[a-1],"s"===j?l=g:"i"===j?o=g:"h"===j?p=g:"d"===
j?q=g:"n"===j?r=g-1:"y"===j?s=g:"m"===j&&(r=/^янв|^jan/i.test(g)?0:/^фев|^feb/i.test(g)?1:/^мар|^mar/i.test(g)?2:/^апр|^apr/i.test(g)?3:/^май|^may/i.test(g)?4:/^июн|^jun/i.test(g)?5:/^июл|^jul/i.test(g)?6:/^авг|^aug/i.test(g)?7:/^сен|^sep/i.test(g)?8:/^окт|^oct/i.test(g)?9:/^ноя|^nov/i.test(g)?10:/^дек|^dec/i.test(g)&&11);
a=new Date(2===s.length?"20"+s:s,r,q,p,o,l||0);a.setHours(a.getHours()+h);return f.replace("_s",b(a.getSeconds())).replace("_i",b(a.getMinutes())).replace("_h",b(a.getHours())).replace("_d",b(a.getDate())).replace("_w",c[a.getDay()]).replace("_n",b(a.getMonth()+1)).replace("_m",d[a.getMonth()]).replace("_y",2===s.length?(""+a.getFullYear()).substring(2):a.getFullYear())}),c=d=e=f=h=b=n;return a};window.opera?R(l,{DOMContentLoaded:jf}):jf()})(window.opera&&window.opera.scriptStorage);
